(window.webpackJsonp=window.webpackJsonp||[]).push([["chunksSdk~app"],{"2ad5":function(t,n,e){"use strict";var o=e("7037").default;e("b64b"),e("e25e"),e("d3b7"),e("25f0"),e("a9e3"),e("f4b3"),e("bf19");var i=e("543b"),s=i.Reader,r=i.Writer,g=i.util,a=i.roots.default||(i.roots.default={});a.Ping=function(){function t(t){if(t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.type=g.Long?g.Long.fromBits(0,0,!1):0,t.encode=function(t,n){return n||(n=r.create()),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&n.uint32(8).int64(t.type),n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.Ping;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.type=t.int64();break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.Ping)return t;var n=new a.Ping;return null!=t.type&&(g.Long?(n.type=g.Long.fromValue(t.type)).unsigned=!1:"string"==typeof t.type?n.type=parseInt(t.type,10):"number"==typeof t.type?n.type=t.type:"object"===o(t.type)&&(n.type=new g.LongBits(t.type.low>>>0,t.type.high>>>0).toNumber())),n},t.toObject=function(t,n){n||(n={});var e={};if(n.defaults)if(g.Long){var o=new g.Long(0,0,!1);e.type=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.type=n.longs===String?"0":0;return null!=t.type&&t.hasOwnProperty("type")&&("number"==typeof t.type?e.type=n.longs===String?String(t.type):t.type:e.type=n.longs===String?g.Long.prototype.toString.call(t.type):n.longs===Number?new g.LongBits(t.type.low>>>0,t.type.high>>>0).toNumber():t.type),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.ImLogin=function(){function t(t){if(t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.sign=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.token="",t.prototype.ct=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.subApp=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.pushChannel=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.pushToken="",t.prototype.lastToken="",t.encode=function(t,n){return n||(n=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&n.uint32(8).int64(t.sign),null!=t.token&&Object.hasOwnProperty.call(t,"token")&&n.uint32(18).string(t.token),null!=t.ct&&Object.hasOwnProperty.call(t,"ct")&&n.uint32(24).int64(t.ct),null!=t.subApp&&Object.hasOwnProperty.call(t,"subApp")&&n.uint32(32).int64(t.subApp),null!=t.pushChannel&&Object.hasOwnProperty.call(t,"pushChannel")&&n.uint32(40).int64(t.pushChannel),null!=t.pushToken&&Object.hasOwnProperty.call(t,"pushToken")&&n.uint32(50).string(t.pushToken),null!=t.lastToken&&Object.hasOwnProperty.call(t,"lastToken")&&n.uint32(58).string(t.lastToken),n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.ImLogin;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.token=t.string();break;case 3:o.ct=t.int64();break;case 4:o.subApp=t.int64();break;case 5:o.pushChannel=t.int64();break;case 6:o.pushToken=t.string();break;case 7:o.lastToken=t.string();break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.ImLogin)return t;var n=new a.ImLogin;return null!=t.sign&&(g.Long?(n.sign=g.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?n.sign=parseInt(t.sign,10):"number"==typeof t.sign?n.sign=t.sign:"object"===o(t.sign)&&(n.sign=new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.token&&(n.token=String(t.token)),null!=t.ct&&(g.Long?(n.ct=g.Long.fromValue(t.ct)).unsigned=!1:"string"==typeof t.ct?n.ct=parseInt(t.ct,10):"number"==typeof t.ct?n.ct=t.ct:"object"===o(t.ct)&&(n.ct=new g.LongBits(t.ct.low>>>0,t.ct.high>>>0).toNumber())),null!=t.subApp&&(g.Long?(n.subApp=g.Long.fromValue(t.subApp)).unsigned=!1:"string"==typeof t.subApp?n.subApp=parseInt(t.subApp,10):"number"==typeof t.subApp?n.subApp=t.subApp:"object"===o(t.subApp)&&(n.subApp=new g.LongBits(t.subApp.low>>>0,t.subApp.high>>>0).toNumber())),null!=t.pushChannel&&(g.Long?(n.pushChannel=g.Long.fromValue(t.pushChannel)).unsigned=!1:"string"==typeof t.pushChannel?n.pushChannel=parseInt(t.pushChannel,10):"number"==typeof t.pushChannel?n.pushChannel=t.pushChannel:"object"===o(t.pushChannel)&&(n.pushChannel=new g.LongBits(t.pushChannel.low>>>0,t.pushChannel.high>>>0).toNumber())),null!=t.pushToken&&(n.pushToken=String(t.pushToken)),null!=t.lastToken&&(n.lastToken=String(t.lastToken)),n},t.toObject=function(t,n){n||(n={});var e={};if(n.defaults){if(g.Long){var o=new g.Long(0,0,!1);e.sign=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sign=n.longs===String?"0":0;if(e.token="",g.Long){o=new g.Long(0,0,!1);e.ct=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.ct=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.subApp=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.subApp=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.pushChannel=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.pushChannel=n.longs===String?"0":0;e.pushToken="",e.lastToken=""}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?e.sign=n.longs===String?String(t.sign):t.sign:e.sign=n.longs===String?g.Long.prototype.toString.call(t.sign):n.longs===Number?new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.token&&t.hasOwnProperty("token")&&(e.token=t.token),null!=t.ct&&t.hasOwnProperty("ct")&&("number"==typeof t.ct?e.ct=n.longs===String?String(t.ct):t.ct:e.ct=n.longs===String?g.Long.prototype.toString.call(t.ct):n.longs===Number?new g.LongBits(t.ct.low>>>0,t.ct.high>>>0).toNumber():t.ct),null!=t.subApp&&t.hasOwnProperty("subApp")&&("number"==typeof t.subApp?e.subApp=n.longs===String?String(t.subApp):t.subApp:e.subApp=n.longs===String?g.Long.prototype.toString.call(t.subApp):n.longs===Number?new g.LongBits(t.subApp.low>>>0,t.subApp.high>>>0).toNumber():t.subApp),null!=t.pushChannel&&t.hasOwnProperty("pushChannel")&&("number"==typeof t.pushChannel?e.pushChannel=n.longs===String?String(t.pushChannel):t.pushChannel:e.pushChannel=n.longs===String?g.Long.prototype.toString.call(t.pushChannel):n.longs===Number?new g.LongBits(t.pushChannel.low>>>0,t.pushChannel.high>>>0).toNumber():t.pushChannel),null!=t.pushToken&&t.hasOwnProperty("pushToken")&&(e.pushToken=t.pushToken),null!=t.lastToken&&t.hasOwnProperty("lastToken")&&(e.lastToken=t.lastToken),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.ImLogout=function(){function t(t){if(t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.sign=g.Long?g.Long.fromBits(0,0,!1):0,t.encode=function(t,n){return n||(n=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&n.uint32(8).int64(t.sign),n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.ImLogout;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.ImLogout)return t;var n=new a.ImLogout;return null!=t.sign&&(g.Long?(n.sign=g.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?n.sign=parseInt(t.sign,10):"number"==typeof t.sign?n.sign=t.sign:"object"===o(t.sign)&&(n.sign=new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),n},t.toObject=function(t,n){n||(n={});var e={};if(n.defaults)if(g.Long){var o=new g.Long(0,0,!1);e.sign=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sign=n.longs===String?"0":0;return null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?e.sign=n.longs===String?String(t.sign):t.sign:e.sign=n.longs===String?g.Long.prototype.toString.call(t.sign):n.longs===Number?new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.Result=function(){function t(t){if(t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.sign=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.code=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.msg="",t.prototype.nowTime=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.uid=g.Long?g.Long.fromBits(0,0,!1):0,t.encode=function(t,n){return n||(n=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&n.uint32(8).int64(t.sign),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&n.uint32(16).int64(t.code),null!=t.msg&&Object.hasOwnProperty.call(t,"msg")&&n.uint32(26).string(t.msg),null!=t.nowTime&&Object.hasOwnProperty.call(t,"nowTime")&&n.uint32(32).int64(t.nowTime),null!=t.uid&&Object.hasOwnProperty.call(t,"uid")&&n.uint32(40).int64(t.uid),n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.Result;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.code=t.int64();break;case 3:o.msg=t.string();break;case 4:o.nowTime=t.int64();break;case 5:o.uid=t.int64();break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.Result)return t;var n=new a.Result;return null!=t.sign&&(g.Long?(n.sign=g.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?n.sign=parseInt(t.sign,10):"number"==typeof t.sign?n.sign=t.sign:"object"===o(t.sign)&&(n.sign=new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.code&&(g.Long?(n.code=g.Long.fromValue(t.code)).unsigned=!1:"string"==typeof t.code?n.code=parseInt(t.code,10):"number"==typeof t.code?n.code=t.code:"object"===o(t.code)&&(n.code=new g.LongBits(t.code.low>>>0,t.code.high>>>0).toNumber())),null!=t.msg&&(n.msg=String(t.msg)),null!=t.nowTime&&(g.Long?(n.nowTime=g.Long.fromValue(t.nowTime)).unsigned=!1:"string"==typeof t.nowTime?n.nowTime=parseInt(t.nowTime,10):"number"==typeof t.nowTime?n.nowTime=t.nowTime:"object"===o(t.nowTime)&&(n.nowTime=new g.LongBits(t.nowTime.low>>>0,t.nowTime.high>>>0).toNumber())),null!=t.uid&&(g.Long?(n.uid=g.Long.fromValue(t.uid)).unsigned=!1:"string"==typeof t.uid?n.uid=parseInt(t.uid,10):"number"==typeof t.uid?n.uid=t.uid:"object"===o(t.uid)&&(n.uid=new g.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber())),n},t.toObject=function(t,n){n||(n={});var e={};if(n.defaults){if(g.Long){var o=new g.Long(0,0,!1);e.sign=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sign=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.code=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.code=n.longs===String?"0":0;if(e.msg="",g.Long){o=new g.Long(0,0,!1);e.nowTime=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.nowTime=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.uid=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.uid=n.longs===String?"0":0}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?e.sign=n.longs===String?String(t.sign):t.sign:e.sign=n.longs===String?g.Long.prototype.toString.call(t.sign):n.longs===Number?new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.code&&t.hasOwnProperty("code")&&("number"==typeof t.code?e.code=n.longs===String?String(t.code):t.code:e.code=n.longs===String?g.Long.prototype.toString.call(t.code):n.longs===Number?new g.LongBits(t.code.low>>>0,t.code.high>>>0).toNumber():t.code),null!=t.msg&&t.hasOwnProperty("msg")&&(e.msg=t.msg),null!=t.nowTime&&t.hasOwnProperty("nowTime")&&("number"==typeof t.nowTime?e.nowTime=n.longs===String?String(t.nowTime):t.nowTime:e.nowTime=n.longs===String?g.Long.prototype.toString.call(t.nowTime):n.longs===Number?new g.LongBits(t.nowTime.low>>>0,t.nowTime.high>>>0).toNumber():t.nowTime),null!=t.uid&&t.hasOwnProperty("uid")&&("number"==typeof t.uid?e.uid=n.longs===String?String(t.uid):t.uid:e.uid=n.longs===String?g.Long.prototype.toString.call(t.uid):n.longs===Number?new g.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber():t.uid),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.ChatS=function(){function t(t){if(t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.sign=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.type=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.toUid=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.title="",t.prototype.body="",t.prototype.thumb="",t.prototype.width=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.height=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.duration=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.lat=0,t.prototype.lng=0,t.prototype.zoom=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.pushTitle="",t.prototype.pushBody="",t.prototype.pushSound="",t.encode=function(t,n){return n||(n=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&n.uint32(8).int64(t.sign),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&n.uint32(16).int64(t.type),null!=t.toUid&&Object.hasOwnProperty.call(t,"toUid")&&n.uint32(24).int64(t.toUid),null!=t.title&&Object.hasOwnProperty.call(t,"title")&&n.uint32(34).string(t.title),null!=t.body&&Object.hasOwnProperty.call(t,"body")&&n.uint32(42).string(t.body),null!=t.thumb&&Object.hasOwnProperty.call(t,"thumb")&&n.uint32(50).string(t.thumb),null!=t.width&&Object.hasOwnProperty.call(t,"width")&&n.uint32(56).int64(t.width),null!=t.height&&Object.hasOwnProperty.call(t,"height")&&n.uint32(64).int64(t.height),null!=t.duration&&Object.hasOwnProperty.call(t,"duration")&&n.uint32(72).int64(t.duration),null!=t.lat&&Object.hasOwnProperty.call(t,"lat")&&n.uint32(81).double(t.lat),null!=t.lng&&Object.hasOwnProperty.call(t,"lng")&&n.uint32(89).double(t.lng),null!=t.zoom&&Object.hasOwnProperty.call(t,"zoom")&&n.uint32(96).int64(t.zoom),null!=t.pushTitle&&Object.hasOwnProperty.call(t,"pushTitle")&&n.uint32(106).string(t.pushTitle),null!=t.pushBody&&Object.hasOwnProperty.call(t,"pushBody")&&n.uint32(114).string(t.pushBody),null!=t.pushSound&&Object.hasOwnProperty.call(t,"pushSound")&&n.uint32(122).string(t.pushSound),n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.ChatS;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.type=t.int64();break;case 3:o.toUid=t.int64();break;case 4:o.title=t.string();break;case 5:o.body=t.string();break;case 6:o.thumb=t.string();break;case 7:o.width=t.int64();break;case 8:o.height=t.int64();break;case 9:o.duration=t.int64();break;case 10:o.lat=t.double();break;case 11:o.lng=t.double();break;case 12:o.zoom=t.int64();break;case 13:o.pushTitle=t.string();break;case 14:o.pushBody=t.string();break;case 15:o.pushSound=t.string();break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.ChatS)return t;var n=new a.ChatS;return null!=t.sign&&(g.Long?(n.sign=g.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?n.sign=parseInt(t.sign,10):"number"==typeof t.sign?n.sign=t.sign:"object"===o(t.sign)&&(n.sign=new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.type&&(g.Long?(n.type=g.Long.fromValue(t.type)).unsigned=!1:"string"==typeof t.type?n.type=parseInt(t.type,10):"number"==typeof t.type?n.type=t.type:"object"===o(t.type)&&(n.type=new g.LongBits(t.type.low>>>0,t.type.high>>>0).toNumber())),null!=t.toUid&&(g.Long?(n.toUid=g.Long.fromValue(t.toUid)).unsigned=!1:"string"==typeof t.toUid?n.toUid=parseInt(t.toUid,10):"number"==typeof t.toUid?n.toUid=t.toUid:"object"===o(t.toUid)&&(n.toUid=new g.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber())),null!=t.title&&(n.title=String(t.title)),null!=t.body&&(n.body=String(t.body)),null!=t.thumb&&(n.thumb=String(t.thumb)),null!=t.width&&(g.Long?(n.width=g.Long.fromValue(t.width)).unsigned=!1:"string"==typeof t.width?n.width=parseInt(t.width,10):"number"==typeof t.width?n.width=t.width:"object"===o(t.width)&&(n.width=new g.LongBits(t.width.low>>>0,t.width.high>>>0).toNumber())),null!=t.height&&(g.Long?(n.height=g.Long.fromValue(t.height)).unsigned=!1:"string"==typeof t.height?n.height=parseInt(t.height,10):"number"==typeof t.height?n.height=t.height:"object"===o(t.height)&&(n.height=new g.LongBits(t.height.low>>>0,t.height.high>>>0).toNumber())),null!=t.duration&&(g.Long?(n.duration=g.Long.fromValue(t.duration)).unsigned=!1:"string"==typeof t.duration?n.duration=parseInt(t.duration,10):"number"==typeof t.duration?n.duration=t.duration:"object"===o(t.duration)&&(n.duration=new g.LongBits(t.duration.low>>>0,t.duration.high>>>0).toNumber())),null!=t.lat&&(n.lat=Number(t.lat)),null!=t.lng&&(n.lng=Number(t.lng)),null!=t.zoom&&(g.Long?(n.zoom=g.Long.fromValue(t.zoom)).unsigned=!1:"string"==typeof t.zoom?n.zoom=parseInt(t.zoom,10):"number"==typeof t.zoom?n.zoom=t.zoom:"object"===o(t.zoom)&&(n.zoom=new g.LongBits(t.zoom.low>>>0,t.zoom.high>>>0).toNumber())),null!=t.pushTitle&&(n.pushTitle=String(t.pushTitle)),null!=t.pushBody&&(n.pushBody=String(t.pushBody)),null!=t.pushSound&&(n.pushSound=String(t.pushSound)),n},t.toObject=function(t,n){n||(n={});var e={};if(n.defaults){if(g.Long){var o=new g.Long(0,0,!1);e.sign=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sign=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.type=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.type=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.toUid=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.toUid=n.longs===String?"0":0;if(e.title="",e.body="",e.thumb="",g.Long){o=new g.Long(0,0,!1);e.width=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.width=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.height=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.height=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.duration=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.duration=n.longs===String?"0":0;if(e.lat=0,e.lng=0,g.Long){o=new g.Long(0,0,!1);e.zoom=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.zoom=n.longs===String?"0":0;e.pushTitle="",e.pushBody="",e.pushSound=""}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?e.sign=n.longs===String?String(t.sign):t.sign:e.sign=n.longs===String?g.Long.prototype.toString.call(t.sign):n.longs===Number?new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.type&&t.hasOwnProperty("type")&&("number"==typeof t.type?e.type=n.longs===String?String(t.type):t.type:e.type=n.longs===String?g.Long.prototype.toString.call(t.type):n.longs===Number?new g.LongBits(t.type.low>>>0,t.type.high>>>0).toNumber():t.type),null!=t.toUid&&t.hasOwnProperty("toUid")&&("number"==typeof t.toUid?e.toUid=n.longs===String?String(t.toUid):t.toUid:e.toUid=n.longs===String?g.Long.prototype.toString.call(t.toUid):n.longs===Number?new g.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber():t.toUid),null!=t.title&&t.hasOwnProperty("title")&&(e.title=t.title),null!=t.body&&t.hasOwnProperty("body")&&(e.body=t.body),null!=t.thumb&&t.hasOwnProperty("thumb")&&(e.thumb=t.thumb),null!=t.width&&t.hasOwnProperty("width")&&("number"==typeof t.width?e.width=n.longs===String?String(t.width):t.width:e.width=n.longs===String?g.Long.prototype.toString.call(t.width):n.longs===Number?new g.LongBits(t.width.low>>>0,t.width.high>>>0).toNumber():t.width),null!=t.height&&t.hasOwnProperty("height")&&("number"==typeof t.height?e.height=n.longs===String?String(t.height):t.height:e.height=n.longs===String?g.Long.prototype.toString.call(t.height):n.longs===Number?new g.LongBits(t.height.low>>>0,t.height.high>>>0).toNumber():t.height),null!=t.duration&&t.hasOwnProperty("duration")&&("number"==typeof t.duration?e.duration=n.longs===String?String(t.duration):t.duration:e.duration=n.longs===String?g.Long.prototype.toString.call(t.duration):n.longs===Number?new g.LongBits(t.duration.low>>>0,t.duration.high>>>0).toNumber():t.duration),null!=t.lat&&t.hasOwnProperty("lat")&&(e.lat=n.json&&!isFinite(t.lat)?String(t.lat):t.lat),null!=t.lng&&t.hasOwnProperty("lng")&&(e.lng=n.json&&!isFinite(t.lng)?String(t.lng):t.lng),null!=t.zoom&&t.hasOwnProperty("zoom")&&("number"==typeof t.zoom?e.zoom=n.longs===String?String(t.zoom):t.zoom:e.zoom=n.longs===String?g.Long.prototype.toString.call(t.zoom):n.longs===Number?new g.LongBits(t.zoom.low>>>0,t.zoom.high>>>0).toNumber():t.zoom),null!=t.pushTitle&&t.hasOwnProperty("pushTitle")&&(e.pushTitle=t.pushTitle),null!=t.pushBody&&t.hasOwnProperty("pushBody")&&(e.pushBody=t.pushBody),null!=t.pushSound&&t.hasOwnProperty("pushSound")&&(e.pushSound=t.pushSound),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.ChatSR=function(){function t(t){if(t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.sign=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.msgId=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.msgTime=g.Long?g.Long.fromBits(0,0,!1):0,t.encode=function(t,n){return n||(n=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&n.uint32(8).int64(t.sign),null!=t.msgId&&Object.hasOwnProperty.call(t,"msgId")&&n.uint32(16).int64(t.msgId),null!=t.msgTime&&Object.hasOwnProperty.call(t,"msgTime")&&n.uint32(24).int64(t.msgTime),n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.ChatSR;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.msgId=t.int64();break;case 3:o.msgTime=t.int64();break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.ChatSR)return t;var n=new a.ChatSR;return null!=t.sign&&(g.Long?(n.sign=g.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?n.sign=parseInt(t.sign,10):"number"==typeof t.sign?n.sign=t.sign:"object"===o(t.sign)&&(n.sign=new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.msgId&&(g.Long?(n.msgId=g.Long.fromValue(t.msgId)).unsigned=!1:"string"==typeof t.msgId?n.msgId=parseInt(t.msgId,10):"number"==typeof t.msgId?n.msgId=t.msgId:"object"===o(t.msgId)&&(n.msgId=new g.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber())),null!=t.msgTime&&(g.Long?(n.msgTime=g.Long.fromValue(t.msgTime)).unsigned=!1:"string"==typeof t.msgTime?n.msgTime=parseInt(t.msgTime,10):"number"==typeof t.msgTime?n.msgTime=t.msgTime:"object"===o(t.msgTime)&&(n.msgTime=new g.LongBits(t.msgTime.low>>>0,t.msgTime.high>>>0).toNumber())),n},t.toObject=function(t,n){n||(n={});var e={};if(n.defaults){if(g.Long){var o=new g.Long(0,0,!1);e.sign=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sign=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.msgId=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.msgId=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.msgTime=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.msgTime=n.longs===String?"0":0}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?e.sign=n.longs===String?String(t.sign):t.sign:e.sign=n.longs===String?g.Long.prototype.toString.call(t.sign):n.longs===Number?new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.msgId&&t.hasOwnProperty("msgId")&&("number"==typeof t.msgId?e.msgId=n.longs===String?String(t.msgId):t.msgId:e.msgId=n.longs===String?g.Long.prototype.toString.call(t.msgId):n.longs===Number?new g.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber():t.msgId),null!=t.msgTime&&t.hasOwnProperty("msgTime")&&("number"==typeof t.msgTime?e.msgTime=n.longs===String?String(t.msgTime):t.msgTime:e.msgTime=n.longs===String?g.Long.prototype.toString.call(t.msgTime):n.longs===Number?new g.LongBits(t.msgTime.low>>>0,t.msgTime.high>>>0).toNumber():t.msgTime),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.ChatR=function(){function t(t){if(t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.sign=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.fromUid=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.toUid=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.msgId=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.msgTime=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.sput=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.newMsg=!1,t.prototype.type=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.title="",t.prototype.body="",t.prototype.thumb="",t.prototype.width=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.height=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.duration=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.lat=0,t.prototype.lng=0,t.prototype.zoom=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.pushTitle="",t.prototype.pushBody="",t.prototype.pushSound="",t.encode=function(t,n){return n||(n=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&n.uint32(8).int64(t.sign),null!=t.fromUid&&Object.hasOwnProperty.call(t,"fromUid")&&n.uint32(16).int64(t.fromUid),null!=t.toUid&&Object.hasOwnProperty.call(t,"toUid")&&n.uint32(24).int64(t.toUid),null!=t.msgId&&Object.hasOwnProperty.call(t,"msgId")&&n.uint32(32).int64(t.msgId),null!=t.msgTime&&Object.hasOwnProperty.call(t,"msgTime")&&n.uint32(40).int64(t.msgTime),null!=t.sput&&Object.hasOwnProperty.call(t,"sput")&&n.uint32(48).int64(t.sput),null!=t.newMsg&&Object.hasOwnProperty.call(t,"newMsg")&&n.uint32(56).bool(t.newMsg),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&n.uint32(64).int64(t.type),null!=t.title&&Object.hasOwnProperty.call(t,"title")&&n.uint32(74).string(t.title),null!=t.body&&Object.hasOwnProperty.call(t,"body")&&n.uint32(82).string(t.body),null!=t.thumb&&Object.hasOwnProperty.call(t,"thumb")&&n.uint32(90).string(t.thumb),null!=t.width&&Object.hasOwnProperty.call(t,"width")&&n.uint32(96).int64(t.width),null!=t.height&&Object.hasOwnProperty.call(t,"height")&&n.uint32(104).int64(t.height),null!=t.duration&&Object.hasOwnProperty.call(t,"duration")&&n.uint32(112).int64(t.duration),null!=t.lat&&Object.hasOwnProperty.call(t,"lat")&&n.uint32(121).double(t.lat),null!=t.lng&&Object.hasOwnProperty.call(t,"lng")&&n.uint32(129).double(t.lng),null!=t.zoom&&Object.hasOwnProperty.call(t,"zoom")&&n.uint32(136).int64(t.zoom),null!=t.pushTitle&&Object.hasOwnProperty.call(t,"pushTitle")&&n.uint32(146).string(t.pushTitle),null!=t.pushBody&&Object.hasOwnProperty.call(t,"pushBody")&&n.uint32(154).string(t.pushBody),null!=t.pushSound&&Object.hasOwnProperty.call(t,"pushSound")&&n.uint32(162).string(t.pushSound),n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.ChatR;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.fromUid=t.int64();break;case 3:o.toUid=t.int64();break;case 4:o.msgId=t.int64();break;case 5:o.msgTime=t.int64();break;case 6:o.sput=t.int64();break;case 7:o.newMsg=t.bool();break;case 8:o.type=t.int64();break;case 9:o.title=t.string();break;case 10:o.body=t.string();break;case 11:o.thumb=t.string();break;case 12:o.width=t.int64();break;case 13:o.height=t.int64();break;case 14:o.duration=t.int64();break;case 15:o.lat=t.double();break;case 16:o.lng=t.double();break;case 17:o.zoom=t.int64();break;case 18:o.pushTitle=t.string();break;case 19:o.pushBody=t.string();break;case 20:o.pushSound=t.string();break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.ChatR)return t;var n=new a.ChatR;return null!=t.sign&&(g.Long?(n.sign=g.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?n.sign=parseInt(t.sign,10):"number"==typeof t.sign?n.sign=t.sign:"object"===o(t.sign)&&(n.sign=new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.fromUid&&(g.Long?(n.fromUid=g.Long.fromValue(t.fromUid)).unsigned=!1:"string"==typeof t.fromUid?n.fromUid=parseInt(t.fromUid,10):"number"==typeof t.fromUid?n.fromUid=t.fromUid:"object"===o(t.fromUid)&&(n.fromUid=new g.LongBits(t.fromUid.low>>>0,t.fromUid.high>>>0).toNumber())),null!=t.toUid&&(g.Long?(n.toUid=g.Long.fromValue(t.toUid)).unsigned=!1:"string"==typeof t.toUid?n.toUid=parseInt(t.toUid,10):"number"==typeof t.toUid?n.toUid=t.toUid:"object"===o(t.toUid)&&(n.toUid=new g.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber())),null!=t.msgId&&(g.Long?(n.msgId=g.Long.fromValue(t.msgId)).unsigned=!1:"string"==typeof t.msgId?n.msgId=parseInt(t.msgId,10):"number"==typeof t.msgId?n.msgId=t.msgId:"object"===o(t.msgId)&&(n.msgId=new g.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber())),null!=t.msgTime&&(g.Long?(n.msgTime=g.Long.fromValue(t.msgTime)).unsigned=!1:"string"==typeof t.msgTime?n.msgTime=parseInt(t.msgTime,10):"number"==typeof t.msgTime?n.msgTime=t.msgTime:"object"===o(t.msgTime)&&(n.msgTime=new g.LongBits(t.msgTime.low>>>0,t.msgTime.high>>>0).toNumber())),null!=t.sput&&(g.Long?(n.sput=g.Long.fromValue(t.sput)).unsigned=!1:"string"==typeof t.sput?n.sput=parseInt(t.sput,10):"number"==typeof t.sput?n.sput=t.sput:"object"===o(t.sput)&&(n.sput=new g.LongBits(t.sput.low>>>0,t.sput.high>>>0).toNumber())),null!=t.newMsg&&(n.newMsg=Boolean(t.newMsg)),null!=t.type&&(g.Long?(n.type=g.Long.fromValue(t.type)).unsigned=!1:"string"==typeof t.type?n.type=parseInt(t.type,10):"number"==typeof t.type?n.type=t.type:"object"===o(t.type)&&(n.type=new g.LongBits(t.type.low>>>0,t.type.high>>>0).toNumber())),null!=t.title&&(n.title=String(t.title)),null!=t.body&&(n.body=String(t.body)),null!=t.thumb&&(n.thumb=String(t.thumb)),null!=t.width&&(g.Long?(n.width=g.Long.fromValue(t.width)).unsigned=!1:"string"==typeof t.width?n.width=parseInt(t.width,10):"number"==typeof t.width?n.width=t.width:"object"===o(t.width)&&(n.width=new g.LongBits(t.width.low>>>0,t.width.high>>>0).toNumber())),null!=t.height&&(g.Long?(n.height=g.Long.fromValue(t.height)).unsigned=!1:"string"==typeof t.height?n.height=parseInt(t.height,10):"number"==typeof t.height?n.height=t.height:"object"===o(t.height)&&(n.height=new g.LongBits(t.height.low>>>0,t.height.high>>>0).toNumber())),null!=t.duration&&(g.Long?(n.duration=g.Long.fromValue(t.duration)).unsigned=!1:"string"==typeof t.duration?n.duration=parseInt(t.duration,10):"number"==typeof t.duration?n.duration=t.duration:"object"===o(t.duration)&&(n.duration=new g.LongBits(t.duration.low>>>0,t.duration.high>>>0).toNumber())),null!=t.lat&&(n.lat=Number(t.lat)),null!=t.lng&&(n.lng=Number(t.lng)),null!=t.zoom&&(g.Long?(n.zoom=g.Long.fromValue(t.zoom)).unsigned=!1:"string"==typeof t.zoom?n.zoom=parseInt(t.zoom,10):"number"==typeof t.zoom?n.zoom=t.zoom:"object"===o(t.zoom)&&(n.zoom=new g.LongBits(t.zoom.low>>>0,t.zoom.high>>>0).toNumber())),null!=t.pushTitle&&(n.pushTitle=String(t.pushTitle)),null!=t.pushBody&&(n.pushBody=String(t.pushBody)),null!=t.pushSound&&(n.pushSound=String(t.pushSound)),n},t.toObject=function(t,n){n||(n={});var e={};if(n.defaults){if(g.Long){var o=new g.Long(0,0,!1);e.sign=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sign=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.fromUid=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.fromUid=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.toUid=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.toUid=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.msgId=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.msgId=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.msgTime=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.msgTime=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.sput=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sput=n.longs===String?"0":0;if(e.newMsg=!1,g.Long){o=new g.Long(0,0,!1);e.type=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.type=n.longs===String?"0":0;if(e.title="",e.body="",e.thumb="",g.Long){o=new g.Long(0,0,!1);e.width=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.width=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.height=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.height=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.duration=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.duration=n.longs===String?"0":0;if(e.lat=0,e.lng=0,g.Long){o=new g.Long(0,0,!1);e.zoom=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.zoom=n.longs===String?"0":0;e.pushTitle="",e.pushBody="",e.pushSound=""}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?e.sign=n.longs===String?String(t.sign):t.sign:e.sign=n.longs===String?g.Long.prototype.toString.call(t.sign):n.longs===Number?new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.fromUid&&t.hasOwnProperty("fromUid")&&("number"==typeof t.fromUid?e.fromUid=n.longs===String?String(t.fromUid):t.fromUid:e.fromUid=n.longs===String?g.Long.prototype.toString.call(t.fromUid):n.longs===Number?new g.LongBits(t.fromUid.low>>>0,t.fromUid.high>>>0).toNumber():t.fromUid),null!=t.toUid&&t.hasOwnProperty("toUid")&&("number"==typeof t.toUid?e.toUid=n.longs===String?String(t.toUid):t.toUid:e.toUid=n.longs===String?g.Long.prototype.toString.call(t.toUid):n.longs===Number?new g.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber():t.toUid),null!=t.msgId&&t.hasOwnProperty("msgId")&&("number"==typeof t.msgId?e.msgId=n.longs===String?String(t.msgId):t.msgId:e.msgId=n.longs===String?g.Long.prototype.toString.call(t.msgId):n.longs===Number?new g.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber():t.msgId),null!=t.msgTime&&t.hasOwnProperty("msgTime")&&("number"==typeof t.msgTime?e.msgTime=n.longs===String?String(t.msgTime):t.msgTime:e.msgTime=n.longs===String?g.Long.prototype.toString.call(t.msgTime):n.longs===Number?new g.LongBits(t.msgTime.low>>>0,t.msgTime.high>>>0).toNumber():t.msgTime),null!=t.sput&&t.hasOwnProperty("sput")&&("number"==typeof t.sput?e.sput=n.longs===String?String(t.sput):t.sput:e.sput=n.longs===String?g.Long.prototype.toString.call(t.sput):n.longs===Number?new g.LongBits(t.sput.low>>>0,t.sput.high>>>0).toNumber():t.sput),null!=t.newMsg&&t.hasOwnProperty("newMsg")&&(e.newMsg=t.newMsg),null!=t.type&&t.hasOwnProperty("type")&&("number"==typeof t.type?e.type=n.longs===String?String(t.type):t.type:e.type=n.longs===String?g.Long.prototype.toString.call(t.type):n.longs===Number?new g.LongBits(t.type.low>>>0,t.type.high>>>0).toNumber():t.type),null!=t.title&&t.hasOwnProperty("title")&&(e.title=t.title),null!=t.body&&t.hasOwnProperty("body")&&(e.body=t.body),null!=t.thumb&&t.hasOwnProperty("thumb")&&(e.thumb=t.thumb),null!=t.width&&t.hasOwnProperty("width")&&("number"==typeof t.width?e.width=n.longs===String?String(t.width):t.width:e.width=n.longs===String?g.Long.prototype.toString.call(t.width):n.longs===Number?new g.LongBits(t.width.low>>>0,t.width.high>>>0).toNumber():t.width),null!=t.height&&t.hasOwnProperty("height")&&("number"==typeof t.height?e.height=n.longs===String?String(t.height):t.height:e.height=n.longs===String?g.Long.prototype.toString.call(t.height):n.longs===Number?new g.LongBits(t.height.low>>>0,t.height.high>>>0).toNumber():t.height),null!=t.duration&&t.hasOwnProperty("duration")&&("number"==typeof t.duration?e.duration=n.longs===String?String(t.duration):t.duration:e.duration=n.longs===String?g.Long.prototype.toString.call(t.duration):n.longs===Number?new g.LongBits(t.duration.low>>>0,t.duration.high>>>0).toNumber():t.duration),null!=t.lat&&t.hasOwnProperty("lat")&&(e.lat=n.json&&!isFinite(t.lat)?String(t.lat):t.lat),null!=t.lng&&t.hasOwnProperty("lng")&&(e.lng=n.json&&!isFinite(t.lng)?String(t.lng):t.lng),null!=t.zoom&&t.hasOwnProperty("zoom")&&("number"==typeof t.zoom?e.zoom=n.longs===String?String(t.zoom):t.zoom:e.zoom=n.longs===String?g.Long.prototype.toString.call(t.zoom):n.longs===Number?new g.LongBits(t.zoom.low>>>0,t.zoom.high>>>0).toNumber():t.zoom),null!=t.pushTitle&&t.hasOwnProperty("pushTitle")&&(e.pushTitle=t.pushTitle),null!=t.pushBody&&t.hasOwnProperty("pushBody")&&(e.pushBody=t.pushBody),null!=t.pushSound&&t.hasOwnProperty("pushSound")&&(e.pushSound=t.pushSound),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.ChatRBatch=function(){function t(t){if(this.msgs=[],t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.sign=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.msgs=g.emptyArray,t.encode=function(t,n){if(n||(n=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&n.uint32(8).int64(t.sign),null!=t.msgs&&t.msgs.length)for(var e=0;e<t.msgs.length;++e)a.ChatR.encode(t.msgs[e],n.uint32(18).fork()).ldelim();return n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.ChatRBatch;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.msgs&&o.msgs.length||(o.msgs=[]),o.msgs.push(a.ChatR.decode(t,t.uint32()));break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.ChatRBatch)return t;var n=new a.ChatRBatch;if(null!=t.sign&&(g.Long?(n.sign=g.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?n.sign=parseInt(t.sign,10):"number"==typeof t.sign?n.sign=t.sign:"object"===o(t.sign)&&(n.sign=new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),t.msgs){if(!Array.isArray(t.msgs))throw TypeError(".ChatRBatch.msgs: array expected");n.msgs=[];for(var e=0;e<t.msgs.length;++e){if("object"!==o(t.msgs[e]))throw TypeError(".ChatRBatch.msgs: object expected");n.msgs[e]=a.ChatR.fromObject(t.msgs[e])}}return n},t.toObject=function(t,n){n||(n={});var e={};if((n.arrays||n.defaults)&&(e.msgs=[]),n.defaults)if(g.Long){var o=new g.Long(0,0,!1);e.sign=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sign=n.longs===String?"0":0;if(null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?e.sign=n.longs===String?String(t.sign):t.sign:e.sign=n.longs===String?g.Long.prototype.toString.call(t.sign):n.longs===Number?new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),t.msgs&&t.msgs.length){e.msgs=[];for(var i=0;i<t.msgs.length;++i)e.msgs[i]=a.ChatR.toObject(t.msgs[i],n)}return e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.GetHistory=function(){function t(t){if(t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.sign=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.toUid=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.msgEnd=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.msgStart=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.offset=g.Long?g.Long.fromBits(0,0,!1):0,t.encode=function(t,n){return n||(n=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&n.uint32(8).int64(t.sign),null!=t.toUid&&Object.hasOwnProperty.call(t,"toUid")&&n.uint32(16).int64(t.toUid),null!=t.msgEnd&&Object.hasOwnProperty.call(t,"msgEnd")&&n.uint32(24).int64(t.msgEnd),null!=t.msgStart&&Object.hasOwnProperty.call(t,"msgStart")&&n.uint32(32).int64(t.msgStart),null!=t.offset&&Object.hasOwnProperty.call(t,"offset")&&n.uint32(40).int64(t.offset),n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.GetHistory;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.toUid=t.int64();break;case 3:o.msgEnd=t.int64();break;case 4:o.msgStart=t.int64();break;case 5:o.offset=t.int64();break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.GetHistory)return t;var n=new a.GetHistory;return null!=t.sign&&(g.Long?(n.sign=g.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?n.sign=parseInt(t.sign,10):"number"==typeof t.sign?n.sign=t.sign:"object"===o(t.sign)&&(n.sign=new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.toUid&&(g.Long?(n.toUid=g.Long.fromValue(t.toUid)).unsigned=!1:"string"==typeof t.toUid?n.toUid=parseInt(t.toUid,10):"number"==typeof t.toUid?n.toUid=t.toUid:"object"===o(t.toUid)&&(n.toUid=new g.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber())),null!=t.msgEnd&&(g.Long?(n.msgEnd=g.Long.fromValue(t.msgEnd)).unsigned=!1:"string"==typeof t.msgEnd?n.msgEnd=parseInt(t.msgEnd,10):"number"==typeof t.msgEnd?n.msgEnd=t.msgEnd:"object"===o(t.msgEnd)&&(n.msgEnd=new g.LongBits(t.msgEnd.low>>>0,t.msgEnd.high>>>0).toNumber())),null!=t.msgStart&&(g.Long?(n.msgStart=g.Long.fromValue(t.msgStart)).unsigned=!1:"string"==typeof t.msgStart?n.msgStart=parseInt(t.msgStart,10):"number"==typeof t.msgStart?n.msgStart=t.msgStart:"object"===o(t.msgStart)&&(n.msgStart=new g.LongBits(t.msgStart.low>>>0,t.msgStart.high>>>0).toNumber())),null!=t.offset&&(g.Long?(n.offset=g.Long.fromValue(t.offset)).unsigned=!1:"string"==typeof t.offset?n.offset=parseInt(t.offset,10):"number"==typeof t.offset?n.offset=t.offset:"object"===o(t.offset)&&(n.offset=new g.LongBits(t.offset.low>>>0,t.offset.high>>>0).toNumber())),n},t.toObject=function(t,n){n||(n={});var e={};if(n.defaults){if(g.Long){var o=new g.Long(0,0,!1);e.sign=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sign=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.toUid=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.toUid=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.msgEnd=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.msgEnd=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.msgStart=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.msgStart=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.offset=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.offset=n.longs===String?"0":0}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?e.sign=n.longs===String?String(t.sign):t.sign:e.sign=n.longs===String?g.Long.prototype.toString.call(t.sign):n.longs===Number?new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.toUid&&t.hasOwnProperty("toUid")&&("number"==typeof t.toUid?e.toUid=n.longs===String?String(t.toUid):t.toUid:e.toUid=n.longs===String?g.Long.prototype.toString.call(t.toUid):n.longs===Number?new g.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber():t.toUid),null!=t.msgEnd&&t.hasOwnProperty("msgEnd")&&("number"==typeof t.msgEnd?e.msgEnd=n.longs===String?String(t.msgEnd):t.msgEnd:e.msgEnd=n.longs===String?g.Long.prototype.toString.call(t.msgEnd):n.longs===Number?new g.LongBits(t.msgEnd.low>>>0,t.msgEnd.high>>>0).toNumber():t.msgEnd),null!=t.msgStart&&t.hasOwnProperty("msgStart")&&("number"==typeof t.msgStart?e.msgStart=n.longs===String?String(t.msgStart):t.msgStart:e.msgStart=n.longs===String?g.Long.prototype.toString.call(t.msgStart):n.longs===Number?new g.LongBits(t.msgStart.low>>>0,t.msgStart.high>>>0).toNumber():t.msgStart),null!=t.offset&&t.hasOwnProperty("offset")&&("number"==typeof t.offset?e.offset=n.longs===String?String(t.offset):t.offset:e.offset=n.longs===String?g.Long.prototype.toString.call(t.offset):n.longs===Number?new g.LongBits(t.offset.low>>>0,t.offset.high>>>0).toNumber():t.offset),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.Revoke=function(){function t(t){if(t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.sign=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.toUid=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.msgId=g.Long?g.Long.fromBits(0,0,!1):0,t.encode=function(t,n){return n||(n=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&n.uint32(8).int64(t.sign),null!=t.toUid&&Object.hasOwnProperty.call(t,"toUid")&&n.uint32(16).int64(t.toUid),null!=t.msgId&&Object.hasOwnProperty.call(t,"msgId")&&n.uint32(24).int64(t.msgId),n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.Revoke;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.toUid=t.int64();break;case 3:o.msgId=t.int64();break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.Revoke)return t;var n=new a.Revoke;return null!=t.sign&&(g.Long?(n.sign=g.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?n.sign=parseInt(t.sign,10):"number"==typeof t.sign?n.sign=t.sign:"object"===o(t.sign)&&(n.sign=new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.toUid&&(g.Long?(n.toUid=g.Long.fromValue(t.toUid)).unsigned=!1:"string"==typeof t.toUid?n.toUid=parseInt(t.toUid,10):"number"==typeof t.toUid?n.toUid=t.toUid:"object"===o(t.toUid)&&(n.toUid=new g.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber())),null!=t.msgId&&(g.Long?(n.msgId=g.Long.fromValue(t.msgId)).unsigned=!1:"string"==typeof t.msgId?n.msgId=parseInt(t.msgId,10):"number"==typeof t.msgId?n.msgId=t.msgId:"object"===o(t.msgId)&&(n.msgId=new g.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber())),n},t.toObject=function(t,n){n||(n={});var e={};if(n.defaults){if(g.Long){var o=new g.Long(0,0,!1);e.sign=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sign=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.toUid=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.toUid=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.msgId=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.msgId=n.longs===String?"0":0}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?e.sign=n.longs===String?String(t.sign):t.sign:e.sign=n.longs===String?g.Long.prototype.toString.call(t.sign):n.longs===Number?new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.toUid&&t.hasOwnProperty("toUid")&&("number"==typeof t.toUid?e.toUid=n.longs===String?String(t.toUid):t.toUid:e.toUid=n.longs===String?g.Long.prototype.toString.call(t.toUid):n.longs===Number?new g.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber():t.toUid),null!=t.msgId&&t.hasOwnProperty("msgId")&&("number"==typeof t.msgId?e.msgId=n.longs===String?String(t.msgId):t.msgId:e.msgId=n.longs===String?g.Long.prototype.toString.call(t.msgId):n.longs===Number?new g.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber():t.msgId),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.MsgRead=function(){function t(t){if(t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.sign=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.toUid=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.msgId=g.Long?g.Long.fromBits(0,0,!1):0,t.encode=function(t,n){return n||(n=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&n.uint32(8).int64(t.sign),null!=t.toUid&&Object.hasOwnProperty.call(t,"toUid")&&n.uint32(16).int64(t.toUid),null!=t.msgId&&Object.hasOwnProperty.call(t,"msgId")&&n.uint32(24).int64(t.msgId),n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.MsgRead;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.toUid=t.int64();break;case 3:o.msgId=t.int64();break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.MsgRead)return t;var n=new a.MsgRead;return null!=t.sign&&(g.Long?(n.sign=g.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?n.sign=parseInt(t.sign,10):"number"==typeof t.sign?n.sign=t.sign:"object"===o(t.sign)&&(n.sign=new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.toUid&&(g.Long?(n.toUid=g.Long.fromValue(t.toUid)).unsigned=!1:"string"==typeof t.toUid?n.toUid=parseInt(t.toUid,10):"number"==typeof t.toUid?n.toUid=t.toUid:"object"===o(t.toUid)&&(n.toUid=new g.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber())),null!=t.msgId&&(g.Long?(n.msgId=g.Long.fromValue(t.msgId)).unsigned=!1:"string"==typeof t.msgId?n.msgId=parseInt(t.msgId,10):"number"==typeof t.msgId?n.msgId=t.msgId:"object"===o(t.msgId)&&(n.msgId=new g.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber())),n},t.toObject=function(t,n){n||(n={});var e={};if(n.defaults){if(g.Long){var o=new g.Long(0,0,!1);e.sign=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sign=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.toUid=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.toUid=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.msgId=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.msgId=n.longs===String?"0":0}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?e.sign=n.longs===String?String(t.sign):t.sign:e.sign=n.longs===String?g.Long.prototype.toString.call(t.sign):n.longs===Number?new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.toUid&&t.hasOwnProperty("toUid")&&("number"==typeof t.toUid?e.toUid=n.longs===String?String(t.toUid):t.toUid:e.toUid=n.longs===String?g.Long.prototype.toString.call(t.toUid):n.longs===Number?new g.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber():t.toUid),null!=t.msgId&&t.hasOwnProperty("msgId")&&("number"==typeof t.msgId?e.msgId=n.longs===String?String(t.msgId):t.msgId:e.msgId=n.longs===String?g.Long.prototype.toString.call(t.msgId):n.longs===Number?new g.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber():t.msgId),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.DelChat=function(){function t(t){if(t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.sign=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.toUid=g.Long?g.Long.fromBits(0,0,!1):0,t.encode=function(t,n){return n||(n=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&n.uint32(8).int64(t.sign),null!=t.toUid&&Object.hasOwnProperty.call(t,"toUid")&&n.uint32(16).int64(t.toUid),n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.DelChat;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.toUid=t.int64();break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.DelChat)return t;var n=new a.DelChat;return null!=t.sign&&(g.Long?(n.sign=g.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?n.sign=parseInt(t.sign,10):"number"==typeof t.sign?n.sign=t.sign:"object"===o(t.sign)&&(n.sign=new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.toUid&&(g.Long?(n.toUid=g.Long.fromValue(t.toUid)).unsigned=!1:"string"==typeof t.toUid?n.toUid=parseInt(t.toUid,10):"number"==typeof t.toUid?n.toUid=t.toUid:"object"===o(t.toUid)&&(n.toUid=new g.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber())),n},t.toObject=function(t,n){n||(n={});var e={};if(n.defaults){if(g.Long){var o=new g.Long(0,0,!1);e.sign=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sign=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.toUid=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.toUid=n.longs===String?"0":0}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?e.sign=n.longs===String?String(t.sign):t.sign:e.sign=n.longs===String?g.Long.prototype.toString.call(t.sign):n.longs===Number?new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.toUid&&t.hasOwnProperty("toUid")&&("number"==typeof t.toUid?e.toUid=n.longs===String?String(t.toUid):t.toUid:e.toUid=n.longs===String?g.Long.prototype.toString.call(t.toUid):n.longs===Number?new g.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber():t.toUid),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.GetChatList=function(){function t(t){if(t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.sign=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.updateTime=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.uid=g.Long?g.Long.fromBits(0,0,!1):0,t.encode=function(t,n){return n||(n=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&n.uint32(8).int64(t.sign),null!=t.updateTime&&Object.hasOwnProperty.call(t,"updateTime")&&n.uint32(16).int64(t.updateTime),null!=t.uid&&Object.hasOwnProperty.call(t,"uid")&&n.uint32(24).int64(t.uid),n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.GetChatList;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.updateTime=t.int64();break;case 3:o.uid=t.int64();break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.GetChatList)return t;var n=new a.GetChatList;return null!=t.sign&&(g.Long?(n.sign=g.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?n.sign=parseInt(t.sign,10):"number"==typeof t.sign?n.sign=t.sign:"object"===o(t.sign)&&(n.sign=new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.updateTime&&(g.Long?(n.updateTime=g.Long.fromValue(t.updateTime)).unsigned=!1:"string"==typeof t.updateTime?n.updateTime=parseInt(t.updateTime,10):"number"==typeof t.updateTime?n.updateTime=t.updateTime:"object"===o(t.updateTime)&&(n.updateTime=new g.LongBits(t.updateTime.low>>>0,t.updateTime.high>>>0).toNumber())),null!=t.uid&&(g.Long?(n.uid=g.Long.fromValue(t.uid)).unsigned=!1:"string"==typeof t.uid?n.uid=parseInt(t.uid,10):"number"==typeof t.uid?n.uid=t.uid:"object"===o(t.uid)&&(n.uid=new g.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber())),n},t.toObject=function(t,n){n||(n={});var e={};if(n.defaults){if(g.Long){var o=new g.Long(0,0,!1);e.sign=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sign=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.updateTime=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.updateTime=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.uid=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.uid=n.longs===String?"0":0}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?e.sign=n.longs===String?String(t.sign):t.sign:e.sign=n.longs===String?g.Long.prototype.toString.call(t.sign):n.longs===Number?new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.updateTime&&t.hasOwnProperty("updateTime")&&("number"==typeof t.updateTime?e.updateTime=n.longs===String?String(t.updateTime):t.updateTime:e.updateTime=n.longs===String?g.Long.prototype.toString.call(t.updateTime):n.longs===Number?new g.LongBits(t.updateTime.low>>>0,t.updateTime.high>>>0).toNumber():t.updateTime),null!=t.uid&&t.hasOwnProperty("uid")&&("number"==typeof t.uid?e.uid=n.longs===String?String(t.uid):t.uid:e.uid=n.longs===String?g.Long.prototype.toString.call(t.uid):n.longs===Number?new g.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber():t.uid),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.ChatItem=function(){function t(t){if(t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.sign=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.uid=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.msgEnd=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.msgLastRead=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.showMsgId=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.showMsgType=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.showMsg="",t.prototype.showMsgTime=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.unread=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.matched=!1,t.prototype.newMsg=!1,t.prototype.myMove=!1,t.prototype.iceBreak=!1,t.prototype.tipFree=!1,t.prototype.topAlbum=!1,t.prototype.iBlockU=!1,t.prototype.iChatU=!1,t.prototype.uChatI=!1,t.prototype.deleted=!1,t.encode=function(t,n){return n||(n=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&n.uint32(8).int64(t.sign),null!=t.uid&&Object.hasOwnProperty.call(t,"uid")&&n.uint32(16).int64(t.uid),null!=t.msgEnd&&Object.hasOwnProperty.call(t,"msgEnd")&&n.uint32(24).int64(t.msgEnd),null!=t.msgLastRead&&Object.hasOwnProperty.call(t,"msgLastRead")&&n.uint32(32).int64(t.msgLastRead),null!=t.showMsgId&&Object.hasOwnProperty.call(t,"showMsgId")&&n.uint32(40).int64(t.showMsgId),null!=t.showMsgType&&Object.hasOwnProperty.call(t,"showMsgType")&&n.uint32(48).int64(t.showMsgType),null!=t.showMsg&&Object.hasOwnProperty.call(t,"showMsg")&&n.uint32(58).string(t.showMsg),null!=t.showMsgTime&&Object.hasOwnProperty.call(t,"showMsgTime")&&n.uint32(64).int64(t.showMsgTime),null!=t.unread&&Object.hasOwnProperty.call(t,"unread")&&n.uint32(72).int64(t.unread),null!=t.matched&&Object.hasOwnProperty.call(t,"matched")&&n.uint32(80).bool(t.matched),null!=t.newMsg&&Object.hasOwnProperty.call(t,"newMsg")&&n.uint32(88).bool(t.newMsg),null!=t.myMove&&Object.hasOwnProperty.call(t,"myMove")&&n.uint32(96).bool(t.myMove),null!=t.iceBreak&&Object.hasOwnProperty.call(t,"iceBreak")&&n.uint32(104).bool(t.iceBreak),null!=t.tipFree&&Object.hasOwnProperty.call(t,"tipFree")&&n.uint32(112).bool(t.tipFree),null!=t.topAlbum&&Object.hasOwnProperty.call(t,"topAlbum")&&n.uint32(120).bool(t.topAlbum),null!=t.iBlockU&&Object.hasOwnProperty.call(t,"iBlockU")&&n.uint32(128).bool(t.iBlockU),null!=t.iChatU&&Object.hasOwnProperty.call(t,"iChatU")&&n.uint32(136).bool(t.iChatU),null!=t.uChatI&&Object.hasOwnProperty.call(t,"uChatI")&&n.uint32(144).bool(t.uChatI),null!=t.deleted&&Object.hasOwnProperty.call(t,"deleted")&&n.uint32(152).bool(t.deleted),n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.ChatItem;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.uid=t.int64();break;case 3:o.msgEnd=t.int64();break;case 4:o.msgLastRead=t.int64();break;case 5:o.showMsgId=t.int64();break;case 6:o.showMsgType=t.int64();break;case 7:o.showMsg=t.string();break;case 8:o.showMsgTime=t.int64();break;case 9:o.unread=t.int64();break;case 10:o.matched=t.bool();break;case 11:o.newMsg=t.bool();break;case 12:o.myMove=t.bool();break;case 13:o.iceBreak=t.bool();break;case 14:o.tipFree=t.bool();break;case 15:o.topAlbum=t.bool();break;case 16:o.iBlockU=t.bool();break;case 17:o.iChatU=t.bool();break;case 18:o.uChatI=t.bool();break;case 19:o.deleted=t.bool();break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.ChatItem)return t;var n=new a.ChatItem;return null!=t.sign&&(g.Long?(n.sign=g.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?n.sign=parseInt(t.sign,10):"number"==typeof t.sign?n.sign=t.sign:"object"===o(t.sign)&&(n.sign=new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.uid&&(g.Long?(n.uid=g.Long.fromValue(t.uid)).unsigned=!1:"string"==typeof t.uid?n.uid=parseInt(t.uid,10):"number"==typeof t.uid?n.uid=t.uid:"object"===o(t.uid)&&(n.uid=new g.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber())),null!=t.msgEnd&&(g.Long?(n.msgEnd=g.Long.fromValue(t.msgEnd)).unsigned=!1:"string"==typeof t.msgEnd?n.msgEnd=parseInt(t.msgEnd,10):"number"==typeof t.msgEnd?n.msgEnd=t.msgEnd:"object"===o(t.msgEnd)&&(n.msgEnd=new g.LongBits(t.msgEnd.low>>>0,t.msgEnd.high>>>0).toNumber())),null!=t.msgLastRead&&(g.Long?(n.msgLastRead=g.Long.fromValue(t.msgLastRead)).unsigned=!1:"string"==typeof t.msgLastRead?n.msgLastRead=parseInt(t.msgLastRead,10):"number"==typeof t.msgLastRead?n.msgLastRead=t.msgLastRead:"object"===o(t.msgLastRead)&&(n.msgLastRead=new g.LongBits(t.msgLastRead.low>>>0,t.msgLastRead.high>>>0).toNumber())),null!=t.showMsgId&&(g.Long?(n.showMsgId=g.Long.fromValue(t.showMsgId)).unsigned=!1:"string"==typeof t.showMsgId?n.showMsgId=parseInt(t.showMsgId,10):"number"==typeof t.showMsgId?n.showMsgId=t.showMsgId:"object"===o(t.showMsgId)&&(n.showMsgId=new g.LongBits(t.showMsgId.low>>>0,t.showMsgId.high>>>0).toNumber())),null!=t.showMsgType&&(g.Long?(n.showMsgType=g.Long.fromValue(t.showMsgType)).unsigned=!1:"string"==typeof t.showMsgType?n.showMsgType=parseInt(t.showMsgType,10):"number"==typeof t.showMsgType?n.showMsgType=t.showMsgType:"object"===o(t.showMsgType)&&(n.showMsgType=new g.LongBits(t.showMsgType.low>>>0,t.showMsgType.high>>>0).toNumber())),null!=t.showMsg&&(n.showMsg=String(t.showMsg)),null!=t.showMsgTime&&(g.Long?(n.showMsgTime=g.Long.fromValue(t.showMsgTime)).unsigned=!1:"string"==typeof t.showMsgTime?n.showMsgTime=parseInt(t.showMsgTime,10):"number"==typeof t.showMsgTime?n.showMsgTime=t.showMsgTime:"object"===o(t.showMsgTime)&&(n.showMsgTime=new g.LongBits(t.showMsgTime.low>>>0,t.showMsgTime.high>>>0).toNumber())),null!=t.unread&&(g.Long?(n.unread=g.Long.fromValue(t.unread)).unsigned=!1:"string"==typeof t.unread?n.unread=parseInt(t.unread,10):"number"==typeof t.unread?n.unread=t.unread:"object"===o(t.unread)&&(n.unread=new g.LongBits(t.unread.low>>>0,t.unread.high>>>0).toNumber())),null!=t.matched&&(n.matched=Boolean(t.matched)),null!=t.newMsg&&(n.newMsg=Boolean(t.newMsg)),null!=t.myMove&&(n.myMove=Boolean(t.myMove)),null!=t.iceBreak&&(n.iceBreak=Boolean(t.iceBreak)),null!=t.tipFree&&(n.tipFree=Boolean(t.tipFree)),null!=t.topAlbum&&(n.topAlbum=Boolean(t.topAlbum)),null!=t.iBlockU&&(n.iBlockU=Boolean(t.iBlockU)),null!=t.iChatU&&(n.iChatU=Boolean(t.iChatU)),null!=t.uChatI&&(n.uChatI=Boolean(t.uChatI)),null!=t.deleted&&(n.deleted=Boolean(t.deleted)),n},t.toObject=function(t,n){n||(n={});var e={};if(n.defaults){if(g.Long){var o=new g.Long(0,0,!1);e.sign=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sign=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.uid=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.uid=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.msgEnd=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.msgEnd=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.msgLastRead=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.msgLastRead=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.showMsgId=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.showMsgId=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.showMsgType=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.showMsgType=n.longs===String?"0":0;if(e.showMsg="",g.Long){o=new g.Long(0,0,!1);e.showMsgTime=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.showMsgTime=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.unread=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.unread=n.longs===String?"0":0;e.matched=!1,e.newMsg=!1,e.myMove=!1,e.iceBreak=!1,e.tipFree=!1,e.topAlbum=!1,e.iBlockU=!1,e.iChatU=!1,e.uChatI=!1,e.deleted=!1}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?e.sign=n.longs===String?String(t.sign):t.sign:e.sign=n.longs===String?g.Long.prototype.toString.call(t.sign):n.longs===Number?new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.uid&&t.hasOwnProperty("uid")&&("number"==typeof t.uid?e.uid=n.longs===String?String(t.uid):t.uid:e.uid=n.longs===String?g.Long.prototype.toString.call(t.uid):n.longs===Number?new g.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber():t.uid),null!=t.msgEnd&&t.hasOwnProperty("msgEnd")&&("number"==typeof t.msgEnd?e.msgEnd=n.longs===String?String(t.msgEnd):t.msgEnd:e.msgEnd=n.longs===String?g.Long.prototype.toString.call(t.msgEnd):n.longs===Number?new g.LongBits(t.msgEnd.low>>>0,t.msgEnd.high>>>0).toNumber():t.msgEnd),null!=t.msgLastRead&&t.hasOwnProperty("msgLastRead")&&("number"==typeof t.msgLastRead?e.msgLastRead=n.longs===String?String(t.msgLastRead):t.msgLastRead:e.msgLastRead=n.longs===String?g.Long.prototype.toString.call(t.msgLastRead):n.longs===Number?new g.LongBits(t.msgLastRead.low>>>0,t.msgLastRead.high>>>0).toNumber():t.msgLastRead),null!=t.showMsgId&&t.hasOwnProperty("showMsgId")&&("number"==typeof t.showMsgId?e.showMsgId=n.longs===String?String(t.showMsgId):t.showMsgId:e.showMsgId=n.longs===String?g.Long.prototype.toString.call(t.showMsgId):n.longs===Number?new g.LongBits(t.showMsgId.low>>>0,t.showMsgId.high>>>0).toNumber():t.showMsgId),null!=t.showMsgType&&t.hasOwnProperty("showMsgType")&&("number"==typeof t.showMsgType?e.showMsgType=n.longs===String?String(t.showMsgType):t.showMsgType:e.showMsgType=n.longs===String?g.Long.prototype.toString.call(t.showMsgType):n.longs===Number?new g.LongBits(t.showMsgType.low>>>0,t.showMsgType.high>>>0).toNumber():t.showMsgType),null!=t.showMsg&&t.hasOwnProperty("showMsg")&&(e.showMsg=t.showMsg),null!=t.showMsgTime&&t.hasOwnProperty("showMsgTime")&&("number"==typeof t.showMsgTime?e.showMsgTime=n.longs===String?String(t.showMsgTime):t.showMsgTime:e.showMsgTime=n.longs===String?g.Long.prototype.toString.call(t.showMsgTime):n.longs===Number?new g.LongBits(t.showMsgTime.low>>>0,t.showMsgTime.high>>>0).toNumber():t.showMsgTime),null!=t.unread&&t.hasOwnProperty("unread")&&("number"==typeof t.unread?e.unread=n.longs===String?String(t.unread):t.unread:e.unread=n.longs===String?g.Long.prototype.toString.call(t.unread):n.longs===Number?new g.LongBits(t.unread.low>>>0,t.unread.high>>>0).toNumber():t.unread),null!=t.matched&&t.hasOwnProperty("matched")&&(e.matched=t.matched),null!=t.newMsg&&t.hasOwnProperty("newMsg")&&(e.newMsg=t.newMsg),null!=t.myMove&&t.hasOwnProperty("myMove")&&(e.myMove=t.myMove),null!=t.iceBreak&&t.hasOwnProperty("iceBreak")&&(e.iceBreak=t.iceBreak),null!=t.tipFree&&t.hasOwnProperty("tipFree")&&(e.tipFree=t.tipFree),null!=t.topAlbum&&t.hasOwnProperty("topAlbum")&&(e.topAlbum=t.topAlbum),null!=t.iBlockU&&t.hasOwnProperty("iBlockU")&&(e.iBlockU=t.iBlockU),null!=t.iChatU&&t.hasOwnProperty("iChatU")&&(e.iChatU=t.iChatU),null!=t.uChatI&&t.hasOwnProperty("uChatI")&&(e.uChatI=t.uChatI),null!=t.deleted&&t.hasOwnProperty("deleted")&&(e.deleted=t.deleted),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.ChatItemUpdate=function(){function t(t){if(t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.sign=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.uid=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.event=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.updateTime=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.msgLastRead=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.unread=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.iBlockU=!1,t.prototype.deleted=!1,t.encode=function(t,n){return n||(n=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&n.uint32(8).int64(t.sign),null!=t.uid&&Object.hasOwnProperty.call(t,"uid")&&n.uint32(16).int64(t.uid),null!=t.event&&Object.hasOwnProperty.call(t,"event")&&n.uint32(24).int64(t.event),null!=t.updateTime&&Object.hasOwnProperty.call(t,"updateTime")&&n.uint32(32).int64(t.updateTime),null!=t.msgLastRead&&Object.hasOwnProperty.call(t,"msgLastRead")&&n.uint32(40).int64(t.msgLastRead),null!=t.unread&&Object.hasOwnProperty.call(t,"unread")&&n.uint32(48).int64(t.unread),null!=t.iBlockU&&Object.hasOwnProperty.call(t,"iBlockU")&&n.uint32(56).bool(t.iBlockU),null!=t.deleted&&Object.hasOwnProperty.call(t,"deleted")&&n.uint32(64).bool(t.deleted),n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.ChatItemUpdate;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.uid=t.int64();break;case 3:o.event=t.int64();break;case 4:o.updateTime=t.int64();break;case 5:o.msgLastRead=t.int64();break;case 6:o.unread=t.int64();break;case 7:o.iBlockU=t.bool();break;case 8:o.deleted=t.bool();break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.ChatItemUpdate)return t;var n=new a.ChatItemUpdate;return null!=t.sign&&(g.Long?(n.sign=g.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?n.sign=parseInt(t.sign,10):"number"==typeof t.sign?n.sign=t.sign:"object"===o(t.sign)&&(n.sign=new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.uid&&(g.Long?(n.uid=g.Long.fromValue(t.uid)).unsigned=!1:"string"==typeof t.uid?n.uid=parseInt(t.uid,10):"number"==typeof t.uid?n.uid=t.uid:"object"===o(t.uid)&&(n.uid=new g.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber())),null!=t.event&&(g.Long?(n.event=g.Long.fromValue(t.event)).unsigned=!1:"string"==typeof t.event?n.event=parseInt(t.event,10):"number"==typeof t.event?n.event=t.event:"object"===o(t.event)&&(n.event=new g.LongBits(t.event.low>>>0,t.event.high>>>0).toNumber())),null!=t.updateTime&&(g.Long?(n.updateTime=g.Long.fromValue(t.updateTime)).unsigned=!1:"string"==typeof t.updateTime?n.updateTime=parseInt(t.updateTime,10):"number"==typeof t.updateTime?n.updateTime=t.updateTime:"object"===o(t.updateTime)&&(n.updateTime=new g.LongBits(t.updateTime.low>>>0,t.updateTime.high>>>0).toNumber())),null!=t.msgLastRead&&(g.Long?(n.msgLastRead=g.Long.fromValue(t.msgLastRead)).unsigned=!1:"string"==typeof t.msgLastRead?n.msgLastRead=parseInt(t.msgLastRead,10):"number"==typeof t.msgLastRead?n.msgLastRead=t.msgLastRead:"object"===o(t.msgLastRead)&&(n.msgLastRead=new g.LongBits(t.msgLastRead.low>>>0,t.msgLastRead.high>>>0).toNumber())),null!=t.unread&&(g.Long?(n.unread=g.Long.fromValue(t.unread)).unsigned=!1:"string"==typeof t.unread?n.unread=parseInt(t.unread,10):"number"==typeof t.unread?n.unread=t.unread:"object"===o(t.unread)&&(n.unread=new g.LongBits(t.unread.low>>>0,t.unread.high>>>0).toNumber())),null!=t.iBlockU&&(n.iBlockU=Boolean(t.iBlockU)),null!=t.deleted&&(n.deleted=Boolean(t.deleted)),n},t.toObject=function(t,n){n||(n={});var e={};if(n.defaults){if(g.Long){var o=new g.Long(0,0,!1);e.sign=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sign=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.uid=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.uid=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.event=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.event=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.updateTime=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.updateTime=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.msgLastRead=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.msgLastRead=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.unread=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.unread=n.longs===String?"0":0;e.iBlockU=!1,e.deleted=!1}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?e.sign=n.longs===String?String(t.sign):t.sign:e.sign=n.longs===String?g.Long.prototype.toString.call(t.sign):n.longs===Number?new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.uid&&t.hasOwnProperty("uid")&&("number"==typeof t.uid?e.uid=n.longs===String?String(t.uid):t.uid:e.uid=n.longs===String?g.Long.prototype.toString.call(t.uid):n.longs===Number?new g.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber():t.uid),null!=t.event&&t.hasOwnProperty("event")&&("number"==typeof t.event?e.event=n.longs===String?String(t.event):t.event:e.event=n.longs===String?g.Long.prototype.toString.call(t.event):n.longs===Number?new g.LongBits(t.event.low>>>0,t.event.high>>>0).toNumber():t.event),null!=t.updateTime&&t.hasOwnProperty("updateTime")&&("number"==typeof t.updateTime?e.updateTime=n.longs===String?String(t.updateTime):t.updateTime:e.updateTime=n.longs===String?g.Long.prototype.toString.call(t.updateTime):n.longs===Number?new g.LongBits(t.updateTime.low>>>0,t.updateTime.high>>>0).toNumber():t.updateTime),null!=t.msgLastRead&&t.hasOwnProperty("msgLastRead")&&("number"==typeof t.msgLastRead?e.msgLastRead=n.longs===String?String(t.msgLastRead):t.msgLastRead:e.msgLastRead=n.longs===String?g.Long.prototype.toString.call(t.msgLastRead):n.longs===Number?new g.LongBits(t.msgLastRead.low>>>0,t.msgLastRead.high>>>0).toNumber():t.msgLastRead),null!=t.unread&&t.hasOwnProperty("unread")&&("number"==typeof t.unread?e.unread=n.longs===String?String(t.unread):t.unread:e.unread=n.longs===String?g.Long.prototype.toString.call(t.unread):n.longs===Number?new g.LongBits(t.unread.low>>>0,t.unread.high>>>0).toNumber():t.unread),null!=t.iBlockU&&t.hasOwnProperty("iBlockU")&&(e.iBlockU=t.iBlockU),null!=t.deleted&&t.hasOwnProperty("deleted")&&(e.deleted=t.deleted),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.ChatList=function(){function t(t){if(this.chatItems=[],t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.sign=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.chatItems=g.emptyArray,t.prototype.updateTime=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.hasMore=!1,t.encode=function(t,n){if(n||(n=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&n.uint32(8).int64(t.sign),null!=t.chatItems&&t.chatItems.length)for(var e=0;e<t.chatItems.length;++e)a.ChatItem.encode(t.chatItems[e],n.uint32(18).fork()).ldelim();return null!=t.updateTime&&Object.hasOwnProperty.call(t,"updateTime")&&n.uint32(24).int64(t.updateTime),null!=t.hasMore&&Object.hasOwnProperty.call(t,"hasMore")&&n.uint32(32).bool(t.hasMore),n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.ChatList;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.chatItems&&o.chatItems.length||(o.chatItems=[]),o.chatItems.push(a.ChatItem.decode(t,t.uint32()));break;case 3:o.updateTime=t.int64();break;case 4:o.hasMore=t.bool();break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.ChatList)return t;var n=new a.ChatList;if(null!=t.sign&&(g.Long?(n.sign=g.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?n.sign=parseInt(t.sign,10):"number"==typeof t.sign?n.sign=t.sign:"object"===o(t.sign)&&(n.sign=new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),t.chatItems){if(!Array.isArray(t.chatItems))throw TypeError(".ChatList.chatItems: array expected");n.chatItems=[];for(var e=0;e<t.chatItems.length;++e){if("object"!==o(t.chatItems[e]))throw TypeError(".ChatList.chatItems: object expected");n.chatItems[e]=a.ChatItem.fromObject(t.chatItems[e])}}return null!=t.updateTime&&(g.Long?(n.updateTime=g.Long.fromValue(t.updateTime)).unsigned=!1:"string"==typeof t.updateTime?n.updateTime=parseInt(t.updateTime,10):"number"==typeof t.updateTime?n.updateTime=t.updateTime:"object"===o(t.updateTime)&&(n.updateTime=new g.LongBits(t.updateTime.low>>>0,t.updateTime.high>>>0).toNumber())),null!=t.hasMore&&(n.hasMore=Boolean(t.hasMore)),n},t.toObject=function(t,n){n||(n={});var e={};if((n.arrays||n.defaults)&&(e.chatItems=[]),n.defaults){if(g.Long){var o=new g.Long(0,0,!1);e.sign=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sign=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.updateTime=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.updateTime=n.longs===String?"0":0;e.hasMore=!1}if(null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?e.sign=n.longs===String?String(t.sign):t.sign:e.sign=n.longs===String?g.Long.prototype.toString.call(t.sign):n.longs===Number?new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),t.chatItems&&t.chatItems.length){e.chatItems=[];for(var i=0;i<t.chatItems.length;++i)e.chatItems[i]=a.ChatItem.toObject(t.chatItems[i],n)}return null!=t.updateTime&&t.hasOwnProperty("updateTime")&&("number"==typeof t.updateTime?e.updateTime=n.longs===String?String(t.updateTime):t.updateTime:e.updateTime=n.longs===String?g.Long.prototype.toString.call(t.updateTime):n.longs===Number?new g.LongBits(t.updateTime.low>>>0,t.updateTime.high>>>0).toNumber():t.updateTime),null!=t.hasMore&&t.hasOwnProperty("hasMore")&&(e.hasMore=t.hasMore),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.GetChat=function(){function t(t){if(t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.sign=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.uid=g.Long?g.Long.fromBits(0,0,!1):0,t.encode=function(t,n){return n||(n=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&n.uint32(8).int64(t.sign),null!=t.uid&&Object.hasOwnProperty.call(t,"uid")&&n.uint32(16).int64(t.uid),n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.GetChat;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.uid=t.int64();break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.GetChat)return t;var n=new a.GetChat;return null!=t.sign&&(g.Long?(n.sign=g.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?n.sign=parseInt(t.sign,10):"number"==typeof t.sign?n.sign=t.sign:"object"===o(t.sign)&&(n.sign=new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.uid&&(g.Long?(n.uid=g.Long.fromValue(t.uid)).unsigned=!1:"string"==typeof t.uid?n.uid=parseInt(t.uid,10):"number"==typeof t.uid?n.uid=t.uid:"object"===o(t.uid)&&(n.uid=new g.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber())),n},t.toObject=function(t,n){n||(n={});var e={};if(n.defaults){if(g.Long){var o=new g.Long(0,0,!1);e.sign=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sign=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.uid=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.uid=n.longs===String?"0":0}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?e.sign=n.longs===String?String(t.sign):t.sign:e.sign=n.longs===String?g.Long.prototype.toString.call(t.sign):n.longs===Number?new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.uid&&t.hasOwnProperty("uid")&&("number"==typeof t.uid?e.uid=n.longs===String?String(t.uid):t.uid:e.uid=n.longs===String?g.Long.prototype.toString.call(t.uid):n.longs===Number?new g.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber():t.uid),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.GetCosKey=function(){function t(t){if(t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.sign=g.Long?g.Long.fromBits(0,0,!1):0,t.encode=function(t,n){return n||(n=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&n.uint32(8).int64(t.sign),n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.GetCosKey;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.GetCosKey)return t;var n=new a.GetCosKey;return null!=t.sign&&(g.Long?(n.sign=g.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?n.sign=parseInt(t.sign,10):"number"==typeof t.sign?n.sign=t.sign:"object"===o(t.sign)&&(n.sign=new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),n},t.toObject=function(t,n){n||(n={});var e={};if(n.defaults)if(g.Long){var o=new g.Long(0,0,!1);e.sign=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sign=n.longs===String?"0":0;return null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?e.sign=n.longs===String?String(t.sign):t.sign:e.sign=n.longs===String?g.Long.prototype.toString.call(t.sign):n.longs===Number?new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.CosKey=function(){function t(t){if(t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.sign=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.token="",t.prototype.id="",t.prototype.key="",t.prototype.bucket="",t.prototype.region="",t.prototype.startTime=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.expTime=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.path="",t.prototype.pathDemo="",t.encode=function(t,n){return n||(n=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&n.uint32(8).int64(t.sign),null!=t.token&&Object.hasOwnProperty.call(t,"token")&&n.uint32(18).string(t.token),null!=t.id&&Object.hasOwnProperty.call(t,"id")&&n.uint32(26).string(t.id),null!=t.key&&Object.hasOwnProperty.call(t,"key")&&n.uint32(34).string(t.key),null!=t.bucket&&Object.hasOwnProperty.call(t,"bucket")&&n.uint32(42).string(t.bucket),null!=t.region&&Object.hasOwnProperty.call(t,"region")&&n.uint32(50).string(t.region),null!=t.startTime&&Object.hasOwnProperty.call(t,"startTime")&&n.uint32(56).int64(t.startTime),null!=t.expTime&&Object.hasOwnProperty.call(t,"expTime")&&n.uint32(64).int64(t.expTime),null!=t.path&&Object.hasOwnProperty.call(t,"path")&&n.uint32(74).string(t.path),null!=t.pathDemo&&Object.hasOwnProperty.call(t,"pathDemo")&&n.uint32(82).string(t.pathDemo),n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.CosKey;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.token=t.string();break;case 3:o.id=t.string();break;case 4:o.key=t.string();break;case 5:o.bucket=t.string();break;case 6:o.region=t.string();break;case 7:o.startTime=t.int64();break;case 8:o.expTime=t.int64();break;case 9:o.path=t.string();break;case 10:o.pathDemo=t.string();break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.CosKey)return t;var n=new a.CosKey;return null!=t.sign&&(g.Long?(n.sign=g.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?n.sign=parseInt(t.sign,10):"number"==typeof t.sign?n.sign=t.sign:"object"===o(t.sign)&&(n.sign=new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.token&&(n.token=String(t.token)),null!=t.id&&(n.id=String(t.id)),null!=t.key&&(n.key=String(t.key)),null!=t.bucket&&(n.bucket=String(t.bucket)),null!=t.region&&(n.region=String(t.region)),null!=t.startTime&&(g.Long?(n.startTime=g.Long.fromValue(t.startTime)).unsigned=!1:"string"==typeof t.startTime?n.startTime=parseInt(t.startTime,10):"number"==typeof t.startTime?n.startTime=t.startTime:"object"===o(t.startTime)&&(n.startTime=new g.LongBits(t.startTime.low>>>0,t.startTime.high>>>0).toNumber())),null!=t.expTime&&(g.Long?(n.expTime=g.Long.fromValue(t.expTime)).unsigned=!1:"string"==typeof t.expTime?n.expTime=parseInt(t.expTime,10):"number"==typeof t.expTime?n.expTime=t.expTime:"object"===o(t.expTime)&&(n.expTime=new g.LongBits(t.expTime.low>>>0,t.expTime.high>>>0).toNumber())),null!=t.path&&(n.path=String(t.path)),null!=t.pathDemo&&(n.pathDemo=String(t.pathDemo)),n},t.toObject=function(t,n){n||(n={});var e={};if(n.defaults){if(g.Long){var o=new g.Long(0,0,!1);e.sign=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sign=n.longs===String?"0":0;if(e.token="",e.id="",e.key="",e.bucket="",e.region="",g.Long){o=new g.Long(0,0,!1);e.startTime=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.startTime=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.expTime=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.expTime=n.longs===String?"0":0;e.path="",e.pathDemo=""}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?e.sign=n.longs===String?String(t.sign):t.sign:e.sign=n.longs===String?g.Long.prototype.toString.call(t.sign):n.longs===Number?new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.token&&t.hasOwnProperty("token")&&(e.token=t.token),null!=t.id&&t.hasOwnProperty("id")&&(e.id=t.id),null!=t.key&&t.hasOwnProperty("key")&&(e.key=t.key),null!=t.bucket&&t.hasOwnProperty("bucket")&&(e.bucket=t.bucket),null!=t.region&&t.hasOwnProperty("region")&&(e.region=t.region),null!=t.startTime&&t.hasOwnProperty("startTime")&&("number"==typeof t.startTime?e.startTime=n.longs===String?String(t.startTime):t.startTime:e.startTime=n.longs===String?g.Long.prototype.toString.call(t.startTime):n.longs===Number?new g.LongBits(t.startTime.low>>>0,t.startTime.high>>>0).toNumber():t.startTime),null!=t.expTime&&t.hasOwnProperty("expTime")&&("number"==typeof t.expTime?e.expTime=n.longs===String?String(t.expTime):t.expTime:e.expTime=n.longs===String?g.Long.prototype.toString.call(t.expTime):n.longs===Number?new g.LongBits(t.expTime.low>>>0,t.expTime.high>>>0).toNumber():t.expTime),null!=t.path&&t.hasOwnProperty("path")&&(e.path=t.path),null!=t.pathDemo&&t.hasOwnProperty("pathDemo")&&(e.pathDemo=t.pathDemo),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),a.UpdatePushToken=function(){function t(t){if(t)for(var n=Object.keys(t),e=0;e<n.length;++e)null!=t[n[e]]&&(this[n[e]]=t[n[e]])}return t.prototype.sign=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.pushChannel=g.Long?g.Long.fromBits(0,0,!1):0,t.prototype.pushToken="",t.encode=function(t,n){return n||(n=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&n.uint32(8).int64(t.sign),null!=t.pushChannel&&Object.hasOwnProperty.call(t,"pushChannel")&&n.uint32(16).int64(t.pushChannel),null!=t.pushToken&&Object.hasOwnProperty.call(t,"pushToken")&&n.uint32(26).string(t.pushToken),n},t.decode=function(t,n){t instanceof s||(t=s.create(t));for(var e=void 0===n?t.len:t.pos+n,o=new a.UpdatePushToken;t.pos<e;){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.pushChannel=t.int64();break;case 3:o.pushToken=t.string();break;default:t.skipType(7&i)}}return o},t.fromObject=function(t){if(t instanceof a.UpdatePushToken)return t;var n=new a.UpdatePushToken;return null!=t.sign&&(g.Long?(n.sign=g.Long.fromValue(t.sign)).unsigned=!1:"string"==typeof t.sign?n.sign=parseInt(t.sign,10):"number"==typeof t.sign?n.sign=t.sign:"object"===o(t.sign)&&(n.sign=new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.pushChannel&&(g.Long?(n.pushChannel=g.Long.fromValue(t.pushChannel)).unsigned=!1:"string"==typeof t.pushChannel?n.pushChannel=parseInt(t.pushChannel,10):"number"==typeof t.pushChannel?n.pushChannel=t.pushChannel:"object"===o(t.pushChannel)&&(n.pushChannel=new g.LongBits(t.pushChannel.low>>>0,t.pushChannel.high>>>0).toNumber())),null!=t.pushToken&&(n.pushToken=String(t.pushToken)),n},t.toObject=function(t,n){n||(n={});var e={};if(n.defaults){if(g.Long){var o=new g.Long(0,0,!1);e.sign=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.sign=n.longs===String?"0":0;if(g.Long){o=new g.Long(0,0,!1);e.pushChannel=n.longs===String?o.toString():n.longs===Number?o.toNumber():o}else e.pushChannel=n.longs===String?"0":0;e.pushToken=""}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"==typeof t.sign?e.sign=n.longs===String?String(t.sign):t.sign:e.sign=n.longs===String?g.Long.prototype.toString.call(t.sign):n.longs===Number?new g.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.pushChannel&&t.hasOwnProperty("pushChannel")&&("number"==typeof t.pushChannel?e.pushChannel=n.longs===String?String(t.pushChannel):t.pushChannel:e.pushChannel=n.longs===String?g.Long.prototype.toString.call(t.pushChannel):n.longs===Number?new g.LongBits(t.pushChannel.low>>>0,t.pushChannel.high>>>0).toNumber():t.pushChannel),null!=t.pushToken&&t.hasOwnProperty("pushToken")&&(e.pushToken=t.pushToken),e},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),t.exports=a},"32f4":function(t,n,e){"use strict";e("4ec9"),e("d3b7"),e("3ca3"),e("ddb0"),e("4de4"),e("4160"),e("159b");var o=0,i=1,s=2,r=3,g=4,a=5,l=6,u=7,c=8,d=9,m=10,p=11,h=12,f=13,b=14,y=15,S=20,w=21,L=22,T="online",O="offline",v="updateChat",N="receivedMessage",I="notificationMsg",E="deleteMsg",k="errorType",C="syncChatsChange",U="syncMsgs",M="wsStateChange",B="im_onMessage_",j="im_onWebsocket_",P="login",_="logout",D="getConversationList",R="getConversationProvider",A="updateConversationProvider",G="deleteConversation",V="getMessageList",z="setMessageRead",x="sendMessage",J="resendMessage",K="revokeMessage",F="getCosKey",H="getAllUnreadCount",Y={NET_STATE_DISCONNECTED:"disconnect",NET_STATE_CONNECTING:"connecting",NET_STATE_CONNECTED:"connected"},W={NOT_LOGIN:"notLogin",LOGGING:"logging",LOGGED:"logged"},X={NOT_SYNC_CHAT:"NotSyncChat",SYNC_CHAT_START:"syncChatStart",SYNC_CHAT_SUCCESS:"syncChatSuccess",SYNC_CHAT_FAILED:"syncChatFailed"},q={BFIM_MSG_STATUS_SENDING:0,BFIM_MSG_STATUS_SEND_SUCC:1,BFIM_MSG_STATUS_SEND_FAIL:2},Q=0,Z=1,$=2,tt={SUCCESS:0,ERROR:1,TOKEN_NOT_FOUND:4,NO_REGISTER:9,SIGNED:11,KICKED_OUT:2008,TIMEOUT:3e3,DISCONNECT:3001,CONNECTERR:3002,CONNECTING:3003,EXITING:3333,LOGGING:3334,DBERR:6005,NOLOGIN:6014,PARAMETER:9001},nt={Text:0,Img:1,Audio:2,Video:3,Location:4,Card:5,Revoked:31,Matched:33,Recall:64,Unmatch:65,SysDelete:66,Deleted:67,Notification:100},et=0,ot=1,it=2,st=3,rt={CONNECT_CHANGE:"onConnectChange",LOGIN:"onLogin",LOGOUT:"onLogout",SYNC_CHATS_CHANGE:"onSyncChatsChange",MESSAGE_RECEIVED:"onReceivedMessage",MESSAGE_REVOKED:"onRevokedMessage",MESSAGE_NOTIFICATION:"onNotificationMessage",MESSAGE_DELETE:"onDeleteMessage",CONVERSATION_LIST_UPDATED:"onConversationListUpdated",KICKED_OUT:"onKickedOut",TOKEN_NOT_FOUND:"onTokenNotFound"},gt="WsStateChange",at="SyncChatsChange",lt="SyncMsgs",ut="ImLogin",ct="ImLogout",dt="ChatItemUpdate",mt="ResultError",pt="ChatR",ht=e("2909"),ft=(e("ace4"),e("5cc6"),e("9a8c"),e("a975"),e("735e"),e("c1ac"),e("d139"),e("3a7b"),e("d5d6"),e("82f8"),e("e91f"),e("60bd"),e("5f96"),e("3280"),e("3fcc"),e("ca91"),e("25a1"),e("cd26"),e("3c5d"),e("2954"),e("649e"),e("219c"),e("170b"),e("b39a"),e("72f7"),e("fb6a"),e("caad"),e("2532"),e("2ad5")),bt=(e("99af"),e("acff"));var yt={compress:function(t,n){var e=t,o=0;return t.length>10&&(o=1,e=bt.a.deflate(t,{level:5,to:"Uint8Array"})),new Uint8Array([n,o].concat(Object(ht.a)(e)))},loginPro:function(t,n,e){return ft.ImLogin.encode(ft.ImLogin.fromObject({sign:t,token:n,subApp:e})).finish()},logoutPro:function(t){return ft.ImLogout.encode(ft.ImLogout.fromObject({sign:t})).finish()},chatListPro:function(t,n){return ft.GetChatList.encode(ft.GetChatList.fromObject({sign:t,updateTime:n})).finish()},delChatPro:function(t,n){return ft.DelChat.encode(ft.DelChat.fromObject({sign:t,toUid:n})).finish()},pingPro:function(){return ft.Ping.encode(ft.Ping.fromObject({type:0})).finish()},getMsgPro:function(t){return t.offset=t.pageSize||20,ft.GetHistory.encode(ft.GetHistory.fromObject(t)).finish()},sendMsgPro:function(t){return ft.ChatS.encode(ft.ChatS.fromObject(t)).finish()},revokeMsgPro:function(t,n,e){return ft.Revoke.encode(ft.Revoke.fromObject({sign:t,toUid:n,msgId:e})).finish()},readMsgPro:function(t,n){return ft.MsgRead.encode(ft.MsgRead.fromObject({sign:t,toUid:n})).finish()},chatPro:function(t,n){return ft.GetChat.encode(ft.GetChat.fromObject({sign:t,uid:n})).finish()},cosPro:function(t){return ft.GetCosKey.encode(ft.GetCosKey.fromObject({sign:t})).finish()}},St={ws:null,Global:null,heartRate:3e4,heartBeatTime:null,reconnectNum:0,closeState:!1,reconnectTimer:null,wsStatus:!1,chatListEvent:null,chatFormatList:[]},wt=[tt.SUCCESS,tt.TOKEN_NOT_FOUND,tt.KICKED_OUT];function Lt(t,n){Nt(),St.closeState=!0,St.Global=t,It(n),window.removeEventListener("online",Tt(n)),window.addEventListener("online",Tt(n)),window.addEventListener("offline",(function(){St.ws.close()}))}function Tt(t){St.closeState||1===St.ws.readyState||(St.wsStatus=!1,St.ws?St.ws.close():Et(t))}function Ot(t,n){var e;St.heartBeatTime=(new Date).getTime();var o=yt.compress(t,n);null===(e=St.ws)||void 0===e||e.send(o)}function vt(){St.ws&&(St.closeState=!0,St.ws.close()),Nt()}function Nt(){St.reconnectTimer&&clearTimeout(St.reconnectTimer),St.reconnectTimer=null,St.ws=null,St.Global=null,St.heartBeatTime=null,St.chatListEvent=null,St.wsStatus=!1,St.chatFormatList=[],St.reconnectNum=0}function It(t){St.Global.onConn();var n=new WebSocket(t.wsUrl);n.binaryType="arraybuffer",n.onopen=function(n){St.reconnectNum=0,St.closeState=!1,St.heartBeatTime=(new Date).getTime(),t.connSuc(t)},n.onmessage=kt,n.onclose=function(n){Et(t),t.connErr(t,n)},n.onerror=function(n){Et(t)},St.ws=n}function Et(t){St.wsStatus||St.closeState||(St.wsStatus=!0,St.reconnectTimer=setTimeout((function(){0===St.reconnectNum?St.reconnectNum=250:St.reconnectNum*=2,It(t),St.wsStatus=!1}),St.reconnectNum))}function kt(t){var n=new Uint8Array(t.data.slice(0,1))[0],e=t.data.slice(2);switch(1===new Uint8Array(t.data.slice(1,2))[0]&&(e=bt.a.inflate(e,{to:"Uint8Array"})),e=new Uint8Array(e),n){case r:!function(t){var n=Ct(ft.Result,t),e=n.code,o=Ut(n);if((null==o?void 0:o.type)===P&&!wt.includes(e)){var i;return void(null===(i=St.ws)||void 0===i||i.close())}switch(e){case tt.SUCCESS:if(!o)return;o.type===D?(St.chatListEvent=o,St.chatFormatList=[]):(null==o?void 0:o.callSuc)&&o.callSuc({data:n});break;case tt.ERROR:(null==o?void 0:o.callErr)&&o.callErr(n);break;case tt.TOKEN_NOT_FOUND:case tt.KICKED_OUT:St.closeState=!0,St.ws.close(),St.Global.handleMessage({type:mt,data:n}),(null==o?void 0:o.callErr)&&o.callErr(n);break;case 12:(null==o?void 0:o.callSuc)&&o.callSuc({chats:[],hasMore:!1});break;default:(null==o?void 0:o.callErr)&&o.callErr(n)}}(e);break;case y:!function(t){var n,e,o=Ct(ft.ChatList,t);(n=St.chatFormatList).push.apply(n,Object(ht.a)(o.chatItems)),o.updateTime&&null!==(e=St.chatListEvent)&&void 0!==e&&e.callSuc&&(St.chatListEvent.callSuc({chats:St.chatFormatList,updateTime:o.updateTime}),St.chatListEvent=null,St.chatFormatList=[])}(e);break;case u:!function(t){var n=Ct(ft.ChatRBatch,t),e=Ut(n);(null==e?void 0:e.callSuc)&&e.callSuc({messages:n.msgs})}(e);break;case l:!function(t){var n=Ct(ft.ChatR,t),e=Ut(n);e?(null==e?void 0:e.callSuc)&&e.callSuc({data:n}):St.Global.handleMessage({type:pt,data:n})}(e);break;case a:!function(t){var n=Ct(ft.ChatSR,t),e=Ut(n);(null==e?void 0:e.callSuc)&&e.callSuc({data:n})}(e);break;case b:!function(t){var n=Ct(ft.ChatItemUpdate,t);St.Global.handleMessage({type:dt,data:n});var e=Ut(n);(null==e?void 0:e.callSuc)&&e.callSuc({data:n})}(e);break;case f:!function(t){var n=Ct(ft.ChatItem,t),e=Ut(n);(null==e?void 0:e.callSuc)&&e.callSuc({data:n})}(e);break;case L:!function(t){var n=Ct(ft.CosKey,t),e=Ut(n);(null==e?void 0:e.callSuc)&&e.callSuc({data:n})}(e)}}function Ct(t,n){return t.toObject(t.decode(n),{defaults:!0})}function Ut(t){var n=St.Global.callEvents,e=null;return Object.prototype.hasOwnProperty.call(t,"sign")&&(e=n.get(t.sign)),e}var Mt=e("53ca"),Bt=(e("c975"),e("ac1f"),e("1276"),[]);function jt(t,n){Bt.push(t),window.localStorage.setItem(t,JSON.stringify(n))}function Pt(t){window.localStorage.removeItem(t),Bt=Bt.filter((function(n){return n!==t}))}function _t(t){if("string"==typeof t)try{var n=JSON.parse(t);return!("object"!=Object(Mt.a)(n)||!n)&&n}catch(t){return!1}}var Dt={clear:function(t){for(;Bt.length>0;){var n=Bt.pop();window.localStorage.removeItem(n)}t&&(window.localStorage.removeItem("im_windowHeartBeat"),window.localStorage.removeItem("im_wsCurId"),window.localStorage.removeItem("im_wsTabs"),window.localStorage.removeItem("im_wsConnTab"))},watchStorage:function(t,n,e){if(!t.key||!t.newValue)return;if("im_wsCurId"===t.key)return void(t.newValue===e.tabId?e.globalTimer():e.curTab&&e.clearTimer());"im_getSdkState"===t.key&&e.curTab&&window.localStorage.setItem("im_setSdkState",JSON.stringify({tabId:t.newValue,sdkState:e.sdkState}));if("im_setSdkState"===t.key){var o=_t(t.newValue);o.tabId===e.tabId&&(window.localStorage.removeItem("im_setSdkState"),e.stateCallEvents.forEach((function(t,n){t.callSuc(o.sdkState)})))}0===t.key.indexOf("im_update_tabs_")&&e.curTab&&e.updateTabs&&(e.updateTabs.push(t.newValue),window.localStorage.setItem("im_wsTabs",JSON.stringify(e.updateTabs)));if("im_wsConnTab"===t.key&&t.newValue===e.tabId)return e.reconnection(),void window.localStorage.removeItem("im_wsConnTab");if(0===t.key.indexOf(B)){var i=JSON.parse(t.newValue);return void e.handleMessage(i)}if(0===t.key.indexOf(j))return void function(t,n,e){var o=_t(t.newValue);if(!1===o)return;if(e.curTab&&o.state===Q){var i=t.key.split("_")[2],s=function(t,n,e){var o=null;switch(t){case _:o=n.logout();break;case R:o=n.getConversationProvider(e.options);break;case G:o=n.deleteConversation(e.options);break;case H:o=n.getAllUnreadCount();break;case V:e.options.tabId=e.tabId,o=n.getMessageList(e.options);break;case z:o=n.setMessageRead(e.options);break;case x:o=n.sendMessage(e.options);break;case J:o=n.resendMessage(e.options);break;case K:o=n.revokeMessage(e.options);break;case F:o=n.getCosKey();break;default:o=!1}return o}(i,n,o);if(!s)return;s.then((function(n){i===V?(o.state=Z,o.hasMore=n.data.hasMore,o.messages=n.data.messages,jt(t.key,o)):function(t,n,e){e.state=Z,e.data=t,jt(n,e)}(n.data,t.key,o)})).catch((function(n){!function(t,n,e){e.state=$,e.err=t,jt(n,e)}(n,t.key,o)}))}else o.tabId===e.tabId&&function(t,n,e){Pt(t);var o=n.callEvents.get(e.callSign);e.state===Z?o&&o.callSuc(e):e.state===$&&o&&o.callErr(e.err)}(t.key,e,o)}(t,n,e)},onMessageNotice:function(t,n){var e=B+t;jt(e,n),Pt(e)},onWebSocketNotice:function(t,n){jt("".concat(j+t,"_").concat(n.tabId,"_").concat(n.callSign,";"),n)}},Rt=e("5530");e("4e82"),e("c740"),e("a15b"),e("b0c0"),e("e25e");function At(t,n){return n?"string"!=typeof t:"string"!=typeof t||""===t}function Gt(t,n){return n?"number"!=typeof t||0===t:"number"!=typeof t}function Vt(t){return null==t}function zt(t){return"string"!=typeof t||0!==t.indexOf("http://")&&0!==t.indexOf("https://")}function xt(t){return"string"!=typeof t||0!==t.indexOf("ws://")&&0!==t.indexOf("wss://")}function Jt(t,n,e){if("object"!==Object(Mt.a)(t))return!0;if(n)switch(e){case"string":return At(t[n]);case"number":return Gt(t[n]);case"http":return zt(t[n]);case"ws":return xt(t[n]);default:return Vt(t[n])}}function Kt(t){return"".concat(t," parameter type is wrong or does not exist")}function Ft(t,n){return"".concat(t,"_").concat(n)}function Ht(t){return Math.round(1e3*(t||(new Date).getTime()+Math.random()))}function Yt(t,n,e){return{name:n,code:e||tt.ERROR,msg:t}}function Wt(t){return{code:tt.PARAMETER,name:t.name,msg:t.msg||Kt(t.key)}}function Xt(t){return"C2C_"+t}function qt(t,n,e){return t.sdkState.loginState===W.NOT_LOGIN?(n(Yt("Imsdk is not logged",e,tt.NOLOGIN)),!1):!t.curTab||t.sdkState.connState===Y.NET_STATE_CONNECTED||(n(Yt("disconnected",e,tt.DISCONNECT)),!1)}var Qt={getPageSize:function(t,n,e,o){if(!t)return e;if(null==e||!e.length)return[];var i=e.findIndex((function(e){return e[n]===t}));return-1!==i&&i!==e.length-1?e.slice(i+1,i+1+o):[]},sort:function(t,n){return t.sort((function(t,e){return e[n]-t[n]}))},uuid:function(){for(var t=[],n=0;n<36;n++)t[n]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return t[14]="4",t[19]="0123456789abcdef".substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-",t.join("")},isNotString:At,isNotNumer:Gt,isNotObject:Jt,isNotEmpty:Vt,isNotSize:function(t,n){return new Blob([t],{type:"application/json"}).size>(n||3072)},isNotHttp:zt,isNotWs:xt,createOnlyId:Ft,createSign:Ht,resultErr:Yt,serverErr:function(t,n){return{name:n,code:t.code||tt.ERROR,msg:t.msg}},parameterErr:Wt,resultSuc:function(t,n){return{code:tt.SUCCESS,name:t,data:JSON.parse(JSON.stringify(n))}},resultNotice:function(t,n,e){return{name:t,code:e||tt.SUCCESS,data:JSON.parse(JSON.stringify(n))}},msgBase:function(t,n){var e=(new Date).getTime(),o=Ht(e),i=Xt(t);return{onlyId:Ft(i,o),conversationID:i,toUid:t,fromUid:n,msgId:0,showMsgTime:e,sendStatus:q.BFIM_MSG_STATUS_SENDING}},splicingC2CId:Xt,reformatC2CId:function(t){return t.slice(4)},formatMsg:function(t,n){var e={conversationID:n,fromUid:t.fromUid,toUid:t.toUid,type:t.type,msgId:t.msgId,newMsg:t.newMsg,msgTime:t.msgTime,sendStatus:q.BFIM_MSG_STATUS_SEND_SUCC};switch(e.onlyId=t.onlyId||Ft(n,t.sign||t.msgTime),e.showMsgTime=parseInt(t.msgTime/1e3)||t.showMsgTime,e.type){case nt.Recall:case nt.Revoked:case nt.Text:e.text=t.body;break;case nt.Img:e.url=t.body,e.height=t.height,e.width=t.width;break;case nt.Audio:e.url=t.body,e.duration=t.duration;break;case nt.Video:e.url=t.body,e.thumb=t.thumb,e.height=t.height,e.width=t.width,e.duration=t.duration;break;case nt.Location:e.title=t.title,e.lat=t.lat,e.lng=t.lng,e.zoom=t.zoom;break;default:e.content=t.body,e.title=t.title,e.lat=t.lat,e.lng=t.lng,e.zoom=t.zoom,e.thumb=t.thumb,e.height=t.height,e.width=t.width,e.duration=t.duration}return e},formatChat:function(t,n){var e=Object(Rt.a)({},t);return delete e.sign,e.showTime=parseInt(t.showMsgTime/1e3),e.conversationID=Xt(t.uid),t.msgEnd&&(e.showMsgFromUid=t.myMove?t.uid:n),e},emptyTip:Kt,createCallEvent:function(t,n){t.callEvents.set(n.callSign,{tabId:t.tabId,type:n.type,timeOut:(new Date).getTime()+t.timeOut,callSuc:function(e){t.callEvents.delete(n.callSign),n.callSuc&&n.callSuc(e)},callErr:function(e){t.callEvents.delete(n.callSign),n.callErr&&n.callErr(e)}})},preJudge:qt,formatBody:function(t,n,e){var o=null,i=null;if(!qt(t,e,x))return!1;if(Jt(n,"type","number"))o=Wt({name:x,key:"type"});else switch(n.type){case nt.Text:At(n.text)&&(o=Wt({name:x,key:"text"})),i=n.text;break;case nt.Img:zt(n.url)?o=Wt({name:x,key:"url"}):Vt(n.height)?o=Wt({name:x,key:"height"}):Vt(n.width)&&(o=Wt({name:x,key:"width"})),i=n.url;break;default:i=n.content}return o?(e(o),!1):i}},Zt=(e("d81d"),e("7db0"),e("25f0"),e("4dec")),$t=null,tn=1,nn={chatList:["&conversationID","uid","msgEnd","msgLastRead","showMsgId","showMsgType","showMsg","showMsgTime","showTime","showMsgFromUid","unread","matched","newMsg","myMove","iceBreak","tipFree","topAlbum","iBlockU","iChatU","uChatI","deleted"].join(),msgList:["&onlyId","conversationID","fromUid","toUid","msgId","msgTime","showMsgTime","sendStatus","text","url","type","thumb","width","height","duration","title","lat","lng","zoom","content","sput","newMsg"].join(),chatHistory:["&conversationID"].join()},en={};function on(t,n){switch(t){case"im_chatHistory":case"im_chatList":"Array"!==(e=n,Object.prototype.toString.call(e).slice(8,-1))&&(n=[])}var e;return n}function sn(t){try{var n=window.localStorage.getItem(t);return on(t,n=JSON.parse(n))}catch(n){return on(t,null)}}function rn(t,n){window.localStorage.setItem(t,JSON.stringify(n))}en.initDB=function(t){window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB?(($t=new Zt.a("imWsDB")).version(tn).stores(nn),$t.open().then((function(n){tn=$t.verno,t()})).catch((function(n){$t=null,t()}))):t()},en.deleteDB=function(){Zt.a.delete("imWsDB"),window.localStorage.removeItem("im_chatHistory"),window.localStorage.removeItem("im_chatList")},en.clear=function(){var t;null!==(t=$t)&&void 0!==t&&t.isOpen&&$t.isOpen()?$t.transaction("rw",$t.tables,(function(){$t.tables.forEach((function(t){t.clear()}))})):(window.localStorage.removeItem("im_chatHistory"),window.localStorage.removeItem("im_chatList"))},en.addChatList=function(t){var n;if(null!==(n=$t)&&void 0!==n&&n.isOpen&&$t.isOpen())$t.chatList.bulkPut(t);else{var e=sn("im_chatList");rn("im_chatList",e=e.concat(t))}},en.updateChat=function(t){var n;if(null!==(n=$t)&&void 0!==n&&n.isOpen&&$t.isOpen())return $t.chatList.put(t);var e=sn("im_chatList"),o=t;return rn("im_chatList",e=e.map((function(n){return n.conversationID===t.conversationID&&(o=Object.assign(n,t)),n}))),Promise.resolve(o)},en.getChatList=function(){var t;if(null!==(t=$t)&&void 0!==t&&t.isOpen&&$t.isOpen())return $t.chatList.toCollection().and((function(t){return!1===t.deleted})).toArray();var n=sn("im_chatList");return n=n.filter((function(t){return!1===t.deleted})),Promise.resolve(n)},en.getChat=function(t){var n;if(null!==(n=$t)&&void 0!==n&&n.isOpen&&$t.isOpen())return $t.chatList.get({conversationID:t});var e=sn("im_chatList").find((function(n){return n.conversationID===t}));return Promise.resolve(e)},en.addChatKey=function(t){var n;if(null!==(n=$t)&&void 0!==n&&n.isOpen&&$t.isOpen())$t.chatHistory.put({conversationID:t});else{var e=sn("im_chatHistory");e.find((function(n){return n.conversationID===t}))||(e.push({conversationID:t}),rn("im_chatHistory",e))}},en.getChatKeys=function(){var t;return null!==(t=$t)&&void 0!==t&&t.isOpen&&$t.isOpen()?$t.chatHistory.toArray():Promise.resolve(sn("im_chatHistory"))},en.addMsgList=function(t){var n;null===(n=$t)||void 0===n||n.msgList.bulkPut(t)},en.getMsgList=function(t){var n;return!0!==((null===(n=$t)||void 0===n?void 0:n.isOpen)&&$t.isOpen())?Promise.resolve([]):t.msgEnd?$t.msgList.toCollection().and((function(n){return n.conversationID===t.conversationID&&n.msgId<t.msgEnd})).sortBy("msgId"):$t.msgList.where({conversationID:t.conversationID}).sortBy("msgId")},en.addMsg=function(t){var n;null===(n=$t)||void 0===n||n.msgList.put(t)},en.updateMsg=function(t){var n;null===(n=$t)||void 0===n||n.msgList.where({conversationID:t.conversationID,msgId:t.msgId}).modify(t)},en.deleteMsgs=function(t,n){var e,o;n?null===(e=$t)||void 0===e||e.msgList.toCollection().and((function(e){return e.conversationID===t&&n.includes(e.msgId.toString())})).delete():null===(o=$t)||void 0===o||o.msgList.where({conversationID:t}).delete()};var gn,an,ln=en,un=e("1da1");e("96cf"),e("a9e3"),e("6062"),e("13d5");function cn(t){t.handleMessage({type:at,state:X.SYNC_CHAT_START});var n=Qt.createSign();t.callEvents.has(n)&&(n+=1),Qt.createCallEvent(t,{type:D,callSign:n,callSuc:function(n){n.updateTime&&n.updateTime>t.updateTime&&(t.updateTime=n.updateTime),n.chats.length>0?t.sdkState.chatsSync===X.SYNC_CHAT_SUCCESS?function(t,n){ln.getChatKeys().then((function(e){dn(t,n,e)}))}(t,n.chats):function(t,n){dn(t,n)}(t,n.chats):t.handleMessage({type:at,state:X.SYNC_CHAT_SUCCESS,chats:[]})},callErr:function(n){t.handleMessage({type:at,state:X.SYNC_CHAT_FAILED,err:n})}}),Ot(yt.chatListPro(n,t.updateTime),h)}function dn(t,n,e){var o=new Set,i=n.map((function(n){var i=Qt.formatChat(n,t.sdkState.uid),s=i.conversationID,r=t.chatKeys[s];return null!=e&&e.find((function(t){return t.conversationID===s}))&&function(t,n,e){var o=Qt.createSign();t.callEvents.has(o)&&(o+=1),Qt.createCallEvent(t,{type:V,callSign:o,callSuc:(i=Object(un.a)(regeneratorRuntime.mark((function o(i){var s,r,g,a,l,u,c,d,m;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(null!=i&&null!==(s=i.messages)&&void 0!==s&&s.length){o.next=2;break}return o.abrupt("return");case 2:for(r=i.messages.length-1,i.messages[r].msgId>n+1&&ln.deleteMsgs(e.conversationID),g=[],a=[],l=[];r>=0;r--)(u=i.messages[r]).type===nt.Recall?(c={conversationID:u.conversationID,msgId:parseInt(u.body),type:nt.Revoked},g.push(c),ln.updateMsg(c)):u.type===nt.SysDelete?u.content.split(",").forEach((function(t){l.push(Number(t))})):u.type<64&&(d=Qt.formatMsg(u,e.conversationID),a.push(d));l.length>0&&ln.deleteMsgs(e.conversationID,l),m=g.concat(a),ln.addMsgList(m),!0!==e.deleted&&t.handleMessage({type:lt,conversationID:e.conversationID,revokeList:g,msgList:a,deleteMsgIds:l});case 12:case"end":return o.stop()}}),o)}))),function(t){return i.apply(this,arguments)}),callErr:function(t){}}),Ot(yt.getMsgPro({sign:o,toUid:e.uid,pageSize:100,msgStart:n}),c);var i}(t,null==r?void 0:r.msgEnd,i),i.deleted?r&&(o.add(s),delete t.chatKeys[s]):r?Object.assign(r,i):(t.chatKeys[s]=i,t.chatList.push(i)),i}));return o.size>0&&(t.chatList=t.chatList.filter((function(t){return!o.has(t.conversationID)}))),null!=i&&i.length&&ln.addChatList(i),t.handleMessage({type:at,state:X.SYNC_CHAT_SUCCESS,chats:t.chatList}),i}function mn(t,n,e){var o=Qt.sort(t.chatList,"showMsgTime");(null==n?void 0:n.pageSize)>0&&(o=Qt.getPageSize(null==n?void 0:n.conversationID,"conversationID",t.chatList,null==n?void 0:n.pageSize)),e(Qt.resultSuc(D,{chats:o,hasMore:(null==n?void 0:n.pageSize)>0&&o.length>(null==n?void 0:n.pageSize)}))}function pn(t,n){return new Promise((function(e,o){if(Qt.preJudge(t,o,R)){if(Qt.isNotObject(n,"conversationID","string")){var i=Qt.parameterErr({name:R,key:"conversationID"});return o(i)}if(Object.prototype.hasOwnProperty.call(t.chatKeys,n.conversationID)){var s=t.chatKeys[n.conversationID],r=Qt.resultSuc(R,s);e(r)}else ln.getChat(n.conversationID).then((function(i){if(i){var s=Qt.resultSuc(R,i);return e(s)}hn(t,n.conversationID,e,o)}))}}))}function hn(t,n,e,o){var i=Qt.createSign();if(t.callEvents.has(i)&&(i+=1),Qt.createCallEvent(t,{type:R,callSign:i,callSuc:function(n){if(n.data){var o=Qt.formatChat(n.data,t.sdkState.uid);ln.updateChat(o);var i=Qt.resultSuc(R,o);e(i)}},callErr:function(t){var n=Qt.serverErr(t,R);o(n)}}),t.curTab){var s=Qt.reformatC2CId(n);Ot(yt.chatPro(i,s),S)}else Dt.onWebSocketNotice(R,{callSign:i,tabId:t.tabId,options:options,state:Q})}function fn(t){return bn.apply(this,arguments)}function bn(){return(bn=Object(un.a)(regeneratorRuntime.mark((function t(n){var e,o,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=n.conversationID||Qt.splicingC2CId(n.uid),o=n,!gn.curTab){t.next=5;break}return t.next=5,pn(gn,{conversationID:e}).then((function(t){var n=t.data;o=n}));case 5:if(!n.event){t.next=9;break}i=Sn(n,o),t.next=12;break;case 9:if(!(n.showMsgTime<o.showMsgTime)){t.next=11;break}return t.abrupt("return");case 11:i=yn(n,o);case 12:wn(i);case 13:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function yn(t,n){var e=Object(Rt.a)({},n);if(t.showMsgTime>gn.updateTime&&(gn.updateTime=t.showMsgTime),gn.curTab)switch(t.showMsgType){case nt.Recall:t.showMsgId===e.showMsgId?(e.msgEnd=t.msgEnd,e.showMsgType=nt.Revoked,e.showMsg=""):e.msgEnd<t.msgEnd&&(e.msgEnd=t.msgEnd);break;case nt.Unmatch:e.msgEnd=t.msgEnd,e.matched=!1;break;default:t.unread&&t.msgEnd>e.msgEnd&&(t.unread=(e.unread||0)+t.unread),Object.assign(e,t),e.showTime=parseInt(e.showMsgTime/1e3),e.deleted=!1}return e}function Sn(t,n){var e=Object(Rt.a)({},n);switch(t.event){case et:e.msgLastRead=t.msgLastRead;break;case ot:e.unread=t.unread;break;case it:e.iBlockU=t.iBlockU;break;case st:t.deleted&&(e.deleted=t.deleted,Object.prototype.hasOwnProperty.call(gn.chatKeys,n.conversationID)&&(delete gn.chatKeys[n.conversationID],gn.chatList=gn.chatList.filter((function(t){return t.conversationID!=n.conversationID}))))}return t.updateTime>gn.updateTime&&(gn.updateTime=t.updateTime),e}function wn(t){if(Object.prototype.hasOwnProperty.call(gn.chatKeys,t.conversationID)){var n=gn.chatKeys[t.conversationID];Object.assign(n,t)}else!0!==t.deleted&&(gn.chatKeys[t.conversationID]=t,gn.chatList.unshift(t));if(an[rt.CONVERSATION_LIST_UPDATED]){var e=Qt.resultNotice(rt.CONVERSATION_LIST_UPDATED,[t]);an[rt.CONVERSATION_LIST_UPDATED](e)}gn.curTab&&(Dt.onMessageNotice(v,{type:dt,data:t}),ln.updateChat(t))}var Ln=function(t,n,e){switch(gn=t,an=n,e.type){case gt:!function(t){gn.sdkState.connState=t.state,gn.curTab&&Dt.onMessageNotice(M,t);if(an[rt.CONNECT_CHANGE]){var n=Qt.resultNotice(rt.CONNECT_CHANGE,{state:t.state});an[rt.CONNECT_CHANGE](n)}}(e);break;case at:!function(t){gn.curTab?Dt.onMessageNotice(C,t):t.state===X.SYNC_CHAT_SUCCESS&&(gn.chatList=t.chats,gn.chatKeys={},gn.chatList.forEach((function(t){gn.chatKeys[t.conversationID]=t})));if(t.state!==X.SYNC_CHAT_START){var n;if(gn.chatCallEvents.forEach((function(n,e){t.state===X.SYNC_CHAT_SUCCESS?n.callSuc():t.state===X.SYNC_CHAT_FAILED&&n.callErr(t.err)})),gn.sdkState.chatsSync===X.SYNC_CHAT_SUCCESS){if(an[rt.CONVERSATION_LIST_UPDATED]&&(null===(n=t.chats)||void 0===n?void 0:n.length)>0){var e=Qt.resultNotice(rt.CONVERSATION_LIST_UPDATED,t.chats);an[rt.CONVERSATION_LIST_UPDATED](e)}}else gn.sdkState.chatsSync=t.state}if(an[rt.SYNC_CHATS_CHANGE]){var o=Qt.resultNotice(rt.SYNC_CHATS_CHANGE,{state:t.state});an[rt.SYNC_CHATS_CHANGE](o)}}(e);break;case lt:!function(t){gn.curTab&&Dt.onMessageNotice(U,t);if(t.msgList.length>0&&an[rt.MESSAGE_RECEIVED]){var n=Qt.resultNotice(rt.MESSAGE_RECEIVED,t.msgList);an[rt.MESSAGE_RECEIVED](n)}if(t.deleteMsgIds.length>0&&an[rt.MESSAGE_DELETE]){var e=Qt.resultNotice(rt.MESSAGE_DELETE,{conversationID:t.conversationID,msgIds:t.deleteMsgIds});an[rt.MESSAGE_DELETE](e)}if(t.revokeList.length>0&&an[rt.MESSAGE_REVOKED]){var o=Qt.resultNotice(rt.MESSAGE_REVOKED,t.revokeList);an[rt.MESSAGE_REVOKED](o)}}(e);break;case ut:!function(t){if(Object.assign(gn.sdkState,t.data),gn.curTab)gn.updateTabs=[gn.tabId],window.localStorage.setItem("im_wsTabs",JSON.stringify(gn.updateTabs)),Dt.onMessageNotice(T,t);else{var n="im_update_tabs_"+gn.tabId;window.localStorage.setItem(n,gn.tabId),window.localStorage.removeItem(n)}if(an[rt.LOGIN]){var e=Qt.resultNotice(rt.LOGIN,{code:tt.SUCCESS,loginState:t.data.loginState,uid:t.data.uid});an[rt.LOGIN](e)}}(e);break;case ct:!function(t){if(gn.curTab&&gn.sdkState.loginState===W.LOGGED){var n=Qt.createSign();Ot(yt.logoutPro(n),s)}gn.clearData(t.data.isBroadcast),t.data.isBroadcast&&(t.data.isBroadcast=!1,Dt.onMessageNotice(O,t));if(an[rt.LOGOUT]){var e=Qt.resultNotice(rt.LOGOUT,{code:t.data.code,msg:t.data.msg});an[rt.LOGOUT](e)}}(e);break;case dt:fn(e.data);break;case mt:!function(t){gn.curTab&&Dt.onMessageNotice(k,t);switch(gn.clearData(gn.curTab),t.data.code){case tt.KICKED_OUT:case tt.NO_REGISTER:if(an[rt.KICKED_OUT]){var n=Qt.resultNotice(rt.KICKED_OUT,t.data);an[rt.KICKED_OUT](n)}break;case tt.TOKEN_NOT_FOUND:if(an[rt.TOKEN_NOT_FOUND]){var e,o=Qt.resultNotice(rt.TOKEN_NOT_FOUND,null===(e=t.data)||void 0===e?void 0:e.msg,t.data.code);an[rt.TOKEN_NOT_FOUND](o)}}}(e);break;case pt:!function(t){t.shift?gn.msgHandleList.unshift(t):gn.msgHandleList.push(t);if(gn.handleMsgState)return;!function t(){new Promise((function(t,n){try{var e=gn.msgHandleList.shift().data;if(!e.onlyId){var o=gn.sdkState.uid===e.fromUid?e.toUid:e.fromUid,i=Qt.splicingC2CId(o);e=Qt.formatMsg(e,i)}e.type===nt.Notification?function(t,n){gn.curTab&&Dt.onMessageNotice(I,{type:pt,data:t});if(an[rt.MESSAGE_NOTIFICATION]){var e=Qt.resultNotice(rt.MESSAGE_NOTIFICATION,t);an[rt.MESSAGE_NOTIFICATION](e)}n()}(e,t):e.type>=64&&e.type<=99?function(t,n){switch(t.type){case nt.Recall:!function(t,n){var e={conversationID:t.conversationID,msgId:parseInt(t.text),type:nt.Revoked};if(an[rt.MESSAGE_REVOKED]){var o=Qt.resultNotice(rt.MESSAGE_REVOKED,[e]);an[rt.MESSAGE_REVOKED](o)}gn.curTab&&(Dt.onMessageNotice(N,{type:pt,data:t}),ln.updateMsg(e),fn({conversationID:t.conversationID,msgEnd:t.msgId,showMsgId:e.msgId,showMsgTime:t.msgTime,showMsgType:nt.Recall}));n()}(t,n);break;case nt.Unmatch:!function(t,n){Object.prototype.hasOwnProperty.call(gn.chatKeys,t.conversationID)&&(gn.curTab&&Dt.onMessageNotice(N,{type:pt,data:t}),fn({conversationID:t.conversationID,msgEnd:t.msgId,showMsgTime:t.msgTime,showMsgType:nt.Unmatch}),n())}(t,n);break;case nt.SysDelete:!function(t,n){if(gn.curTab){var e=t.content.split(",").map(Number);ln.deleteMsgs(t.conversationID,e),t.content=e,Dt.onMessageNotice(E,{type:pt,data:t})}var o=gn.chatKeys[t.conversationID];t.content.includes(null==o?void 0:o.showMsgId)&&fn({conversationID:t.conversationID,showMsgType:nt.Deleted,showMsg:""});if(an[rt.MESSAGE_DELETE]){var i=Qt.resultNotice(rt.MESSAGE_DELETE,{conversationID:t.conversationID,msgIds:t.content});an[rt.MESSAGE_DELETE](i)}n()}(t,n)}}(e,t):function(t,n){var e=t;if(an[rt.MESSAGE_RECEIVED]){var o=Qt.resultNotice(rt.MESSAGE_RECEIVED,[e]);an[rt.MESSAGE_RECEIVED](o)}if(gn.curTab){var i;Dt.onMessageNotice(N,{type:pt,data:e}),ln.addMsg(e),i=e.type===nt.Text?e.text:e.content;var s=gn.sdkState.uid,r={conversationID:e.conversationID,msgEnd:e.msgId,showMsgId:e.msgId,showMsgType:e.type,showMsg:i,showMsgTime:e.msgTime,myMove:e.fromUid!==s,showMsgFromUid:e.fromUid};e.fromUid!==s&&(r.unread=1),e.type===nt.Matched&&(r.matched=!0),e.type>=0&&e.type<=30&&(e.fromUid!==s?r.uChatI=!0:r.iChatU=!0),fn(r),n()}else n()}(e,t)}catch(t){n(t)}})).finally((function(){gn.msgHandleList.length>0?t():gn.handleMsgState=!1}))}()}(e)}};function Tn(t,n){return new Promise((function(e,o){return Qt.isNotWs(n.wsUrl)?o(Qt.parameterErr({name:P,key:"wsUrl"})):Qt.isNotString(n.imToken)?o(Qt.parameterErr({name:P,key:"imToken"})):Qt.isNotEmpty(n.subAppId)?o(Qt.parameterErr({name:P,key:"subAppId"})):void function(t,n,e,o){On(t).then((function(i){if(i.loginState&&i.loginState!==W.NOT_LOGIN){if((null==i?void 0:i.imToken)!==n.imToken)En(t).then((function(){vn(t,n,e,o)}));else if(i.loginState===W.LOGGED){i.chatsSync===X.SYNC_CHAT_SUCCESS&&(delete i.chatsSync,t.initChats()),Object.assign(t.sdkState,i);var s=Qt.resultSuc(P,{msg:"Logged in",uid:i.uid});e(s)}}else t.clearData(!0),vn(t,n,e,o)}))}(t,n,e,o)}))}function On(t){return new Promise((function(n,e){if(t.sdkState.loginState===W.LOGGED||t.curTab)n(t.sdkState);else{var o=Qt.createSign();window.localStorage.setItem("im_getSdkState",t.tabId),window.localStorage.removeItem("im_getSdkState"),t.stateCallEvents.has(o)&&(o+=1),t.stateCallEvents.set(o,{timeOut:Date.now()+3e3,callSuc:function(e){t.stateCallEvents.delete(o),n(e)},callErr:function(e){t.stateCallEvents.delete(o),n({loginState:W.NOT_LOGIN,chatsSync:X.NOT_SYNC_CHAT,connState:Y.NET_STATE_DISCONNECTED})}})}}))}function vn(t,n,e,o){window.localStorage.setItem("im_wsCurId",t.tabId),t.globalTimer(),Object.assign(t.sdkState,{loginState:W.LOGGING,wsUrl:n.wsUrl,imToken:n.imToken,subAppId:n.subAppId});var i={wsUrl:n.wsUrl,imToken:n.imToken,subAppId:n.subAppId,resolve:e,reject:o,connSuc:function(n){return Nn(t,n)},connErr:function(n,e){return In(t,n,e)}};Lt(t,i)}function Nn(t,n){t.handleMessage({type:gt,state:Y.NET_STATE_CONNECTED}),function(t,n){return new Promise((function(e,o){var s=Qt.createSign();t.callEvents.has(s)&&(s+=1),Qt.createCallEvent(t,{type:P,callSign:s,callSuc:function(t){e(t)},callErr:function(t){vt(),n.isReconect&&(null==t?void 0:t.code)===tt.NO_REGISTER&&wsConfig.Global.handleMessage({type:mt,data:t});var e=Qt.serverErr(t,P);o(e)}}),Ot(yt.loginPro(s,n.imToken,n.subAppId),i)}))}(t,n).then((function(e){if(!0!==(null==n?void 0:n.isReconect)){n.isReconect=!0,t.sdkState.uid=e.data.uid;var o=Qt.resultSuc(P,{msg:e.data.msg,uid:e.data.uid});n.resolve&&n.resolve(o),setTimeout((function(){t.handleMessage({type:ut,data:{uid:e.data.uid,loginState:W.LOGGED,wsUrl:n.wsUrl,imToken:n.imToken,subAppId:n.subAppId}})}),0)}else t.sdkState.uid=e.data.uid;cn(t)})).catch((function(t){n.reject&&n.reject(t)}))}function In(t,n,e){if(t.handleMessage({type:gt,state:Y.NET_STATE_DISCONNECTED}),!0!==n.isReconect&&n.reject){var o=Qt.resultErr("Failed to establish websocket connection",P,tt.CONNECTERR);n.reject(o)}}function En(t){return new Promise((function(n,e){var o={code:tt.SUCCESS,isBroadcast:!0,msg:"Success"};t.handleMessage({type:ct,data:o}),n(Qt.resultSuc(_,o))}))}function kn(t,n,e,o,i){var s=Qt.createSign();if(t.callEvents.has(s)&&(s+=1),Qt.createCallEvent(t,{type:V,callSign:s,callSuc:function(o){!function(t,n,e,o,i){if(t.curTab){var s=[];e.messages.forEach((function(t){if(t.type<64){var e=Qt.formatMsg(t,n.conversationID);s.unshift(e)}})),s.length>0&&ln.addMsgList(s),null!=i&&i.length&&s.push.apply(s,Object(ht.a)(i)),Cn(n,o,s)}else Cn(n,o,e.messages)}(t,n,o,e,i)},callErr:function(t){var n=Qt.serverErr(t,V);o(n)}}),t.curTab){var r=Qt.reformatC2CId(n.conversationID),g=n.msgEnd;null!=i&&i.length&&(g=i[0].msgId),Ot(yt.getMsgPro({sign:s,toUid:r,msgEnd:g}),c)}else Dt.onWebSocketNotice(V,{tabId:t.tabId,callSign:s,options:n,state:Q})}function Cn(t,n,e){var o=e.slice(0-t.pageSize);n(Qt.resultSuc(V,{conversationID:t.conversationID,messages:o,hasMore:e.length>=t.pageSize}))}function Un(t,n){return new Promise((function(e,o){var i=Qt.formatBody(t,n,o);if(!1!==i){var s=Qt.createSign(n.showMsgTime);if(t.callEvents.has(s)&&(s+=1),Qt.createCallEvent(t,{type:x,callSign:s,callSuc:function(o){!function(t,n,e,o){if(t.curTab){var i=JSON.parse(JSON.stringify(n));i.msgId=e.data.msgId,i.msgTime=e.data.msgTime,i.sendStatus=q.BFIM_MSG_STATUS_SEND_SUCC,t.handleMessage({type:pt,shift:!0,data:i})}var s=Qt.resultSuc(x,{conversationID:n.conversationID,msgId:e.data.msgId,sendStatus:q.BFIM_MSG_STATUS_SEND_SUCC});o(s)}(t,n,o,e)},callErr:function(t){var n=Qt.serverErr(t,x);o(n)}}),t.curTab)Ot(yt.sendMsgPro(Object(Rt.a)(Object(Rt.a)({},n),{},{sign:s,body:i})),g);else Dt.onWebSocketNotice(x,{callSign:s,tabId:t.tabId,options:n,state:Q})}}))}function Mn(t,n){return new Promise((function(e,o){var i=Qt.formatBody(t,n,o);if(!1!==i){var s=Qt.createSign(n.showMsgTime);if(t.callEvents.has(s)&&(s+=1),Qt.createCallEvent(t,{type:J,callSign:s,callSuc:function(o){!function(t,n,e,o){if(t.curTab){var i=JSON.parse(JSON.stringify(n));i.msgId=e.data.msgId,i.msgTime=e.data.msgTime,i.sendStatus=q.BFIM_MSG_STATUS_SEND_SUCC,t.handleMessage({type:pt,shift:!0,data:i})}var s=Qt.resultSuc(J,{conversationID:n.conversationID,msgId:e.data.msgId,sendStatus:q.BFIM_MSG_STATUS_SEND_SUCC});o(s)}(t,n,o,e)},callErr:function(t){var n=Qt.serverErr(t,J);o(n)}}),t.curTab)Ot(yt.sendMsgPro(Object(Rt.a)(Object(Rt.a)({},n),{},{sign:s,body:i})),g);else Dt.onWebSocketNotice(J,{callSign:s,tabId:t.tabId,options:n,state:Q})}}))}function Bn(t,n){return new Promise((function(e,o){if(Qt.preJudge(t,o,K)){if(Qt.isNotObject(n,"conversationID","string")){var i=Qt.parameterErr({name:K,key:"conversationID"});return o(i)}if(Qt.isNotNumer(n.msgId,!0)){var s=Qt.parameterErr({name:K,key:"msgId"});return o(s)}var r=Qt.createSign();if(t.callEvents.has(r)&&(r+=1),Qt.createCallEvent(t,{type:K,callSign:r,callSuc:function(o){!function(t,n,e,o){t.curTab&&t.handleMessage({type:pt,shift:!0,data:e.data});var i=Qt.resultSuc(K,{conversationID:n.conversationID,msgId:n.msgId,type:nt.Revoked});o(i)}(t,n,o,e)},callErr:function(t){var n=Qt.serverErr(t,K);o(n)}}),t.curTab){var g=Qt.reformatC2CId(n.conversationID);Ot(yt.revokeMsgPro(r,g,n.msgId),d)}else Dt.onWebSocketNotice(K,{callSign:r,tabId:t.tabId,options:n,state:Q})}}))}var jn={TYPES:{WS_STATE:Y,SYNC_CHAT:X,SEND_STATE:q,ERROR_CODE:tt,MSG_TYPE:nt,IM_LOGIN_STATE:W},EVENT:rt,create:function(){return new Promise((function(t,n){var e;null!==Pn&&t(Pn),_n={timeOut:2e4,tabId:null===(e=_n)||void 0===e?void 0:e.tabId,curTab:!1,chatPageSize:20,maxChatPageSize:100,msgPageSize:20,maxMsgPageSize:100,heartBeatTimer:null,sdkState:{},callEvents:new Map,chatCallEvents:new Map,stateCallEvents:new Map,chatKeys:{},chatList:[],msgHandleList:[],handleMsgState:!1,updateTime:null,clearTimer:function(){var t;_n.curTab=!1,null!==(t=_n)&&void 0!==t&&t.heartBeatTimer&&clearInterval(_n.heartBeatTimer)},onConn:function(){_n.handleMessage({type:gt,state:Y.NET_STATE_CONNECTING})},reconnection:function(){var t;t=_n,window.localStorage.setItem("im_wsCurId",t.tabId),t.globalTimer(),On(t).then((function(n){if(n.wsUrl&&n.imToken){var e={wsUrl:n.wsUrl,imToken:n.imToken,subAppId:n.subAppId,isReconect:!0,connSuc:function(n){return Nn(t,n)},connErr:function(n,e){return In(t,n)}};Lt(t,e)}else En()}))},handleMessage:function(t){Ln(_n,Pn,t)},globalTimer:An,clearData:Dn,initChats:Gn};var o=Qt.uuid(),i=window.localStorage.getItem("im_windowHeartBeat"),s=JSON.parse(window.localStorage.getItem("im_wsTabs")||"[]");s.push(o),window.localStorage.setItem("im_wsTabs",JSON.stringify(s)),_n.tabId=o,(i||0)<(new Date).getTime()-3e3&&(Dt.clear(),vt(),ln.deleteDB(),window.localStorage.setItem("im_wsCurId",o),An()),window.addEventListener("unload",Rn),ln.initDB((function(){var n;Pn=n={login:function(t){return Tn(_n,t)},logout:function(){return En(_n)},sendMessage:function(t){return Un(_n,t)},resendMessage:function(t){return Mn(_n,t)},revokeMessage:function(t){return Bn(_n,t)},getMessageList:function(t){return function(t,n){return new Promise((function(e,o){if(Qt.preJudge(t,o,V)){if(Qt.isNotObject(n,"conversationID","string")){var i=Qt.parameterErr({name:V,key:"conversationID"});return o(i)}if(n.pageSize&&n.pageSize>t.maxMsgPageSize){var s=Qt.parameterErr({name:V,msg:"The maximum number of entries cannot exceed ".concat(t.maxMsgPageSize)});return o(s)}if(1===n.msgEnd){var r=Qt.resultSuc(V,{conversationID:n.conversationID,messages:[],hasMore:!1});return e(r)}var g=Object(Rt.a)({tabId:t.tabId,pageSize:t.msgPageSize},n);g.tabId!==t.tabId?kn(t,g,e,o):(ln.addChatKey(g.conversationID),ln.getMsgList(g).then((function(n){var i;n.length>=g.pageSize||1===(null===(i=n[0])||void 0===i?void 0:i.msgId)?Cn(g,e,n):kn(t,g,e,o,n)})))}}))}(_n,t)},setMessageRead:function(t){return function(t,n){return new Promise((function(e,o){if(Qt.preJudge(t,o,z)){if(Qt.isNotObject(n,"conversationID","string")){var i=Qt.parameterErr({name:z,key:"conversationID"});return o(i)}var s=Qt.createSign();if(t.callEvents.has(s)&&(s+=1),Qt.createCallEvent(t,{type:z,callSign:s,callSuc:function(t){var o=Qt.resultSuc(z,{conversationID:t.conversationID,msgId:n.msgId,msgTime:t.updateTime});e(o)},callErr:function(t){var n=Qt.serverErr(t,z);o(n)}}),t.curTab){var r=Qt.reformatC2CId(n.conversationID);Ot(yt.readMsgPro(s,r),m)}else Dt.onWebSocketNotice(z,{callSign:s,tabId:t.tabId,options:n,state:Q})}}))}(_n,t)},getConversationList:function(t){return function(t,n){return new Promise((function(e,o){if(Qt.preJudge(t,o,D)){if(null!=n&&n.pageSize&&Qt.isNotNumer(null==n?void 0:n.pageSize)){var i=Qt.parameterErr({name:D,key:"pageSize"});return o(i)}if(t.sdkState.chatsSync===X.SYNC_CHAT_SUCCESS)mn(t,n,e);else{var s=Qt.createSign();t.chatCallEvents.has(s)&&(s+=1),t.chatCallEvents.set(s,{callSuc:function(){t.chatCallEvents.delete(s),mn(t,n,e)},callErr:function(n){t.chatCallEvents.delete(s);var e=Qt.resultErr((null==n?void 0:n.msg)||"Failed to get the conversation list",D,(null==n?void 0:n.code)||tt.ERROR);o(e)}})}}}))}(_n,t)},getConversationProvider:function(t){return pn(_n,t)},updateConversationProvider:function(t){return function(t,n){return new Promise((function(e,o){if(Qt.preJudge(t,o,A)){if(Qt.isNotObject(n,"conversationID","string")){var i=Qt.parameterErr({name:A,key:"conversationID"});return o(i)}if(Object.prototype.hasOwnProperty.call(t.chatKeys,n.conversationID)){var s=t.chatKeys[n.conversationID];Object.assign(s,n);var r=Qt.resultSuc(A,s);e(r)}else ln.getChat(n.conversationID).then((function(t){if(t){var i=Object.assign(t,n),s=Qt.resultSuc(A,i);e(s)}else{var r=Qt.resultErr("Failed to update local session information",A,tt.ERROR);o(r)}}))}}))}(_n,t)},deleteConversation:function(t){return function(t,n){return new Promise((function(e,o){if(Qt.preJudge(t,o,G)){if(Qt.isNotObject(n,"conversationID","string")){var i=Qt.parameterErr({name:G,key:"conversationID"});return o(i)}var s=Qt.createSign();if(t.callEvents.has(s)&&(s+=1),Qt.createCallEvent(t,{type:G,callSign:s,callSuc:function(t){var o=Qt.resultSuc(G,{conversationID:n.conversationID,updateTime:t.data.updateTime,deleted:t.data.deleted});return e(o)},callErr:function(t){var n=Qt.serverErr(t,G);o(n)}}),t.curTab){var r=Qt.reformatC2CId(n.conversationID);Ot(yt.delChatPro(s,parseInt(r)),p)}else Dt.onWebSocketNotice(G,{callSign:s,tabId:t.tabId,options:n,state:Q})}}))}(_n,t)},createTextMessage:function(t){return function(t,n){var e;if(null==n||!n.to)return{code:tt.PARAMETER,msg:"Parameter 'to' cann't be empty"};if(null===(e=n.payload)||void 0===e||!e.text)return{code:tt.PARAMETER,msg:"Parameter 'text' cann't be empty"};var o=Qt.msgBase(n.to,t.sdkState.uid);return Object.assign(o,{type:nt.Text,text:n.payload.text}),{code:tt.SUCCESS,message:o}}(_n,t)},createImageMessage:function(t){return function(t,n){var e;if(null==n||!n.to)return{code:tt.PARAMETER,msg:"Parameter 'to' cann't be empty"};if(null===(e=n.payload)||void 0===e||!e.url)return{code:tt.PARAMETER,msg:"Parameter 'url' cann't be empty"};var o=Qt.msgBase(n.to,t.sdkState.uid);return Object.assign(o,{type:nt.Img,url:n.payload.url,width:n.payload.width,height:n.payload.height}),{code:tt.SUCCESS,message:o}}(_n,t)},createBusinessMessage:function(t){return function(t,n){var e,o;if(null==n||!n.to)return{code:tt.PARAMETER,msg:"Parameter 'to' cann't be empty"};if((null===(e=n.payload)||void 0===e?void 0:e.type)>30||(null===(o=n.payload)||void 0===o?void 0:o.type)<11)return{code:tt.PARAMETER,msg:"Type can only use 11-30"};var i=Qt.msgBase(n.to,t.sdkState.uid);return Object.assign(i,n.payload),{code:tt.SUCCESS,message:i}}(_n,t)},getCosKey:function(){return t=_n,new Promise((function(n,e){var o=Qt.createSign();t.callEvents.has(o)&&(o+=1),Qt.createCallEvent(t,{type:F,callSign:o,callSuc:function(t){var e=Qt.resultSuc(F,t.data);return n(e)},callErr:function(t){var n=Qt.serverErr(t,F);e(n)}}),t.curTab?Ot(yt.cosPro(o),w):Dt.onWebSocketNotice(F,{callSign:o,tabId:t.tabId,state:Q})}));var t},getAllUnreadCount:function(){return t=_n,new Promise((function(n,e){if(t.sdkState.chatsSync===X.SYNC_CHAT_SUCCESS){var o=t.chatList.reduce((function(t,n){return t+n.unread}),0),i=Qt.resultSuc(H,{unread:o||0});n(i)}else{var s=Qt.createSign();t.chatCallEvents.has(s)&&(s+=1),t.chatCallEvents.set(s,{callSuc:function(){t.chatCallEvents.delete(s);var e=t.chatList.reduce((function(t,n){return t+n.unread}),0),o=Qt.resultSuc(H,{unread:e});n(o)},callErr:function(){t.chatCallEvents.delete(s);var n=Qt.resultErr("Failed to get no reading",H,tt.ERROR);e(n)}})}}));var t},on:function(t,e){return function(t,n,e){t[n]=e}(n,t,e)},off:function(t){return function(t,n){t[n]=null}(n,t)}},window.addEventListener("storage",(function(t){Dt.watchStorage(t,Pn,_n)})),t(Pn)}))}))}};var Pn=null,_n=null;function Dn(t){t&&ln.clear(),Dt.clear(),vt(),_n.sdkState={loginState:W.NOT_LOGIN,chatsSync:X.NOT_SYNC_CHAT,connState:Y.NET_STATE_DISCONNECTED},_n.callEvents=new Map,_n.chatCallEvents=new Map,_n.stateCallEvents=new Map,_n.chatKeys={},_n.chatList=[],_n.msgHandleList=[],_n.handleMsgState=!1,_n.updateTime=null}function Rn(){var t=JSON.parse(window.localStorage.getItem("im_wsTabs")||"[]");t=t.filter((function(t){return t!=_n.tabId})),window.localStorage.setItem("im_wsTabs",JSON.stringify(t)),Dt.clear(0===t.length),vt(),0===t.length?ln.deleteDB():_n.curTab&&(_n.clearTimer(),_n.sdkState.loginState===W.LOGGED?window.localStorage.setItem("im_wsConnTab",t[0]):window.localStorage.setItem("im_wsCurId",t[0]))}function An(){_n.curTab=!0;var t=0;_n.heartBeatTimer&&clearInterval(_n.heartBeatTimer),_n.heartBeatTimer=setInterval((function(){var n=(new Date).getTime();window.localStorage.setItem("im_windowHeartBeat",n),(t+=1)%20==0&&function(){var t;if(1===(null===(t=St.ws)||void 0===t?void 0:t.readyState)){var n=(new Date).getTime();if(St.heartBeatTime+St.heartRate<=n){var e,i=yt.compress(yt.pingPro(),o);null===(e=St.ws)||void 0===e||e.send(i),St.heartBeatTime=n}}}(),_n.callEvents.forEach((function(t,e){t.timeOut<=n&&t.callErr({code:tt.TIMEOUT,msg:t.type+": connection timed out"})})),_n.stateCallEvents.forEach((function(t,e){t.timeOut<=n&&t.callErr()}))}),50)}function Gn(){ln.getChatList().then((function(t){t.forEach((function(t){var n=_n.chatKeys[t.conversationID];n?Object.assign(n,t):(_n.chatKeys[t.conversationID]=t,_n.chatList.push(t))})),_n.sdkState.chatsSync=X.SYNC_CHAT_SUCCESS,_n.chatCallEvents.forEach((function(t,n){t.callSuc()}))}))}n.a=jn}}]);