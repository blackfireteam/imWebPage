(function(t){function e(e){for(var o,i,a=e[0],g=e[1],l=e[2],u=0,c=[];u<a.length;u++)i=a[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&c.push(s[i][0]),s[i]=0;for(o in g)Object.prototype.hasOwnProperty.call(g,o)&&(t[o]=g[o]);d&&d(e);while(c.length)c.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,i=1;i<n.length;i++){var a=n[i];0!==s[a]&&(o=!1)}o&&(r.splice(e--,1),t=g(g.s=n[0]))}return t}var o={},i={app:0},s={app:0},r=[];function a(t){return g.p+"js/"+({home:"home",login:"login",register:"register"}[t]||t)+"."+{home:"9a3353b8",login:"b7d617a6",register:"550c12b7","chunk-5e3a6771":"de39eca8"}[t]+".js"}function g(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,g),n.l=!0,n.exports}g.e=function(t){var e=[],n={home:1,login:1,register:1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=new Promise((function(e,n){for(var o="css/"+({home:"home",login:"login",register:"register"}[t]||t)+"."+{home:"d618ab16",login:"197cbf37",register:"02c1cdb1","chunk-5e3a6771":"31d6cfe0"}[t]+".css",s=g.p+o,r=document.getElementsByTagName("link"),a=0;a<r.length;a++){var l=r[a],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===o||u===s))return e()}var c=document.getElementsByTagName("style");for(a=0;a<c.length;a++){l=c[a],u=l.getAttribute("data-href");if(u===o||u===s)return e()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=e,d.onerror=function(e){var o=e&&e.target&&e.target.src||s,r=new Error("Loading CSS chunk "+t+" failed.\n("+o+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=o,delete i[t],d.parentNode.removeChild(d),n(r)},d.href=s;var m=document.getElementsByTagName("head")[0];m.appendChild(d)})).then((function(){i[t]=0})));var o=s[t];if(0!==o)if(o)e.push(o[2]);else{var r=new Promise((function(e,n){o=s[t]=[e,n]}));e.push(o[2]=r);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,g.nc&&u.setAttribute("nonce",g.nc),u.src=a(t);var c=new Error;l=function(e){u.onerror=u.onload=null,clearTimeout(d);var n=s[t];if(0!==n){if(n){var o=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",c.name="ChunkLoadError",c.type=o,c.request=i,n[1](c)}s[t]=void 0}};var d=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(e)},g.m=t,g.c=o,g.d=function(t,e,n){g.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},g.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},g.t=function(t,e){if(1&e&&(t=g(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(g.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)g.d(n,o,function(e){return t[e]}.bind(null,o));return n},g.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return g.d(e,"a",e),e},g.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},g.p="",g.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var d=u;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"1fbb":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),i=(n("d3b7"),n("b0c0"),n("5502")),s=n("6c02"),r={setup:function(t){var e=Object(o["l"])().appContext.config.globalProperties,n=e.$IM,r=e.$msim,a=e.$message,g=e.$loading,l=Object(i["b"])(),u=Object(s["d"])(),c=Object(s["c"])(),d=Object(o["A"])({isInit:!1});function m(){var t=window.localStorage.getItem("wsUrL"),e=window.localStorage.getItem("imToken");r.login({wsUrl:t,imToken:e,subAppId:1}).then((function(t){l.commit("setUserId",t.data.uid),d.isInit=!0})).catch((function(t){d.isInit=!0,a({type:"error",message:(null===t||void 0===t?void 0:t.msg)||t}),u.push({name:"login"})})).finally((function(){g.hide()}))}function p(){r.on(n.EVENT.CONNECT_CHANGE,f),r.on(n.EVENT.LOGIN,b),r.on(n.EVENT.LOGOUT,y),r.on(n.EVENT.KICKED_OUT,S),r.on(n.EVENT.TOKEN_NOT_FOUND,w),r.on(n.EVENT.SYNC_CHATS_CHANGE,L),r.on(n.EVENT.MESSAGE_RECEIVED,v),r.on(n.EVENT.MESSAGE_REVOKED,T),r.on(n.EVENT.MESSAGE_DELETE,O),r.on(n.EVENT.MESSAGE_NOTIFICATION,I),r.on(n.EVENT.CONVERSATION_LIST_UPDATED,N)}function h(){window.localStorage.removeItem("userId"),window.localStorage.removeItem("wsUrL"),window.localStorage.removeItem("imToken"),l.commit("clear"),u.push({name:"login"})}function f(t){console.log("连接状态变更",t,(new Date).getTime())}function b(t){var e=window.localStorage.getItem("userId");console.log("登录成功",e,t,(new Date).getTime()),e&&(l.commit("setUserId",e),"login"===c.name&&u.push({name:"home"}))}function y(t){console.log("退出成功",t),h()}function S(t){console.log("被踢",t),h()}function w(t){console.log("token失效",t),h()}function L(t){console.log("同步会话",t)}function v(t){console.log("接收到消息",t),l.commit("updateMsgs",t.data)}function T(t){console.log("接收到撤回消息",t),l.commit("revokeMsgs",t.data)}function O(t){console.log("接收到删除指令消息",t),l.commit("deleteMsgs",t.data)}function I(t){console.log("接收到通知消息",t)}function N(t){console.log("会话列表更新",t.data),l.commit("updateChats",t.data),r.getAllUnreadCount().then((function(t){l.commit("setUnread",t.data.unread)}))}return Object(o["u"])((function(){p(),window.localStorage.getItem("userId")?(g.show(),m()):d.isInit=!0})),function(t,e){var n=Object(o["E"])("router-view");return Object(o["H"])(d).isInit?(Object(o["w"])(),Object(o["d"])(n,{key:0})):Object(o["e"])("",!0)}}},a=(n("7735"),r),g=(n("3ca3"),n("ddb0"),Object(s["b"])()),l=Object(s["a"])({history:g,routes:[{path:"/login",name:"login",component:function(){return n.e("login").then(n.bind(null,"dd1d"))}},{path:"/register",name:"register",component:function(){return n.e("register").then(n.bind(null,"cbf3"))}},{path:"/home",name:"home",component:function(){return n.e("home").then(n.bind(null,"d1f2"))}}]});l.beforeEach((function(t,e,n){var o=window.localStorage.getItem("userId");o||"login"===t.name||"register"===t.name?t.name?n():n("/home"):n("/login")}));var u=l,c=n("2909"),d=(n("4160"),n("159b"),n("4de4"),n("7db0"),n("4e82"),n("caad"),n("2532"),n("d81d"),Object(i["a"])({state:function(){return{curUserId:null,chatList:[],msgList:[],curChat:null,allUnread:0}},mutations:{clear:function(t){t.curUserId=null,t.chatList=[],t.msgList=[],t.curChat=null,t.allUnread=0},setUserId:function(t,e){t.curUserId=e},setUnread:function(t,e){t.allUnread=e},refreshChats:function(t,e){t.chatList=e},addChats:function(t,e){var n;(n=t.chatList).push.apply(n,Object(c["a"])(e))},addChat:function(t,e){t.chatList.unshift(e)},changeChat:function(t,e){t.curChat=e,t.msgList=[]},updateChats:function(t,e){e.forEach((function(e){if(e.deleted)t.chatList=t.chatList.filter((function(n){return t.curChat&&e.conversationID===t.curChat.conversationID&&(t.curChat=null),n.conversationID!==e.conversationID}));else{var n=t.chatList.find((function(t){return t.conversationID===e.conversationID}));n?Object.assign(n,e):t.chatList.unshift(e)}})),t.chatList.sort((function(t,e){return e.showMsgTime-t.showMsgTime})),!t.curChat&&t.chatList.length&&(t.curChat=t.chatList[0],t.msgList=[])},addMsgs:function(t,e){var n;(n=t.msgList).unshift.apply(n,Object(c["a"])(e))},addMsg:function(t,e){t.msgList.push(e)},updateMsgs:function(t,e){t.curChat&&e.forEach((function(e){if(e.conversationID===t.curChat.conversationID){var n=t.msgList.find((function(t){return t.onlyId===e.onlyId}));n?Object.assign(n,e):t.msgList.push(e)}}))},revokeMsgs:function(t,e){t.curChat&&e.forEach((function(e){if(e.conversationID===t.curChat.conversationID){var n=t.msgList.find((function(t){return t.msgId===e.msgId}));n&&Object.assign(n,e)}}))},deleteMsgs:function(t,e){var n;(null===(n=t.curChat)||void 0===n?void 0:n.conversationID)===e.conversationID&&(t.msgList=t.msgList.filter((function(t){return!e.msgIds.includes(t.msgId)})))},updateMsg:function(t,e){t.msgList=t.msgList.map((function(t){return t.conversationID===e.conversationID&&t.onlyId===e.onlyId?Object.assign(t,e):t}))}}})),m=d,p=n("bc3a"),h=n.n(p);function f(t){var e=document.createElement("div");e.innerText=t.message;var n="ui-message";switch(t.type){case"success":n+=" ui-message-success";break;case"error":n+=" ui-message-error";break;case"info":n+=" ui-message-info";break;default:break}e.setAttribute("class",n);var o=setTimeout((function(){document.body.removeChild(e),clearTimeout(o)}),3e3);e.addEventListener("mouseenter",(function(){clearTimeout(o)})),e.addEventListener("mouseleave",(function(){o=setTimeout((function(){document.body.removeChild(e),clearTimeout(o)}),3e3)})),document.body.appendChild(e)}var b=n("6199"),y=n.n(b),S="https://im.ekfree.com:18788/",w=h.a.create({baseURL:S});w.interceptors.request.use((function(t){var e="asfasdasd123",n=Math.ceil(1e10*Math.random()),o=1e3*(new Date).getTime(),i=y()(e+n+o);return t.headers["nonce"]=n,t.headers["timestamp"]=o,t.headers["sig"]=i,t.headers["app_id"]=1,t}),(function(t){Promise.reject(t)})),w.interceptors.response.use((function(t){var e=t.data;if(e&&0===e.code)return t.data;var n="接口参数错误";return 2001===e.code?n="图形验证码错误":e&&e.msg&&(n=e.msg),f({type:"error",message:n}),Promise.reject(e)}),(function(t){return Promise.reject(t)}));var L=w,v={Ping:0,ImLogin:1,ImLogout:2,Result:3,ChatS:4,ChatSR:5,ChatR:6,ChatRBatch:7,GetHistory:8,Revoke:9,MsgRead:10,DelChat:11,GetChatList:12,ChatItem:13,ChatItemUpdate:14,ChatList:15,GetProfile:16,GetProfiles:17,Profile:18,ProfileList:19,GetChat:20,GetCosKey:21,CosKey:22,UpdatePushToken:23,ProfileOnline:50,UsrOffline:52,Signup:53,FetchSpark:54,Spark:55,Sparks:56,GetImToken:57},T={Online:"online",Offline:"offline",UpdateChat:"updateChat",ReceivedMsg:"receivedMessage",NotificationMsg:"notificationMsg",DeleteMsg:"deleteMsg",ErrorType:"errorType",SyncChatsChange:"syncChatsChange",SyncMsgs:"syncMsgs",WsStateChange:"wsStateChange"},O={Message:"im_onMessage_",WS:"im_onWebsocket_"},I={Login:"login",Logout:"logout",GetChats:"getConversationList",GetChat:"getConversationProvider",GetProfiles:"getProfileList",UpdateLocalChat:"updateConversationProvider",DelChat:"deleteConversation",GetMsgs:"getMessageList",Read:"setMessageRead",Send:"sendMessage",Resend:"resendMessage",Revoke:"revokeMessage",GetCosKey:"getCosKey",GetAllUnread:"getAllUnreadCount"},N={NET_STATE_DISCONNECTED:"disconnect",NET_STATE_CONNECTING:"connecting",NET_STATE_CONNECTED:"connected"},C={NOT_LOGIN:"notLogin",LOGGING:"logging",LOGGED:"logged"},E={NOT_SYNC_CHAT:"NotSyncChat",SYNC_CHAT_START:"syncChatStart",SYNC_CHAT_SUCCESS:"syncChatSuccess",SYNC_CHAT_FAILED:"syncChatFailed"},k={BFIM_MSG_STATUS_SENDING:0,BFIM_MSG_STATUS_SEND_SUCC:1,BFIM_MSG_STATUS_SEND_FAIL:2},U={Pending:0,Fulfilled:1,Rejected:2},M={SUCCESS:0,ERROR:1,TOKEN_NOT_FOUND:4,NO_REGISTER:9,SIGNED:11,KICKED_OUT:2008,TIMEOUT:3e3,DISCONNECT:3001,CONNECTERR:3002,CONNECTING:3003,EXITING:3333,LOGGING:3334,DBERR:6005,NOLOGIN:6014,PARAMETER:9001},j={Text:0,Img:1,Audio:2,Video:3,Location:4,Card:5,Revoked:31,Matched:33,Recall:64,Unmatch:65,SysDelete:66,Deleted:67,Notification:100},P={MsgLastRead:0,Unread:1,IBlockU:2,Deleted:3},B={CONNECT_CHANGE:"onConnectChange",LOGIN:"onLogin",LOGOUT:"onLogout",SYNC_CHATS_CHANGE:"onSyncChatsChange",MESSAGE_RECEIVED:"onReceivedMessage",MESSAGE_REVOKED:"onRevokedMessage",MESSAGE_NOTIFICATION:"onNotificationMessage",MESSAGE_DELETE:"onDeleteMessage",CONVERSATION_LIST_UPDATED:"onConversationListUpdated",KICKED_OUT:"onKickedOut",TOKEN_NOT_FOUND:"onTokenNotFound"},D={WsStateChange:"WsStateChange",SyncChatsChange:"SyncChatsChange",SyncMsgs:"SyncMsgs",ImLogin:"ImLogin",ImLogout:"ImLogout",ChatItemUpdate:"ChatItemUpdate",ResultError:"ResultError",ChatR:"ChatR"},R=(n("ace4"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("fb6a"),n("99cb")),_=(n("99af"),n("acff"));function A(t,e){var n=t,o=0;t.length>10&&(o=1,n=_["a"].deflate(t,{level:5,to:"Uint8Array"}));var i=new Uint8Array([e,o].concat(Object(c["a"])(n)));return i}function G(t){var e=R["GetCosKey"].encode(R["GetCosKey"].fromObject({sign:t})).finish();return e}function V(t,e,n){var o=R["ImLogin"].encode(R["ImLogin"].fromObject({sign:t,token:e,subApp:n})).finish();return o}function z(t){var e=R["ImLogout"].encode(R["ImLogout"].fromObject({sign:t})).finish();return e}function x(){var t=R["Ping"].encode(R["Ping"].fromObject({type:0})).finish();return t}function K(t,e){var n=R["GetChatList"].encode(R["GetChatList"].fromObject({sign:t,updateTime:e})).finish();return n}function J(t,e){var n=R["GetChat"].encode(R["GetChat"].fromObject({sign:t,uid:e})).finish();return n}function F(t,e){var n=R["DelChat"].encode(R["DelChat"].fromObject({sign:t,toUid:e})).finish();return n}function H(t){t.offset=t.pageSize||20;var e=R["GetHistory"].encode(R["GetHistory"].fromObject(t)).finish();return e}function W(t){var e=R["ChatS"].encode(R["ChatS"].fromObject(t)).finish();return e}function Y(t,e,n){var o=R["Revoke"].encode(R["Revoke"].fromObject({sign:t,toUid:e,msgId:n})).finish();return o}function $(t,e){var n=R["MsgRead"].encode(R["MsgRead"].fromObject({sign:t,toUid:e})).finish();return n}var q={compress:A,loginPro:V,logoutPro:z,chatListPro:K,delChatPro:F,pingPro:x,getMsgPro:H,sendMsgPro:W,revokeMsgPro:Y,readMsgPro:$,chatPro:J,cosPro:G},X=q,Q={ws:null,Global:null,heartRate:3e4,heartBeatTime:null,reconnectNum:0,closeState:!1,reconnectTimer:null,wsStatus:!1,chatListEvent:null,chatFormatList:[]},Z=[M.SUCCESS,M.TOKEN_NOT_FOUND,M.KICKED_OUT];function tt(t,e){it(),Q.closeState=!0,Q.Global=t,st(e),window.removeEventListener("online",et(e)),window.addEventListener("online",et(e)),window.addEventListener("offline",(function(){Q.ws.close()}))}function et(t){Q.closeState||1===Q.ws.readyState||(Q.wsStatus=!1,Q.ws?Q.ws.close():at(t))}function nt(t,e){var n;Q.heartBeatTime=(new Date).getTime();var o=X.compress(t,e);null===(n=Q.ws)||void 0===n||n.send(o)}function ot(){Q.ws&&(console.warn("手动关闭连接"),Q.closeState=!0,Q.ws.close()),it()}function it(){Q.reconnectTimer&&clearTimeout(Q.reconnectTimer),Q.reconnectTimer=null,Q.ws=null,Q.Global=null,Q.heartBeatTime=null,Q.chatListEvent=null,Q.wsStatus=!1,Q.chatFormatList=[],Q.reconnectNum=0}function st(t){Q.Global.onConn();var e=new WebSocket(t.wsUrl);e.binaryType="arraybuffer",e.onopen=function(e){Q.reconnectNum=0,Q.closeState=!1,Q.heartBeatTime=(new Date).getTime(),t.connSuc(t)},e.onmessage=gt,e.onclose=function(e){console.log("Connection closed.",e),at(t),t.connErr(t,e)},e.onerror=function(e){console.log("Connection Error",e),at(t)},Q.ws=e}function rt(){var t;if(1===(null===(t=Q.ws)||void 0===t?void 0:t.readyState)){var e=(new Date).getTime();if(Q.heartBeatTime+Q.heartRate<=e){var n=X.compress(X.pingPro(),v.Ping);Q.ws.send(n),Q.heartBeatTime=e}}}function at(t){Q.wsStatus||Q.closeState||(Q.wsStatus=!0,Q.reconnectTimer=setTimeout((function(){0===Q.reconnectNum?Q.reconnectNum=250:Q.reconnectNum*=2,st(t),Q.wsStatus=!1}),Q.reconnectNum))}function gt(t){var e=new Uint8Array(t.data.slice(0,1))[0],n=t.data.slice(2);switch(1===new Uint8Array(t.data.slice(1,2))[0]&&(n=_["a"].inflate(n,{to:"Uint8Array"})),n=new Uint8Array(n),e){case v.Result:ct(n);break;case v.ChatList:mt(n);break;case v.ChatRBatch:pt(n);break;case v.ChatR:ft(n);break;case v.ChatSR:ht(n);break;case v.ChatItemUpdate:yt(n);break;case v.ChatItem:bt(n);break;case v.CosKey:dt(n);break;default:break}}function lt(t,e){return t.toObject(t.decode(e),{defaults:!0})}function ut(t){var e=Q.Global.callEvents,n=null;return Object.prototype.hasOwnProperty.call(t,"sign")&&(n=e[t.sign]),n}function ct(t){var e,n=lt(R["Result"],t),o=n.code,i=ut(n);if((null===i||void 0===i?void 0:i.type)!==I.Login||Z.includes(o))switch(o){case M.SUCCESS:if(!i)return;i.type===I.GetChats?(Q.chatListEvent=i,Q.chatFormatList=[]):(null===i||void 0===i?void 0:i.callSuc)&&i.callSuc({data:n});break;case M.ERROR:(null===i||void 0===i?void 0:i.callErr)&&i.callErr(n);break;case M.TOKEN_NOT_FOUND:case M.KICKED_OUT:Q.closeState=!0,Q.ws.close(),Q.Global.handleMessage({type:D.ResultError,data:n}),(null===i||void 0===i?void 0:i.callErr)&&i.callErr(n);break;case 12:(null===i||void 0===i?void 0:i.callSuc)&&i.callSuc({chats:[],hasMore:!1});break;default:(null===i||void 0===i?void 0:i.callErr)&&i.callErr(n);break}else null===(e=Q.ws)||void 0===e||e.close()}function dt(t){var e=lt(R["CosKey"],t),n=ut(e);(null===n||void 0===n?void 0:n.callSuc)&&n.callSuc({data:e})}function mt(t){var e,n,o=lt(R["ChatList"],t);(e=Q.chatFormatList).push.apply(e,Object(c["a"])(o.chatItems)),o.updateTime&&null!==(n=Q.chatListEvent)&&void 0!==n&&n.callSuc&&(Q.chatListEvent.callSuc({chats:Q.chatFormatList,updateTime:o.updateTime}),Q.chatListEvent=null,Q.chatFormatList=[])}function pt(t){var e=lt(R["ChatRBatch"],t),n=ut(e);(null===n||void 0===n?void 0:n.callSuc)&&n.callSuc({messages:e.msgs})}function ht(t){var e=lt(R["ChatSR"],t),n=ut(e);(null===n||void 0===n?void 0:n.callSuc)&&n.callSuc({data:e})}function ft(t){var e=lt(R["ChatR"],t),n=ut(e);n?(null===n||void 0===n?void 0:n.callSuc)&&n.callSuc({data:e}):Q.Global.handleMessage({type:D.ChatR,data:e})}function bt(t){var e=lt(R["ChatItem"],t),n=ut(e);(null===n||void 0===n?void 0:n.callSuc)&&n.callSuc({data:e})}function yt(t){var e=lt(R["ChatItemUpdate"],t);Q.Global.handleMessage({type:D.ChatItemUpdate,data:e});var n=ut(e);(null===n||void 0===n?void 0:n.callSuc)&&n.callSuc({data:e})}var St=n("53ca"),wt=(n("c975"),n("ac1f"),n("1276"),[]),Lt={clear:Ot,watchStorage:It,onMessageNotice:Pt,onWebSocketNotice:jt};function vt(t,e){wt.push(t),window.localStorage.setItem(t,JSON.stringify(e))}function Tt(t){window.localStorage.removeItem(t),wt=wt.filter((function(e){return e!==t}))}function Ot(t){while(wt.length>0){var e=wt.pop();window.localStorage.removeItem(e)}t&&(window.localStorage.removeItem("im_windowHeartBeat"),window.localStorage.removeItem("im_wsCurId"),window.localStorage.removeItem("im_wsTabs"),window.localStorage.removeItem("im_wsConnTab"))}function It(t,e,n){if(t.key&&t.newValue)if("im_wsCurId"!==t.key){if("im_getSdkState"===t.key&&n.curTab&&window.localStorage.setItem("im_setSdkState",JSON.stringify({tabId:t.newValue,sdkState:n.sdkState})),"im_setSdkState"===t.key){var o=kt(t.newValue);if(o.tabId===n.tabId)for(var i in window.localStorage.removeItem("im_setSdkState"),n.stateCallEvents)n.stateCallEvents[i].callSuc(o.sdkState)}if(0===t.key.indexOf("im_update_tabs_")&&n.curTab&&n.updateTabs&&(n.updateTabs.push(t.newValue),window.localStorage.setItem("im_wsTabs",JSON.stringify(n.updateTabs))),"im_wsConnTab"===t.key&&t.newValue===n.tabId)return n.reconnection(),void window.localStorage.removeItem("im_wsConnTab");if(0!==t.key.indexOf(O.Message))0!==t.key.indexOf(O.WS)||Mt(t,e,n);else{var s=JSON.parse(t.newValue);n.handleMessage(s)}}else t.newValue===n.tabId?n.globalTimer():n.curTab&&n.clearTimer()}function Nt(t,e,n){Tt(t);var o=e.callEvents[n.callSign];n.state===U.Fulfilled?o&&o.callSuc(n):n.state===U.Rejected&&o&&o.callErr(n.err)}function Ct(t,e,n){n.state=U.Rejected,n.err=t,vt(e,n)}function Et(t,e,n){n.state=U.Fulfilled,n.data=t,vt(e,n)}function kt(t){if("string"==typeof t)try{var e=JSON.parse(t);return!("object"!=Object(St["a"])(e)||!e)&&e}catch(n){return!1}}function Ut(t,e,n){switch(t){case I.Logout:return e.logout();case I.GetChat:return e.getConversationProvider(n.options);case I.DelChat:return e.deleteConversation(n.options);case I.GetMsgs:return n.options.tabId=n.tabId,e.getMessageList(n.options);case I.Read:return e.setMessageRead(n.options);case I.Send:return e.sendMessage(n.options);case I.Resend:return e.resendMessage(n.options);case I.Revoke:return e.revokeMessage(n.options);case I.GetCosKey:return e.getCosKey();case I.GetAllUnread:return e.getAllUnreadCount();default:return!1}}function Mt(t,e,n){var o=kt(t.newValue);if(!1!==o)if(n.curTab&&o.state===U.Pending){var i=t.key.split("_")[2],s=Ut(i,e,o);if(!s)return;s.then((function(e){i===I.GetMsgs?(o.state=U.Fulfilled,o.hasMore=e.data.hasMore,o.messages=e.data.messages,vt(t.key,o)):Et(e.data,t.key,o)})).catch((function(e){Ct(e,t.key,o)}))}else o.tabId===n.tabId&&Nt(t.key,n,o)}function jt(t,e){var n="".concat(O.WS+t,"_").concat(e.tabId,"_").concat(e.callSign,";");vt(n,e)}function Pt(t,e){var n=O.Message+t;vt(n,e),Tt(n)}var Bt=Lt,Dt=n("5530");n("c740"),n("a15b"),n("e25e");function Rt(t,e){var n=t.sort((function(t,n){return n[e]-t[e]}));return n}function _t(t,e,n,o){if(!t)return n;if(null===n||void 0===n||!n.length)return[];var i=n.findIndex((function(n){return n[e]===t}));return-1!==i&&i!==n.length-1?n.slice(i+1,i+1+o):[]}function At(){for(var t=[],e="0123456789abcdef",n=0;n<36;n++)t[n]=e.substr(Math.floor(16*Math.random()),1);t[14]="4",t[19]=e.substr(3&t[19]|8,1),t[8]=t[13]=t[18]=t[23]="-";var o=t.join("");return o}function Gt(t,e){return e?"string"!==typeof t:"string"!==typeof t||""===t}function Vt(t,e){return e?"number"!==typeof t||0===t:"number"!==typeof t}function zt(t,e){var n=new Blob([t],{type:"application/json"}).size;return n>(e||3072)}function xt(t){return null===t||void 0===t}function Kt(t){return"string"!==typeof t||0!==t.indexOf("http://")&&0!==t.indexOf("https://")}function Jt(t){return"string"!==typeof t||0!==t.indexOf("ws://")&&0!==t.indexOf("wss://")}function Ft(t,e,n){if("object"!==Object(St["a"])(t))return!0;if(e)switch(n){case"string":return Gt(t[e]);case"number":return Vt(t[e]);case"http":return Kt(t[e]);case"ws":return Jt(t[e]);default:return xt(t[e])}}function Ht(t){return"".concat(t," parameter type is wrong or does not exist")}function Wt(t,e){return"".concat(t,"_").concat(e)}function Yt(t){return Math.round(1e3*(t||(new Date).getTime()+Math.random()))}function $t(t,e,n){return{name:e,code:n||M.ERROR,msg:t}}function qt(t,e){return{name:e,code:t.code||M.ERROR,msg:t.msg}}function Xt(t){return{code:M.PARAMETER,name:t.name,msg:t.msg||Ht(t.key)}}function Qt(t,e){return{code:M.SUCCESS,name:t,data:JSON.parse(JSON.stringify(e))}}function Zt(t,e,n){return{name:t,code:n||M.SUCCESS,data:JSON.parse(JSON.stringify(e))}}function te(t,e){var n=(new Date).getTime(),o=Yt(n),i=ee(t),s=Wt(i,o);return{onlyId:s,conversationID:i,toUid:t,fromUid:e,msgId:0,showMsgTime:n,sendStatus:k.BFIM_MSG_STATUS_SENDING}}function ee(t){return"C2C_"+t}function ne(t){return t.slice(4)}function oe(t,e){var n={conversationID:e,fromUid:t.fromUid,toUid:t.toUid,type:t.type,msgId:t.msgId,newMsg:t.newMsg,msgTime:t.msgTime,sendStatus:k.BFIM_MSG_STATUS_SEND_SUCC};switch(n.onlyId=t.onlyId||Wt(e,t.sign||t.msgTime),n.showMsgTime=parseInt(t.msgTime/1e3)||t.showMsgTime,n.type){case j.Recall:n.text=t.body;break;case j.Revoked:n.text=t.body;break;case j.Text:n.text=t.body;break;case j.Img:n.url=t.body,n.height=t.height,n.width=t.width;break;case j.Audio:n.url=t.body,n.duration=t.duration;break;case j.Video:n.url=t.body,n.thumb=t.thumb,n.height=t.height,n.width=t.width,n.duration=t.duration;break;case j.Location:n.title=t.title,n.lat=t.lat,n.lng=t.lng,n.zoom=t.zoom;break;default:n.content=t.body,n.title=t.title,n.lat=t.lat,n.lng=t.lng,n.zoom=t.zoom,n.thumb=t.thumb,n.height=t.height,n.width=t.width,n.duration=t.duration;break}return n}function ie(t,e){var n=Object(Dt["a"])({},t);return delete n.sign,n.showTime=parseInt(t.showMsgTime/1e3),n.conversationID=ee(t.uid),t.msgEnd&&(n.showMsgFromUid=t.myMove?t.uid:e),n}function se(t,e){t.callEvents[e.callSign]={tabId:t.tabId,type:e.type,timeOut:(new Date).getTime()+t.timeOut,callSuc:function(n){delete t.callEvents[e.callSign],e.callSuc&&e.callSuc(n)},callErr:function(n){delete t.callEvents[e.callSign],e.callErr&&e.callErr(n)}}}function re(t,e,n){if(t.sdkState.loginState===C.NOT_LOGIN){var o=$t("Imsdk is not logged",n,M.NOLOGIN);return e(o),!1}if(t.curTab&&t.sdkState.connState!==N.NET_STATE_CONNECTED){var i=$t("disconnected",n,M.DISCONNECT);return e(i),!1}return!0}var ae={getPageSize:_t,sort:Rt,uuid:At,isNotString:Gt,isNotNumer:Vt,isNotObject:Ft,isNotEmpty:xt,isNotSize:zt,isNotHttp:Kt,isNotWs:Jt,createOnlyId:Wt,createSign:Yt,resultErr:$t,serverErr:qt,parameterErr:Xt,resultSuc:Qt,resultNotice:Zt,msgBase:te,splicingC2CId:ee,reformatC2CId:ne,formatMsg:oe,formatChat:ie,emptyTip:Ht,createCallEvent:se,preJudge:re},ge=(n("25f0"),n("4dec")),le="imWsDB",ue=null,ce=1,de="im_msimSdkInfo",me="im_chatHistory",pe="im_chatList",he=["&conversationID","uid","msgEnd","msgLastRead","showMsgId","showMsgType","showMsg","showMsgTime","showTime","showMsgFromUid","unread","matched","newMsg","myMove","iceBreak","tipFree","topAlbum","iBlockU","iChatU","uChatI","deleted"],fe=["&onlyId","conversationID","fromUid","toUid","msgId","msgTime","showMsgTime","sendStatus","text","url","type","thumb","width","height","duration","title","lat","lng","zoom","content","sput","newMsg"],be=["&conversationID"],ye={chatList:he.join(),msgList:fe.join(),chatHistory:be.join()},Se={};function we(t){var e=Object.prototype.toString;return e.call(t).slice(8,-1)}function Le(t,e){switch(t){case de:"Object"!==we(e)&&(e=null);break;case me:case pe:"Array"!==we(e)&&(e=[]);break}return e}function ve(t){try{var e=window.localStorage.getItem(t);return e=JSON.parse(e),Le(t,e)}catch(n){return Le(t,null)}}function Te(t,e){window.localStorage.setItem(t,JSON.stringify(e))}Se.initDB=function(t){var e=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;e?(ue=new ge["a"](le),ue.version(ce).stores(ye),ue.open().then((function(e){ce=ue.verno,t()})).catch((function(e){ue=null,t(),console.warn(e)}))):t()},Se.deleteDB=function(){ge["a"].delete(le),window.localStorage.removeItem(de),window.localStorage.removeItem(me),window.localStorage.removeItem(pe)},Se.clear=function(){var t;null!==(t=ue)&&void 0!==t&&t.isOpen&&ue.isOpen()?ue.transaction("rw",ue.tables,(function(){ue.tables.forEach((function(t){t.clear()}))})):(window.localStorage.removeItem(de),window.localStorage.removeItem(me),window.localStorage.removeItem(pe))},Se.addChatList=function(t){var e;if(null!==(e=ue)&&void 0!==e&&e.isOpen&&ue.isOpen())ue.chatList.bulkPut(t);else{var n=ve(pe);n=n.concat(t),Te(pe,n)}},Se.updateChat=function(t){var e;if(null!==(e=ue)&&void 0!==e&&e.isOpen&&ue.isOpen())return ue.chatList.put(t);var n=ve(pe),o=t;return n=n.map((function(e){return e.conversationID===t.conversationID&&(o=Object.assign(e,t)),e})),Te(pe,n),Promise.resolve(o)},Se.getChatList=function(){var t;if(null!==(t=ue)&&void 0!==t&&t.isOpen&&ue.isOpen())return ue.chatList.toCollection().and((function(t){return!1===t.deleted})).toArray();var e=ve(pe);return e=e.filter((function(t){return!1===t.deleted})),Promise.resolve(e)},Se.getChat=function(t){var e;if(null!==(e=ue)&&void 0!==e&&e.isOpen&&ue.isOpen())return ue.chatList.get({conversationID:t});var n=ve(pe),o=n.find((function(e){return e.conversationID===t}));return Promise.resolve(o)},Se.addChatKey=function(t){var e;if(null!==(e=ue)&&void 0!==e&&e.isOpen&&ue.isOpen())ue.chatHistory.put({conversationID:t});else{var n=ve(me),o=n.find((function(e){return e.conversationID===t}));o||(n.push({conversationID:t}),Te(me,n))}},Se.getChatKeys=function(){var t;return null!==(t=ue)&&void 0!==t&&t.isOpen&&ue.isOpen()?ue.chatHistory.toArray():Promise.resolve(ve(me))},Se.addMsgList=function(t){var e;null===(e=ue)||void 0===e||e.msgList.bulkPut(t)},Se.getMsgList=function(t){var e;return!0!==((null===(e=ue)||void 0===e?void 0:e.isOpen)&&ue.isOpen())?Promise.resolve([]):t.msgEnd?ue.msgList.toCollection().and((function(e){return e.conversationID===t.conversationID&&e.msgId<t.msgEnd})).sortBy("msgId"):ue.msgList.where({conversationID:t.conversationID}).sortBy("msgId")},Se.addMsg=function(t){var e;null===(e=ue)||void 0===e||e.msgList.put(t)},Se.updateMsg=function(t){var e;null===(e=ue)||void 0===e||e.msgList.where({conversationID:t.conversationID,msgId:t.msgId}).modify(t)},Se.deleteMsgs=function(t,e){var n,o;e?null===(n=ue)||void 0===n||n.msgList.toCollection().and((function(n){return n.conversationID===t&&e.includes(n.msgId.toString())})).delete():null===(o=ue)||void 0===o||o.msgList.where({conversationID:t}).delete()};var Oe,Ie,Ne=Se,Ce=n("1da1");n("96cf"),n("a9e3"),n("6062"),n("13d5");function Ee(t){t.handleMessage({type:D.SyncChatsChange,state:E.SYNC_CHAT_START});var e=ae.createSign();ae.createCallEvent(t,{type:I.GetChats,callSign:e,callSuc:function(e){e.updateTime&&e.updateTime>t.updateTime&&(t.updateTime=e.updateTime),e.chats.length>0?t.sdkState.chatsSync===E.SYNC_CHAT_SUCCESS?Ue(t,e.chats):ke(t,e.chats):t.handleMessage({type:D.SyncChatsChange,state:E.SYNC_CHAT_SUCCESS,chats:[]})},callErr:function(e){t.handleMessage({type:D.SyncChatsChange,state:E.SYNC_CHAT_FAILED,err:e})}});var n=X.chatListPro(e,t.updateTime);nt(n,v.GetChatList)}function ke(t,e){Me(t,e)}function Ue(t,e){Ne.getChatKeys().then((function(n){Me(t,e,n)}))}function Me(t,e,n){var o=new Set,i=e.map((function(e){var i=ae.formatChat(e,t.sdkState.uid),s=i.conversationID,r=t.chatKeys[s];return null!==n&&void 0!==n&&n.find((function(t){return t.conversationID===s}))&&je(t,r.msgEnd,i),i.deleted?r&&(o.add(s),delete t.chatKeys[s]):r?Object.assign(r,i):(t.chatKeys[s]=i,t.chatList.push(i)),i}));return o.size>0&&(t.chatList=t.chatList.filter((function(t){return!o.has(t.conversationID)}))),null!==i&&void 0!==i&&i.length&&Ne.addChatList(i),t.handleMessage({type:D.SyncChatsChange,state:E.SYNC_CHAT_SUCCESS,chats:i}),i}function je(t,e,n){var o=ae.createSign();ae.createCallEvent(t,{type:I.GetMsgs,callSign:o,callSuc:function(){var o=Object(Ce["a"])(regeneratorRuntime.mark((function o(i){var s,r,a,g,l,u,c,d,m;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(null!==i&&void 0!==i&&null!==(s=i.messages)&&void 0!==s&&s.length){o.next=2;break}return o.abrupt("return");case 2:for(r=i.messages.length-1,i.messages[r].msgId>e+1&&Ne.deleteMsgs(n.conversationID),a=[],g=[],l=[];r>=0;r--)u=i.messages[r],u.type===j.Recall?(c={conversationID:u.conversationID,msgId:parseInt(u.body),type:j.Revoked},a.push(c),Ne.updateMsg(c)):u.type===j.SysDelete?u.content.split(",").forEach((function(t){l.push(Number(t))})):u.type<64&&(d=ae.formatMsg(u,n.conversationID),g.push(d));l.length>0&&Ne.deleteMsgs(n.conversationID,l),m=a.concat(g),Ne.addMsgList(m),!0!==n.deleted&&t.handleMessage({type:D.SyncMsgs,conversationID:n.conversationID,revokeList:a,msgList:g,deleteMsgIds:l});case 12:case"end":return o.stop()}}),o)})));function i(t){return o.apply(this,arguments)}return i}(),callErr:function(t){}});var i=X.getMsgPro({sign:o,toUid:n.uid,pageSize:100,msgStart:e});nt(i,v.GetHistory)}function Pe(t,e){return new Promise((function(n,o){if(ae.preJudge(t,o,I.GetChats)){if(null!==e&&void 0!==e&&e.pageSize&&ae.isNotNumer(null===e||void 0===e?void 0:e.pageSize)){var i=ae.parameterErr({name:I.GetChats,key:"pageSize"});return o(i)}if(t.sdkState.chatsSync===E.SYNC_CHAT_SUCCESS)Be(t,e,n);else{var s=ae.createSign();t.chatCallEvents.hasOwnProperty(s)&&(s+=1),t.chatCallEvents[s]={callSuc:function(){delete t.chatCallEvents[s],Be(t,e,n)},callErr:function(e){delete t.chatCallEvents[s];var n=ae.resultErr((null===e||void 0===e?void 0:e.msg)||"Failed to get the conversation list",I.GetChats,(null===e||void 0===e?void 0:e.code)||M.ERROR);o(n)}}}}}))}function Be(t,e,n){var o=ae.sort(t.chatList,"showMsgTime");(null===e||void 0===e?void 0:e.pageSize)>0&&(o=ae.getPageSize(null===e||void 0===e?void 0:e.conversationID,"conversationID",t.chatList,null===e||void 0===e?void 0:e.pageSize));var i=ae.resultSuc(I.GetChats,{chats:o,hasMore:(null===e||void 0===e?void 0:e.pageSize)>0&&o.length>(null===e||void 0===e?void 0:e.pageSize)});n(i)}function De(t,e){return new Promise((function(n,o){if(ae.preJudge(t,o,I.DelChat)){if(ae.isNotObject(e,"conversationID","string")){var i=ae.parameterErr({name:I.DelChat,key:"conversationID"});return o(i)}var s=ae.createSign();if(ae.createCallEvent(t,{type:I.DelChat,callSign:s,callSuc:function(t){var o=ae.resultSuc(I.DelChat,{conversationID:e.conversationID,updateTime:t.data.updateTime,deleted:t.data.deleted});return n(o)},callErr:function(t){var e=ae.serverErr(t,I.DelChat);o(e)}}),t.curTab){var r=ae.reformatC2CId(e.conversationID),a=X.delChatPro(s,parseInt(r));nt(a,v.DelChat)}else Bt.onWebSocketNotice(I.DelChat,{callSign:s,tabId:t.tabId,options:e,state:U.Pending})}}))}function Re(t,e){return new Promise((function(n,o){if(ae.preJudge(t,o,I.GetChat)){if(ae.isNotObject(e,"conversationID","string")){var i=ae.parameterErr({name:I.GetChat,key:"conversationID"});return o(i)}if(t.chatKeys.hasOwnProperty(e.conversationID)){var s=t.chatKeys[e.conversationID],r=ae.resultSuc(I.GetChat,s);n(r)}else Ne.getChat(e.conversationID).then((function(i){if(i){var s=ae.resultSuc(I.GetChat,i);return n(s)}_e(t,e.conversationID,n,o)}))}}))}function _e(t,e,n,o){var i=ae.createSign();if(ae.createCallEvent(t,{type:I.GetChat,callSign:i,callSuc:function(e){if(e.data){var o=ae.formatChat(e.data,t.sdkState.uid);Ne.updateChat(o);var i=ae.resultSuc(I.GetChat,o);n(i)}},callErr:function(t){var e=ae.serverErr(t,I.GetChat);o(e)}}),t.curTab){var s=ae.reformatC2CId(e),r=X.chatPro(i,s);nt(r,v.GetChat)}else Bt.onWebSocketNotice(I.GetChat,{callSign:i,tabId:t.tabId,options:options,state:U.Pending})}function Ae(t,e){return new Promise((function(n,o){if(ae.preJudge(t,o,I.UpdateLocalChat)){if(ae.isNotObject(e,"conversationID","string")){var i=ae.parameterErr({name:I.UpdateLocalChat,key:"conversationID"});return o(i)}if(t.chatKeys.hasOwnProperty(e.conversationID)){var s=t.chatKeys[e.conversationID];Object.assign(s,e);var r=ae.resultSuc(I.UpdateLocalChat,s);n(r)}else Ne.getChat(e.conversationID).then((function(t){if(t){var i=Object.assign(t,e),s=ae.resultSuc(I.UpdateLocalChat,i);n(s)}else{var r=ae.resultErr("Failed to update local session information",I.UpdateLocalChat,M.ERROR);o(r)}}))}}))}function Ge(t){return new Promise((function(e,n){if(t.sdkState.chatsSync===E.SYNC_CHAT_SUCCESS){var o=t.chatList.reduce((function(t,e){return t+e.unread}),0),i=ae.resultSuc(I.GetAllUnread,{unread:o||0});e(i)}else{var s=ae.createSign();t.chatCallEvents.hasOwnProperty(s)&&(s+=1),t.chatCallEvents[s]={callSuc:function(){delete t.chatCallEvents[s];var n=t.chatList.reduce((function(t,e){return t+e.unread}),0),o=ae.resultSuc(I.GetAllUnread,{unread:n});e(o)},callErr:function(){delete t.chatCallEvents[s];var e=ae.resultErr("Failed to get no reading",I.GetAllUnread,M.ERROR);n(e)}}}}))}function Ve(t,e,n){switch(Oe=t,Ie=e,n.type){case D.WsStateChange:Ke(n);break;case D.SyncChatsChange:xe(n);break;case D.SyncMsgs:ze(n);break;case D.ImLogin:Je(n);break;case D.ImLogout:Fe(n);break;case D.ChatItemUpdate:en(n.data);break;case D.ResultError:He(n);break;case D.ChatR:We(n);break}}function ze(t){if(Oe.curTab&&Bt.onMessageNotice(T.SyncMsgs,t),t.msgList.length>0&&Ie[B.MESSAGE_RECEIVED]){var e=ae.resultNotice(B.MESSAGE_RECEIVED,t.msgList);Ie[B.MESSAGE_RECEIVED](e)}if(t.deleteMsgIds.length>0&&Ie[B.MESSAGE_DELETE]){var n=ae.resultNotice(B.MESSAGE_DELETE,{conversationID:t.conversationID,msgIds:t.deleteMsgIds});Ie[B.MESSAGE_DELETE](n)}if(t.revokeList.length>0&&Ie[B.MESSAGE_REVOKED]){var o=ae.resultNotice(B.MESSAGE_REVOKED,t.revokeList);Ie[B.MESSAGE_REVOKED](o)}}function xe(t){if(Oe.curTab?Bt.onMessageNotice(T.SyncChatsChange,t):t.state===E.SYNC_CHAT_SUCCESS&&t.chats.forEach((function(t){if(Oe.chatKeys.hasOwnProperty(t.conversationID)){var e=Oe.chatKeys[t.conversationID];Object.assign(e,t)}else Oe.chatKeys[t.conversationID]=t,Oe.chatList.push(t)})),t.state!==E.SYNC_CHAT_START){for(var e in Oe.chatCallEvents)t.state===E.SYNC_CHAT_SUCCESS?Oe.chatCallEvents[e].callSuc():t.state===E.SYNC_CHAT_FAILED&&Oe.chatCallEvents[e].callErr(t.err);var n;if(Oe.sdkState.chatsSync===E.SYNC_CHAT_SUCCESS){if(Ie[B.CONVERSATION_LIST_UPDATED]&&(null===(n=t.chats)||void 0===n?void 0:n.length)>0){var o=ae.resultNotice(B.CONVERSATION_LIST_UPDATED,t.chats);Ie[B.CONVERSATION_LIST_UPDATED](o)}}else Oe.sdkState.chatsSync=t.state}if(Ie[B.SYNC_CHATS_CHANGE]){var i=ae.resultNotice(B.SYNC_CHATS_CHANGE,{state:t.state});Ie[B.SYNC_CHATS_CHANGE](i)}}function Ke(t){if(Oe.sdkState.connState=t.state,Oe.curTab&&Bt.onMessageNotice(T.WsStateChange,t),Ie[B.CONNECT_CHANGE]){var e=ae.resultNotice(B.CONNECT_CHANGE,{state:t.state});Ie[B.CONNECT_CHANGE](e)}}function Je(t){if(Object.assign(Oe.sdkState,t.data),Oe.curTab)Oe.updateTabs=[Oe.tabId],window.localStorage.setItem("im_wsTabs",JSON.stringify(Oe.updateTabs)),Bt.onMessageNotice(T.Online,t);else{var e="im_update_tabs_"+Oe.tabId;window.localStorage.setItem(e,Oe.tabId),window.localStorage.removeItem(e)}if(Ie[B.LOGIN]){var n=ae.resultNotice(B.LOGIN,{code:M.SUCCESS,loginState:t.data.loginState,uid:t.data.uid});Ie[B.LOGIN](n)}}function Fe(t){if(Oe.curTab&&Oe.sdkState.loginState===C.LOGGED){var e=ae.createSign(),n=X.logoutPro(e);nt(n,v.ImLogout)}if(Oe.clearData(t.data.isBroadcast),t.data.isBroadcast&&(t.data.isBroadcast=!1,Bt.onMessageNotice(T.Offline,t)),Ie[B.LOGOUT]){var o=ae.resultNotice(B.LOGOUT,{code:t.data.code,msg:t.data.msg});Ie[B.LOGOUT](o)}}function He(t){switch(Oe.curTab&&Bt.onMessageNotice(T.ErrorType,t),Oe.clearData(Oe.curTab),t.data.code){case M.KICKED_OUT:case M.NO_REGISTER:if(Ie[B.KICKED_OUT]){var e=ae.resultNotice(B.KICKED_OUT,t.data);Ie[B.KICKED_OUT](e)}break;case M.TOKEN_NOT_FOUND:if(Ie[B.TOKEN_NOT_FOUND]){var n=ae.resultNotice(B.TOKEN_NOT_FOUND,t.data);Ie[B.TOKEN_NOT_FOUND](n)}break}}function We(t){t.shift?Oe.msgHandleList.unshift(t):Oe.msgHandleList.push(t),Oe.handleMsgState||Ye()}function Ye(){new Promise((function(t,e){try{var n=Oe.msgHandleList.shift(),o=n.data;if(!o.onlyId){var i=Oe.sdkState.uid===o.fromUid?o.toUid:o.fromUid,s=ae.splicingC2CId(i);o=ae.formatMsg(o,s)}o.type===j.Notification?Ze(o,t):o.type>=64&&o.type<=99?$e(o,t):tn(o,t)}catch(r){e(r)}})).finally((function(){Oe.msgHandleList.length>0?Ye():Oe.handleMsgState=!1}))}function $e(t,e){switch(t.type){case j.Recall:qe(t,e);break;case j.Unmatch:Xe(t,e);break;case j.SysDelete:Qe(t,e);break}}function qe(t,e){var n={conversationID:t.conversationID,msgId:parseInt(t.text),type:j.Revoked};if(Ie[B.MESSAGE_REVOKED]){var o=ae.resultNotice(B.MESSAGE_REVOKED,[n]);Ie[B.MESSAGE_REVOKED](o)}Oe.curTab&&(Bt.onMessageNotice(T.ReceivedMsg,{type:D.ChatR,data:t}),Ne.updateMsg(n),en({conversationID:t.conversationID,msgEnd:t.msgId,showMsgId:n.msgId,showMsgTime:t.msgTime,showMsgType:j.Recall})),e()}function Xe(t,e){Oe.chatKeys.hasOwnProperty(t.conversationID)&&(Oe.curTab&&Bt.onMessageNotice(T.ReceivedMsg,{type:D.ChatR,data:t}),en({conversationID:t.conversationID,msgEnd:t.msgId,showMsgTime:t.msgTime,showMsgType:j.Unmatch}),e())}function Qe(t,e){if(Oe.curTab){var n=t.content.split(",").map(Number);Ne.deleteMsgs(t.conversationID,n),t.content=n,Bt.onMessageNotice(T.DeleteMsg,{type:D.ChatR,data:t})}var o=Oe.chatKeys[t.conversationID];if(t.content.includes(null===o||void 0===o?void 0:o.showMsgId)&&en({conversationID:t.conversationID,showMsgType:j.Deleted,showMsg:""}),Ie[B.MESSAGE_DELETE]){var i=ae.resultNotice(B.MESSAGE_DELETE,{conversationID:t.conversationID,msgIds:t.content});Ie[B.MESSAGE_DELETE](i)}e()}function Ze(t,e){if(Oe.curTab&&Bt.onMessageNotice(T.NotificationMsg,{type:D.ChatR,data:t}),Ie[B.MESSAGE_NOTIFICATION]){var n=ae.resultNotice(B.MESSAGE_NOTIFICATION,t);Ie[B.MESSAGE_NOTIFICATION](n)}e()}function tn(t,e){var n=t;if(Ie[B.MESSAGE_RECEIVED]){var o=ae.resultNotice(B.MESSAGE_RECEIVED,[n]);Ie[B.MESSAGE_RECEIVED](o)}if(Oe.curTab){var i;Bt.onMessageNotice(T.ReceivedMsg,{type:D.ChatR,data:n}),Ne.addMsg(n),i=n.type===j.Text?n.text:n.content;var s=Oe.sdkState.uid,r={conversationID:n.conversationID,msgEnd:n.msgId,showMsgId:n.msgId,showMsgType:n.type,showMsg:i,showMsgTime:n.msgTime,myMove:n.fromUid!==s,showMsgFromUid:n.fromUid};n.fromUid!==s&&(r.unread=1),n.type===j.Matched&&(r.matched=!0),n.type>=0&&n.type<=30&&(n.fromUid!==s?r.uChatI=!0:r.iChatU=!0),en(r),e()}else e()}function en(t){return nn.apply(this,arguments)}function nn(){return nn=Object(Ce["a"])(regeneratorRuntime.mark((function t(e){var n,o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.conversationID||ae.splicingC2CId(e.uid),o=e,!Oe.curTab){t.next=5;break}return t.next=5,Re(Oe,{conversationID:n}).then((function(t){var e=t.data;o=e}));case 5:if(!e.event){t.next=9;break}i=sn(e,o),t.next=12;break;case 9:if(!(e.showMsgTime<o.showMsgTime)){t.next=11;break}return t.abrupt("return");case 11:i=on(e,o);case 12:rn(i);case 13:case"end":return t.stop()}}),t)}))),nn.apply(this,arguments)}function on(t,e){var n=Object(Dt["a"])({},e);if(t.showMsgTime>Oe.updateTime&&(Oe.updateTime=t.showMsgTime),Oe.curTab)switch(t.showMsgType){case j.Recall:t.showMsgId===n.showMsgId?(n.msgEnd=t.msgEnd,n.showMsgType=j.Revoked,n.showMsg=""):n.msgEnd<t.msgEnd&&(n.msgEnd=t.msgEnd);break;case j.Unmatch:n.msgEnd=t.msgEnd,n.matched=!1;break;default:t.unread&&t.msgEnd>n.msgEnd&&(t.unread=(n.unread||0)+t.unread),Object.assign(n,t),n.showTime=parseInt(n.showMsgTime/1e3),n.deleted=!1;break}return n}function sn(t,e){var n=Object(Dt["a"])({},e);switch(t.event){case P.MsgLastRead:n.msgLastRead=t.msgLastRead;break;case P.Unread:n.unread=t.unread;break;case P.IBlockU:n.iBlockU=t.iBlockU;break;case P.Deleted:t.deleted&&(n.deleted=t.deleted,Oe.chatKeys.hasOwnProperty(e.conversationID)&&(delete Oe.chatKeys[e.conversationID],Oe.chatList=Oe.chatList.filter((function(t){return t.conversationID!=e.conversationID}))));break}return t.updateTime>Oe.updateTime&&(Oe.updateTime=t.updateTime),n}function rn(t){if(Oe.chatKeys.hasOwnProperty(t.conversationID)){var e=Oe.chatKeys[t.conversationID];Object.assign(e,t)}else!0!==t.deleted&&(Oe.chatKeys[t.conversationID]=t,Oe.chatList.unshift(t));if(Ie[B.CONVERSATION_LIST_UPDATED]){var n=ae.resultNotice(B.CONVERSATION_LIST_UPDATED,[t]);Ie[B.CONVERSATION_LIST_UPDATED](n)}Oe.curTab&&(Bt.onMessageNotice(T.UpdateChat,{type:D.ChatItemUpdate,data:t}),Ne.updateChat(t))}var an=Ve;function gn(t,e){return new Promise((function(n,o){if(ae.isNotWs(e.wsUrl)){var i=ae.parameterErr({name:I.Login,key:"wsUrl"});return o(i)}if(ae.isNotString(e.imToken)){var s=ae.parameterErr({name:I.Login,key:"imToken"});return o(s)}if(ae.isNotEmpty(e.subAppId)){var r=ae.parameterErr({name:I.Login,key:"subAppId"});return o(r)}un(t,e,n,o)}))}function ln(t){return new Promise((function(e,n){if(t.sdkState.loginState===C.LOGGED||t.curTab)console.warn("本地状态",t.curTab,t.sdkState),e(t.sdkState);else{var o=ae.createSign();window.localStorage.setItem("im_getSdkState",t.tabId),window.localStorage.removeItem("im_getSdkState"),t.stateCallEvents[o]={timeOut:Date.now()+3e3,callSuc:function(n){delete t.stateCallEvents[o],console.warn("连接tab的状态",n),e(n)},callErr:function(n){delete t.stateCallEvents[o],console.warn("超时"),e({loginState:C.NOT_LOGIN,chatsSync:E.NOT_SYNC_CHAT,connState:N.NET_STATE_DISCONNECTED})}}}}))}function un(t,e,n,o){ln(t).then((function(i){if(i.loginState&&i.loginState!==C.NOT_LOGIN){if((null===i||void 0===i?void 0:i.imToken)!==e.imToken)fn(t).then((function(){cn(t,e,n,o)}));else if(i.loginState===C.LOGGED){i.chatsSync===E.SYNC_CHAT_SUCCESS&&(delete i.chatsSync,t.initChats()),Object.assign(t.sdkState,i);var s=ae.resultSuc(I.Login,{msg:"Logged in",uid:i.uid});n(s)}}else cn(t,e,n,o)}))}function cn(t,e,n,o){window.localStorage.setItem("im_wsCurId",t.tabId),t.globalTimer(),Object.assign(t.sdkState,{loginState:C.LOGGING,wsUrl:e.wsUrl,imToken:e.imToken,subAppId:e.subAppId});var i={wsUrl:e.wsUrl,imToken:e.imToken,subAppId:e.subAppId,resolve:n,reject:o,connSuc:function(e){return mn(t,e)},connErr:function(e,n){return pn(t,e,n)}};tt(t,i)}function dn(t){window.localStorage.setItem("im_wsCurId",t.tabId),t.globalTimer(),ln(t).then((function(e){if(e.wsUrl&&e.imToken){var n={wsUrl:e.wsUrl,imToken:e.imToken,subAppId:e.subAppId,isReconect:!0,connSuc:function(e){return mn(t,e)},connErr:function(e,n){return pn(t,e,n)}};tt(t,n)}else fn()}))}function mn(t,e){t.handleMessage({type:D.WsStateChange,state:N.NET_STATE_CONNECTED}),hn(t,e).then((function(n){if(!0!==e.isReconect){e.isReconect=!0,t.sdkState.uid=n.data.uid;var o=ae.resultSuc(I.Login,{msg:n.data.msg,uid:n.data.uid});e.resolve&&e.resolve(o),setTimeout((function(){t.handleMessage({type:D.ImLogin,data:{uid:n.data.uid,loginState:C.LOGGED,wsUrl:e.wsUrl,imToken:e.imToken,subAppId:e.subAppId}})}),0)}else t.sdkState.uid=n.data.uid;Ee(t)})).catch((function(t){e.reject&&e.reject(t)}))}function pn(t,e,n){if(t.sdkState.connState!==N.NET_STATE_DISCONNECTED&&t.handleMessage({type:D.WsStateChange,state:N.NET_STATE_DISCONNECTED}),!0!==e.isReconect&&e.reject){var o=ae.resultErr("Failed to establish websocket connection",I.Login,M.CONNECTERR);e.reject(o)}}function hn(t,e){return new Promise((function(n,o){console.warn("sdk开始登录");var i=ae.createSign();ae.createCallEvent(t,{type:I.Login,callSign:i,callSuc:function(t){n(t)},callErr:function(t){ot(),e.isReconect&&(null===t||void 0===t?void 0:t.code)===M.NO_REGISTER&&wsConfig.Global.handleMessage({type:D.ResultError,data:t});var n=ae.serverErr(t,I.Login);o(n)}});var s=X.loginPro(i,e.imToken,e.subAppId);nt(s,v.ImLogin)}))}function fn(t){return new Promise((function(e,n){var o={code:M.SUCCESS,isBroadcast:!0,msg:"Success"};t.handleMessage({type:D.ImLogout,data:o});var i=ae.resultSuc(I.Logout,o);e(i)}))}function bn(t,e){return new Promise((function(n,o){if(ae.preJudge(t,o,I.GetMsgs)){if(ae.isNotObject(e,"conversationID","string")){var i=ae.parameterErr({name:I.GetMsgs,key:"conversationID"});return o(i)}if(e.pageSize&&e.pageSize>t.maxMsgPageSize){var s=ae.parameterErr({name:I.GetMsgs,msg:"The maximum number of entries cannot exceed ".concat(t.maxMsgPageSize)});return o(s)}if(1===e.msgEnd){var r=ae.resultSuc(I.GetMsgs,{conversationID:e.conversationID,messages:[],hasMore:!1});return n(r)}var a=Object(Dt["a"])({tabId:t.tabId,pageSize:t.msgPageSize},e);a.tabId!==t.tabId?yn(t,a,n,o):(Ne.addChatKey(a.conversationID),Ne.getMsgList(a).then((function(e){var i;e.length>=a.pageSize||1===(null===(i=e[0])||void 0===i?void 0:i.msgId)?wn(a,n,e):yn(t,a,n,o,e)})))}}))}function yn(t,e,n,o,i){var s=ae.createSign();if(ae.createCallEvent(t,{type:I.GetMsgs,callSign:s,callSuc:function(o){Sn(t,e,o,n,i)},callErr:function(t){var e=ae.serverErr(t,I.GetMsgs);o(e)}}),t.curTab){var r=ae.reformatC2CId(e.conversationID),a=e.msgEnd;null!==i&&void 0!==i&&i.length&&(a=i[0].msgId);var g=X.getMsgPro({sign:s,toUid:r,msgEnd:a});nt(g,v.GetHistory)}else Bt.onWebSocketNotice(I.GetMsgs,{tabId:t.tabId,callSign:s,options:e,state:U.Pending})}function Sn(t,e,n,o,i){if(t.curTab){var s=[];n.messages.forEach((function(t){if(t.type<64){var n=ae.formatMsg(t,e.conversationID);s.unshift(n)}})),s.length>0&&Ne.addMsgList(s),null!==i&&void 0!==i&&i.length&&s.push.apply(s,Object(c["a"])(i)),wn(e,o,s)}else wn(e,o,n.messages)}function wn(t,e,n){var o=n.slice(0-t.pageSize),i=ae.resultSuc(I.GetMsgs,{conversationID:t.conversationID,messages:o,hasMore:n.length>=t.pageSize});e(i)}function Ln(t,e){return new Promise((function(n,o){if(ae.preJudge(t,o,I.Read)){if(ae.isNotObject(e,"conversationID","string")){var i=ae.parameterErr({name:I.Read,key:"conversationID"});return o(i)}var s=ae.createSign();if(ae.createCallEvent(t,{type:I.Read,callSign:s,callSuc:function(t){var o=ae.resultSuc(I.Read,{conversationID:t.conversationID,msgId:e.msgId,msgTime:t.updateTime});n(o)},callErr:function(t){var e=ae.serverErr(t,I.Read);o(e)}}),t.curTab){var r=ae.reformatC2CId(e.conversationID),a=X.readMsgPro(s,r);nt(a,v.MsgRead)}else Bt.onWebSocketNotice(I.Read,{callSign:s,tabId:t.tabId,options:e,state:U.Pending})}}))}function vn(t,e,n){var o=null,i=null;if(!ae.preJudge(t,n,I.Send))return!1;if(ae.isNotObject(e,"type","number"))o=ae.parameterErr({name:I.Send,key:"type"});else switch(e.type){case j.Text:ae.isNotString(e.text)&&(o=ae.parameterErr({name:I.Send,key:"text"})),i=e.text;break;case j.Img:ae.isNotHttp(e.url)?o=ae.parameterErr({name:I.Send,key:"url"}):ae.isNotEmpty(e.height)?o=ae.parameterErr({name:I.Send,key:"height"}):ae.isNotEmpty(e.width)&&(o=ae.parameterErr({name:I.Send,key:"width"})),i=e.url;break;default:i=e.content;break}return o?(n(o),!1):i}function Tn(t,e){return new Promise((function(n,o){var i=vn(t,e,o);if(!1!==i){var s=ae.createSign(e.showMsgTime);if(ae.createCallEvent(t,{type:I.Send,callSign:s,callSuc:function(o){On(t,e,o,n)},callErr:function(t){var e=ae.serverErr(t,I.Send);o(e)}}),t.curTab){var r=X.sendMsgPro(Object(Dt["a"])(Object(Dt["a"])({},e),{},{sign:s,body:i}));nt(r,v.ChatS)}else Bt.onWebSocketNotice(I.Send,{callSign:s,tabId:t.tabId,options:e,state:U.Pending})}}))}function On(t,e,n,o){if(t.curTab){var i=JSON.parse(JSON.stringify(e));i.msgId=n.data.msgId,i.msgTime=n.data.msgTime,i.sendStatus=k.BFIM_MSG_STATUS_SEND_SUCC,t.handleMessage({type:D.ChatR,shift:!0,data:i})}var s=ae.resultSuc(I.Send,{conversationID:e.conversationID,msgId:n.data.msgId,sendStatus:k.BFIM_MSG_STATUS_SEND_SUCC});o(s)}function In(t,e){return new Promise((function(n,o){var i=vn(t,e,o);if(!1!==i){var s=ae.createSign(e.showMsgTime);if(ae.createCallEvent(t,{type:I.Resend,callSign:s,callSuc:function(o){Nn(t,e,o,n)},callErr:function(t){var e=ae.serverErr(t,I.Resend);o(e)}}),t.curTab){var r=X.sendMsgPro(Object(Dt["a"])(Object(Dt["a"])({},e),{},{sign:s,body:i}));nt(r,v.ChatS)}else Bt.onWebSocketNotice(I.Resend,{callSign:s,tabId:t.tabId,options:e,state:U.Pending})}}))}function Nn(t,e,n,o){if(t.curTab){var i=JSON.parse(JSON.stringify(e));i.msgId=n.data.msgId,i.msgTime=n.data.msgTime,i.sendStatus=k.BFIM_MSG_STATUS_SEND_SUCC,t.handleMessage({type:D.ChatR,shift:!0,data:i})}var s=ae.resultSuc(I.Resend,{conversationID:e.conversationID,msgId:n.data.msgId,sendStatus:k.BFIM_MSG_STATUS_SEND_SUCC});o(s)}function Cn(t,e){return new Promise((function(n,o){if(ae.preJudge(t,o,I.Revoke)){if(ae.isNotObject(e,"conversationID","string")){var i=ae.parameterErr({name:I.Revoke,key:"conversationID"});return o(i)}if(ae.isNotNumer(e.msgId,!0)){var s=ae.parameterErr({name:I.Revoke,key:"msgId"});return o(s)}var r=ae.createSign();if(ae.createCallEvent(t,{type:I.Revoke,callSign:r,callSuc:function(o){En(t,e,o,n)},callErr:function(t){var e=ae.serverErr(t,I.Revoke);o(e)}}),t.curTab){var a=ae.reformatC2CId(e.conversationID),g=X.revokeMsgPro(r,a,e.msgId);nt(g,v.Revoke)}else Bt.onWebSocketNotice(I.Revoke,{callSign:r,tabId:t.tabId,options:e,state:U.Pending})}}))}function En(t,e,n,o){t.curTab&&t.handleMessage({type:D.ChatR,shift:!0,data:n.data});var i=ae.resultSuc(I.Revoke,{conversationID:e.conversationID,msgId:e.msgId,type:j.Revoked});o(i)}function kn(t,e){var n;if(null===e||void 0===e||!e.to)return{code:M.PARAMETER,msg:"Parameter 'to' cann't be empty"};if(null===(n=e.payload)||void 0===n||!n.text)return{code:M.PARAMETER,msg:"Parameter 'text' cann't be empty"};var o=ae.msgBase(e.to,t.sdkState.uid);return Object.assign(o,{type:j.Text,text:e.payload.text}),{code:M.SUCCESS,message:o}}function Un(t,e){var n;if(null===e||void 0===e||!e.to)return{code:M.PARAMETER,msg:"Parameter 'to' cann't be empty"};if(null===(n=e.payload)||void 0===n||!n.url)return{code:M.PARAMETER,msg:"Parameter 'url' cann't be empty"};var o=ae.msgBase(e.to,t.sdkState.uid);return Object.assign(o,{type:j.Img,url:e.payload.url,width:e.payload.width,height:e.payload.height}),{code:M.SUCCESS,message:o}}function Mn(t,e){var n,o;if(null===e||void 0===e||!e.to)return{code:M.PARAMETER,msg:"Parameter 'to' cann't be empty"};if((null===(n=e.payload)||void 0===n?void 0:n.type)>30||(null===(o=e.payload)||void 0===o?void 0:o.type)<11)return{code:M.PARAMETER,msg:"Type can only use 11-30"};var i=ae.msgBase(e.to,t.sdkState.uid);return Object.assign(i,e.payload),{code:M.SUCCESS,message:i}}function jn(t){return new Promise((function(e,n){var o=ae.createSign();if(ae.createCallEvent(t,{type:I.GetCosKey,callSign:o,callSuc:function(t){var n=ae.resultSuc(I.GetCosKey,t.data);return e(n)},callErr:function(t){var e=ae.serverErr(t,I.GetCosKey);n(e)}}),t.curTab){var i=X.cosPro(o);nt(i,v.GetCosKey)}else Bt.onWebSocketNotice(I.GetCosKey,{callSign:o,tabId:t.tabId,state:U.Pending})}))}function Pn(t,e,n){t[e]=n}function Bn(t,e){t[e]=null}var Dn={WS_STATE:N,SYNC_CHAT:E,SEND_STATE:k,ERROR_CODE:M,MSG_TYPE:j,IM_LOGIN_STATE:C},Rn={TYPES:Dn,EVENT:B,create:xn};function _n(){var t={login:function(t){return gn(Gn,t)},logout:function(){return fn(Gn)},sendMessage:function(t){return Tn(Gn,t)},resendMessage:function(t){return In(Gn,t)},revokeMessage:function(t){return Cn(Gn,t)},getMessageList:function(t){return bn(Gn,t)},setMessageRead:function(t){return Ln(Gn,t)},getConversationList:function(t){return Pe(Gn,t)},getConversationProvider:function(t){return Re(Gn,t)},updateConversationProvider:function(t){return Ae(Gn,t)},deleteConversation:function(t){return De(Gn,t)},createTextMessage:function(t){return kn(Gn,t)},createImageMessage:function(t){return Un(Gn,t)},createBusinessMessage:function(t){return Mn(Gn,t)},getCosKey:function(){return jn(Gn)},getAllUnreadCount:function(){return Ge(Gn)},on:function(e,n){return Pn(t,e,n)},off:function(e){return Bn(t,e)}};return t}var An=null,Gn=null;function Vn(){var t;Gn={timeOut:2e4,tabId:null===(t=Gn)||void 0===t?void 0:t.tabId,curTab:!1,uid:null,chatPageSize:20,maxChatPageSize:100,msgPageSize:20,maxMsgPageSize:100,heartBeatTimer:null,sdkState:{},callEvents:{},chatCallEvents:{},stateCallEvents:{},chatKeys:{},chatList:[],msgHandleList:[],handleMsgState:!1,updateTime:null,clearTimer:function(){var t;Gn.curTab=!1,null!==(t=Gn)&&void 0!==t&&t.heartBeatTimer&&clearInterval(Gn.heartBeatTimer)},onConn:function(){Gn.handleMessage({type:D.WsStateChange,state:N.NET_STATE_CONNECTING})},reconnection:function(){dn(Gn)},handleMessage:function(t){an(Gn,An,t)},globalTimer:Jn,clearData:zn,initChats:Fn}}function zn(t){t&&Ne.clear(),Bt.clear(),ot(),Gn.sdkState={loginState:C.NOT_LOGIN,chatsSync:E.NOT_SYNC_CHAT,connState:N.NET_STATE_DISCONNECTED},Gn.callEvents={},Gn.chatCallEvents={},Gn.stateCallEvents={},Gn.chatList=[],Gn.chatKeys={},Gn.msgHandleList=[],Gn.handleMsgState=!1,Gn.updateTime=null}function xn(){return new Promise((function(t,e){console.warn("开始初始化"),null!==An&&t(An),Vn();var n=ae.uuid(),o=window.localStorage.getItem("im_windowHeartBeat"),i=JSON.parse(window.localStorage.getItem("im_wsTabs")||"[]");i.push(n),window.localStorage.setItem("im_wsTabs",JSON.stringify(i)),Gn.tabId=n;var s=(new Date).getTime();(o||0)<s-3e3&&(Bt.clear(),ot(),Ne.deleteDB(),window.localStorage.setItem("im_wsCurId",n),Jn()),window.addEventListener("unload",Kn),Ne.initDB((function(){An=_n(),window.addEventListener("storage",(function(t){Bt.watchStorage(t,An,Gn)})),t(An)}))}))}function Kn(){var t=JSON.parse(window.localStorage.getItem("im_wsTabs")||"[]");t=t.filter((function(t){return t!=Gn.tabId})),window.localStorage.setItem("im_wsTabs",JSON.stringify(t)),Bt.clear(0===t.length),ot(),0===t.length?Ne.deleteDB():Gn.curTab&&(Gn.clearTimer(),Gn.sdkState.loginState===C.LOGGED?window.localStorage.setItem("im_wsConnTab",t[0]):window.localStorage.setItem("im_wsCurId",t[0]))}function Jn(){Gn.curTab=!0;var t=0;Gn.heartBeatTimer&&clearInterval(Gn.heartBeatTimer),Gn.heartBeatTimer=setInterval((function(){var e=(new Date).getTime();for(var n in window.localStorage.setItem("im_windowHeartBeat",e),t+=1,t%20===0&&rt(),Gn.callEvents)if(Gn.callEvents[n].timeOut<=e){var o=Gn.callEvents[n];delete Gn.callEvents[n],o.callErr({code:M.TIMEOUT,msg:o.type+": connection timed out"})}for(var i in Gn.stateCallEvents)if(Gn.stateCallEvents[i].timeOut<=e){var s=Gn.stateCallEvents[i];delete Gn.stateCallEvents[i],s.callErr()}}),50)}function Fn(){return new Promise((function(t,e){Ne.getChatList().then((function(e){for(var n in e.forEach((function(t){if(Gn.chatKeys.hasOwnProperty(t.conversationID)){var e=Gn.chatKeys[t.conversationID];Object.assign(e,t)}else Gn.chatKeys[t.conversationID]=t,Gn.chatList.push(t)})),Gn.chatCallEvents)Gn.chatCallEvents[n].callSuc();t()}))}))}var Hn=Rn,Wn={show:function(){var t=document.createElement("div");t.setAttribute("class","ui-loading");var e=document.createElement("div");e.innerText="Loading",e.setAttribute("class","ui-loading-text"),t.appendChild(e);var n=document.createElement("div");n.setAttribute("class","ui-loading-mask"),t.appendChild(n),Wn.dom=t,document.body.appendChild(t)},hide:function(){var t=document.getElementsByClassName("ui-loading");while(null!==(e=t[0])&&void 0!==e&&e.hasChildNodes()){var e;t[0].removeChild(t[0].firstChild)}var n=t[0].parentNode;n.removeChild(t[0])}},Yn=Wn,$n=Object(o["c"])(a);$n.config.globalProperties.$IM=Hn,$n.config.globalProperties.$loading=Yn,$n.config.globalProperties.$message=f,$n.config.globalProperties.$http=L,$n.use(m),$n.use(u),Hn.create().then((function(t){$n.config.globalProperties.$msim=t,$n.mount("#app")}))},7735:function(t,e,n){"use strict";n("1fbb")},"99cb":function(t,e,n){"use strict";var o=n("7037").default;n("b64b"),n("e25e"),n("d3b7"),n("25f0"),n("a9e3"),n("f4b3"),n("bf19");var i=n("543b"),s=i.Reader,r=i.Writer,a=i.util,g=i.roots["default"]||(i.roots["default"]={});g.Ping=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.type=a.Long?a.Long.fromBits(0,0,!1):0,t.encode=function(t,e){return e||(e=r.create()),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(8).int64(t.type),e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.Ping;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.type=t.int64();break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.Ping)return t;var e=new g.Ping;return null!=t.type&&(a.Long?(e.type=a.Long.fromValue(t.type)).unsigned=!1:"string"===typeof t.type?e.type=parseInt(t.type,10):"number"===typeof t.type?e.type=t.type:"object"===o(t.type)&&(e.type=new a.LongBits(t.type.low>>>0,t.type.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults)if(a.Long){var o=new a.Long(0,0,!1);n.type=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.type=e.longs===String?"0":0;return null!=t.type&&t.hasOwnProperty("type")&&("number"===typeof t.type?n.type=e.longs===String?String(t.type):t.type:n.type=e.longs===String?a.Long.prototype.toString.call(t.type):e.longs===Number?new a.LongBits(t.type.low>>>0,t.type.high>>>0).toNumber():t.type),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),g.ImLogin=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sign=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.token="",t.prototype.ct=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.subApp=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.pushChannel=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.pushToken="",t.prototype.lastToken="",t.encode=function(t,e){return e||(e=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.token&&Object.hasOwnProperty.call(t,"token")&&e.uint32(18).string(t.token),null!=t.ct&&Object.hasOwnProperty.call(t,"ct")&&e.uint32(24).int64(t.ct),null!=t.subApp&&Object.hasOwnProperty.call(t,"subApp")&&e.uint32(32).int64(t.subApp),null!=t.pushChannel&&Object.hasOwnProperty.call(t,"pushChannel")&&e.uint32(40).int64(t.pushChannel),null!=t.pushToken&&Object.hasOwnProperty.call(t,"pushToken")&&e.uint32(50).string(t.pushToken),null!=t.lastToken&&Object.hasOwnProperty.call(t,"lastToken")&&e.uint32(58).string(t.lastToken),e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.ImLogin;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.token=t.string();break;case 3:o.ct=t.int64();break;case 4:o.subApp=t.int64();break;case 5:o.pushChannel=t.int64();break;case 6:o.pushToken=t.string();break;case 7:o.lastToken=t.string();break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.ImLogin)return t;var e=new g.ImLogin;return null!=t.sign&&(a.Long?(e.sign=a.Long.fromValue(t.sign)).unsigned=!1:"string"===typeof t.sign?e.sign=parseInt(t.sign,10):"number"===typeof t.sign?e.sign=t.sign:"object"===o(t.sign)&&(e.sign=new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.token&&(e.token=String(t.token)),null!=t.ct&&(a.Long?(e.ct=a.Long.fromValue(t.ct)).unsigned=!1:"string"===typeof t.ct?e.ct=parseInt(t.ct,10):"number"===typeof t.ct?e.ct=t.ct:"object"===o(t.ct)&&(e.ct=new a.LongBits(t.ct.low>>>0,t.ct.high>>>0).toNumber())),null!=t.subApp&&(a.Long?(e.subApp=a.Long.fromValue(t.subApp)).unsigned=!1:"string"===typeof t.subApp?e.subApp=parseInt(t.subApp,10):"number"===typeof t.subApp?e.subApp=t.subApp:"object"===o(t.subApp)&&(e.subApp=new a.LongBits(t.subApp.low>>>0,t.subApp.high>>>0).toNumber())),null!=t.pushChannel&&(a.Long?(e.pushChannel=a.Long.fromValue(t.pushChannel)).unsigned=!1:"string"===typeof t.pushChannel?e.pushChannel=parseInt(t.pushChannel,10):"number"===typeof t.pushChannel?e.pushChannel=t.pushChannel:"object"===o(t.pushChannel)&&(e.pushChannel=new a.LongBits(t.pushChannel.low>>>0,t.pushChannel.high>>>0).toNumber())),null!=t.pushToken&&(e.pushToken=String(t.pushToken)),null!=t.lastToken&&(e.lastToken=String(t.lastToken)),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(a.Long){var o=new a.Long(0,0,!1);n.sign=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sign=e.longs===String?"0":0;if(n.token="",a.Long){o=new a.Long(0,0,!1);n.ct=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.ct=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.subApp=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.subApp=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.pushChannel=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.pushChannel=e.longs===String?"0":0;n.pushToken="",n.lastToken=""}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"===typeof t.sign?n.sign=e.longs===String?String(t.sign):t.sign:n.sign=e.longs===String?a.Long.prototype.toString.call(t.sign):e.longs===Number?new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.token&&t.hasOwnProperty("token")&&(n.token=t.token),null!=t.ct&&t.hasOwnProperty("ct")&&("number"===typeof t.ct?n.ct=e.longs===String?String(t.ct):t.ct:n.ct=e.longs===String?a.Long.prototype.toString.call(t.ct):e.longs===Number?new a.LongBits(t.ct.low>>>0,t.ct.high>>>0).toNumber():t.ct),null!=t.subApp&&t.hasOwnProperty("subApp")&&("number"===typeof t.subApp?n.subApp=e.longs===String?String(t.subApp):t.subApp:n.subApp=e.longs===String?a.Long.prototype.toString.call(t.subApp):e.longs===Number?new a.LongBits(t.subApp.low>>>0,t.subApp.high>>>0).toNumber():t.subApp),null!=t.pushChannel&&t.hasOwnProperty("pushChannel")&&("number"===typeof t.pushChannel?n.pushChannel=e.longs===String?String(t.pushChannel):t.pushChannel:n.pushChannel=e.longs===String?a.Long.prototype.toString.call(t.pushChannel):e.longs===Number?new a.LongBits(t.pushChannel.low>>>0,t.pushChannel.high>>>0).toNumber():t.pushChannel),null!=t.pushToken&&t.hasOwnProperty("pushToken")&&(n.pushToken=t.pushToken),null!=t.lastToken&&t.hasOwnProperty("lastToken")&&(n.lastToken=t.lastToken),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),g.ImLogout=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sign=a.Long?a.Long.fromBits(0,0,!1):0,t.encode=function(t,e){return e||(e=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.ImLogout;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.ImLogout)return t;var e=new g.ImLogout;return null!=t.sign&&(a.Long?(e.sign=a.Long.fromValue(t.sign)).unsigned=!1:"string"===typeof t.sign?e.sign=parseInt(t.sign,10):"number"===typeof t.sign?e.sign=t.sign:"object"===o(t.sign)&&(e.sign=new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults)if(a.Long){var o=new a.Long(0,0,!1);n.sign=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sign=e.longs===String?"0":0;return null!=t.sign&&t.hasOwnProperty("sign")&&("number"===typeof t.sign?n.sign=e.longs===String?String(t.sign):t.sign:n.sign=e.longs===String?a.Long.prototype.toString.call(t.sign):e.longs===Number?new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),g.Result=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sign=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.code=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.msg="",t.prototype.nowTime=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.uid=a.Long?a.Long.fromBits(0,0,!1):0,t.encode=function(t,e){return e||(e=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.code&&Object.hasOwnProperty.call(t,"code")&&e.uint32(16).int64(t.code),null!=t.msg&&Object.hasOwnProperty.call(t,"msg")&&e.uint32(26).string(t.msg),null!=t.nowTime&&Object.hasOwnProperty.call(t,"nowTime")&&e.uint32(32).int64(t.nowTime),null!=t.uid&&Object.hasOwnProperty.call(t,"uid")&&e.uint32(40).int64(t.uid),e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.Result;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.code=t.int64();break;case 3:o.msg=t.string();break;case 4:o.nowTime=t.int64();break;case 5:o.uid=t.int64();break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.Result)return t;var e=new g.Result;return null!=t.sign&&(a.Long?(e.sign=a.Long.fromValue(t.sign)).unsigned=!1:"string"===typeof t.sign?e.sign=parseInt(t.sign,10):"number"===typeof t.sign?e.sign=t.sign:"object"===o(t.sign)&&(e.sign=new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.code&&(a.Long?(e.code=a.Long.fromValue(t.code)).unsigned=!1:"string"===typeof t.code?e.code=parseInt(t.code,10):"number"===typeof t.code?e.code=t.code:"object"===o(t.code)&&(e.code=new a.LongBits(t.code.low>>>0,t.code.high>>>0).toNumber())),null!=t.msg&&(e.msg=String(t.msg)),null!=t.nowTime&&(a.Long?(e.nowTime=a.Long.fromValue(t.nowTime)).unsigned=!1:"string"===typeof t.nowTime?e.nowTime=parseInt(t.nowTime,10):"number"===typeof t.nowTime?e.nowTime=t.nowTime:"object"===o(t.nowTime)&&(e.nowTime=new a.LongBits(t.nowTime.low>>>0,t.nowTime.high>>>0).toNumber())),null!=t.uid&&(a.Long?(e.uid=a.Long.fromValue(t.uid)).unsigned=!1:"string"===typeof t.uid?e.uid=parseInt(t.uid,10):"number"===typeof t.uid?e.uid=t.uid:"object"===o(t.uid)&&(e.uid=new a.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(a.Long){var o=new a.Long(0,0,!1);n.sign=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sign=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.code=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.code=e.longs===String?"0":0;if(n.msg="",a.Long){o=new a.Long(0,0,!1);n.nowTime=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.nowTime=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.uid=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.uid=e.longs===String?"0":0}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"===typeof t.sign?n.sign=e.longs===String?String(t.sign):t.sign:n.sign=e.longs===String?a.Long.prototype.toString.call(t.sign):e.longs===Number?new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.code&&t.hasOwnProperty("code")&&("number"===typeof t.code?n.code=e.longs===String?String(t.code):t.code:n.code=e.longs===String?a.Long.prototype.toString.call(t.code):e.longs===Number?new a.LongBits(t.code.low>>>0,t.code.high>>>0).toNumber():t.code),null!=t.msg&&t.hasOwnProperty("msg")&&(n.msg=t.msg),null!=t.nowTime&&t.hasOwnProperty("nowTime")&&("number"===typeof t.nowTime?n.nowTime=e.longs===String?String(t.nowTime):t.nowTime:n.nowTime=e.longs===String?a.Long.prototype.toString.call(t.nowTime):e.longs===Number?new a.LongBits(t.nowTime.low>>>0,t.nowTime.high>>>0).toNumber():t.nowTime),null!=t.uid&&t.hasOwnProperty("uid")&&("number"===typeof t.uid?n.uid=e.longs===String?String(t.uid):t.uid:n.uid=e.longs===String?a.Long.prototype.toString.call(t.uid):e.longs===Number?new a.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber():t.uid),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),g.ChatS=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sign=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.type=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.toUid=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.title="",t.prototype.body="",t.prototype.thumb="",t.prototype.width=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.height=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.duration=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.lat=0,t.prototype.lng=0,t.prototype.zoom=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.pushTitle="",t.prototype.pushBody="",t.prototype.pushSound="",t.encode=function(t,e){return e||(e=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(16).int64(t.type),null!=t.toUid&&Object.hasOwnProperty.call(t,"toUid")&&e.uint32(24).int64(t.toUid),null!=t.title&&Object.hasOwnProperty.call(t,"title")&&e.uint32(34).string(t.title),null!=t.body&&Object.hasOwnProperty.call(t,"body")&&e.uint32(42).string(t.body),null!=t.thumb&&Object.hasOwnProperty.call(t,"thumb")&&e.uint32(50).string(t.thumb),null!=t.width&&Object.hasOwnProperty.call(t,"width")&&e.uint32(56).int64(t.width),null!=t.height&&Object.hasOwnProperty.call(t,"height")&&e.uint32(64).int64(t.height),null!=t.duration&&Object.hasOwnProperty.call(t,"duration")&&e.uint32(72).int64(t.duration),null!=t.lat&&Object.hasOwnProperty.call(t,"lat")&&e.uint32(81).double(t.lat),null!=t.lng&&Object.hasOwnProperty.call(t,"lng")&&e.uint32(89).double(t.lng),null!=t.zoom&&Object.hasOwnProperty.call(t,"zoom")&&e.uint32(96).int64(t.zoom),null!=t.pushTitle&&Object.hasOwnProperty.call(t,"pushTitle")&&e.uint32(106).string(t.pushTitle),null!=t.pushBody&&Object.hasOwnProperty.call(t,"pushBody")&&e.uint32(114).string(t.pushBody),null!=t.pushSound&&Object.hasOwnProperty.call(t,"pushSound")&&e.uint32(122).string(t.pushSound),e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.ChatS;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.type=t.int64();break;case 3:o.toUid=t.int64();break;case 4:o.title=t.string();break;case 5:o.body=t.string();break;case 6:o.thumb=t.string();break;case 7:o.width=t.int64();break;case 8:o.height=t.int64();break;case 9:o.duration=t.int64();break;case 10:o.lat=t.double();break;case 11:o.lng=t.double();break;case 12:o.zoom=t.int64();break;case 13:o.pushTitle=t.string();break;case 14:o.pushBody=t.string();break;case 15:o.pushSound=t.string();break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.ChatS)return t;var e=new g.ChatS;return null!=t.sign&&(a.Long?(e.sign=a.Long.fromValue(t.sign)).unsigned=!1:"string"===typeof t.sign?e.sign=parseInt(t.sign,10):"number"===typeof t.sign?e.sign=t.sign:"object"===o(t.sign)&&(e.sign=new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.type&&(a.Long?(e.type=a.Long.fromValue(t.type)).unsigned=!1:"string"===typeof t.type?e.type=parseInt(t.type,10):"number"===typeof t.type?e.type=t.type:"object"===o(t.type)&&(e.type=new a.LongBits(t.type.low>>>0,t.type.high>>>0).toNumber())),null!=t.toUid&&(a.Long?(e.toUid=a.Long.fromValue(t.toUid)).unsigned=!1:"string"===typeof t.toUid?e.toUid=parseInt(t.toUid,10):"number"===typeof t.toUid?e.toUid=t.toUid:"object"===o(t.toUid)&&(e.toUid=new a.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber())),null!=t.title&&(e.title=String(t.title)),null!=t.body&&(e.body=String(t.body)),null!=t.thumb&&(e.thumb=String(t.thumb)),null!=t.width&&(a.Long?(e.width=a.Long.fromValue(t.width)).unsigned=!1:"string"===typeof t.width?e.width=parseInt(t.width,10):"number"===typeof t.width?e.width=t.width:"object"===o(t.width)&&(e.width=new a.LongBits(t.width.low>>>0,t.width.high>>>0).toNumber())),null!=t.height&&(a.Long?(e.height=a.Long.fromValue(t.height)).unsigned=!1:"string"===typeof t.height?e.height=parseInt(t.height,10):"number"===typeof t.height?e.height=t.height:"object"===o(t.height)&&(e.height=new a.LongBits(t.height.low>>>0,t.height.high>>>0).toNumber())),null!=t.duration&&(a.Long?(e.duration=a.Long.fromValue(t.duration)).unsigned=!1:"string"===typeof t.duration?e.duration=parseInt(t.duration,10):"number"===typeof t.duration?e.duration=t.duration:"object"===o(t.duration)&&(e.duration=new a.LongBits(t.duration.low>>>0,t.duration.high>>>0).toNumber())),null!=t.lat&&(e.lat=Number(t.lat)),null!=t.lng&&(e.lng=Number(t.lng)),null!=t.zoom&&(a.Long?(e.zoom=a.Long.fromValue(t.zoom)).unsigned=!1:"string"===typeof t.zoom?e.zoom=parseInt(t.zoom,10):"number"===typeof t.zoom?e.zoom=t.zoom:"object"===o(t.zoom)&&(e.zoom=new a.LongBits(t.zoom.low>>>0,t.zoom.high>>>0).toNumber())),null!=t.pushTitle&&(e.pushTitle=String(t.pushTitle)),null!=t.pushBody&&(e.pushBody=String(t.pushBody)),null!=t.pushSound&&(e.pushSound=String(t.pushSound)),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(a.Long){var o=new a.Long(0,0,!1);n.sign=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sign=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.type=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.type=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.toUid=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.toUid=e.longs===String?"0":0;if(n.title="",n.body="",n.thumb="",a.Long){o=new a.Long(0,0,!1);n.width=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.width=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.height=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.height=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.duration=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.duration=e.longs===String?"0":0;if(n.lat=0,n.lng=0,a.Long){o=new a.Long(0,0,!1);n.zoom=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.zoom=e.longs===String?"0":0;n.pushTitle="",n.pushBody="",n.pushSound=""}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"===typeof t.sign?n.sign=e.longs===String?String(t.sign):t.sign:n.sign=e.longs===String?a.Long.prototype.toString.call(t.sign):e.longs===Number?new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.type&&t.hasOwnProperty("type")&&("number"===typeof t.type?n.type=e.longs===String?String(t.type):t.type:n.type=e.longs===String?a.Long.prototype.toString.call(t.type):e.longs===Number?new a.LongBits(t.type.low>>>0,t.type.high>>>0).toNumber():t.type),null!=t.toUid&&t.hasOwnProperty("toUid")&&("number"===typeof t.toUid?n.toUid=e.longs===String?String(t.toUid):t.toUid:n.toUid=e.longs===String?a.Long.prototype.toString.call(t.toUid):e.longs===Number?new a.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber():t.toUid),null!=t.title&&t.hasOwnProperty("title")&&(n.title=t.title),null!=t.body&&t.hasOwnProperty("body")&&(n.body=t.body),null!=t.thumb&&t.hasOwnProperty("thumb")&&(n.thumb=t.thumb),null!=t.width&&t.hasOwnProperty("width")&&("number"===typeof t.width?n.width=e.longs===String?String(t.width):t.width:n.width=e.longs===String?a.Long.prototype.toString.call(t.width):e.longs===Number?new a.LongBits(t.width.low>>>0,t.width.high>>>0).toNumber():t.width),null!=t.height&&t.hasOwnProperty("height")&&("number"===typeof t.height?n.height=e.longs===String?String(t.height):t.height:n.height=e.longs===String?a.Long.prototype.toString.call(t.height):e.longs===Number?new a.LongBits(t.height.low>>>0,t.height.high>>>0).toNumber():t.height),null!=t.duration&&t.hasOwnProperty("duration")&&("number"===typeof t.duration?n.duration=e.longs===String?String(t.duration):t.duration:n.duration=e.longs===String?a.Long.prototype.toString.call(t.duration):e.longs===Number?new a.LongBits(t.duration.low>>>0,t.duration.high>>>0).toNumber():t.duration),null!=t.lat&&t.hasOwnProperty("lat")&&(n.lat=e.json&&!isFinite(t.lat)?String(t.lat):t.lat),null!=t.lng&&t.hasOwnProperty("lng")&&(n.lng=e.json&&!isFinite(t.lng)?String(t.lng):t.lng),null!=t.zoom&&t.hasOwnProperty("zoom")&&("number"===typeof t.zoom?n.zoom=e.longs===String?String(t.zoom):t.zoom:n.zoom=e.longs===String?a.Long.prototype.toString.call(t.zoom):e.longs===Number?new a.LongBits(t.zoom.low>>>0,t.zoom.high>>>0).toNumber():t.zoom),null!=t.pushTitle&&t.hasOwnProperty("pushTitle")&&(n.pushTitle=t.pushTitle),null!=t.pushBody&&t.hasOwnProperty("pushBody")&&(n.pushBody=t.pushBody),null!=t.pushSound&&t.hasOwnProperty("pushSound")&&(n.pushSound=t.pushSound),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),g.ChatSR=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sign=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.msgId=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.msgTime=a.Long?a.Long.fromBits(0,0,!1):0,t.encode=function(t,e){return e||(e=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.msgId&&Object.hasOwnProperty.call(t,"msgId")&&e.uint32(16).int64(t.msgId),null!=t.msgTime&&Object.hasOwnProperty.call(t,"msgTime")&&e.uint32(24).int64(t.msgTime),e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.ChatSR;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.msgId=t.int64();break;case 3:o.msgTime=t.int64();break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.ChatSR)return t;var e=new g.ChatSR;return null!=t.sign&&(a.Long?(e.sign=a.Long.fromValue(t.sign)).unsigned=!1:"string"===typeof t.sign?e.sign=parseInt(t.sign,10):"number"===typeof t.sign?e.sign=t.sign:"object"===o(t.sign)&&(e.sign=new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.msgId&&(a.Long?(e.msgId=a.Long.fromValue(t.msgId)).unsigned=!1:"string"===typeof t.msgId?e.msgId=parseInt(t.msgId,10):"number"===typeof t.msgId?e.msgId=t.msgId:"object"===o(t.msgId)&&(e.msgId=new a.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber())),null!=t.msgTime&&(a.Long?(e.msgTime=a.Long.fromValue(t.msgTime)).unsigned=!1:"string"===typeof t.msgTime?e.msgTime=parseInt(t.msgTime,10):"number"===typeof t.msgTime?e.msgTime=t.msgTime:"object"===o(t.msgTime)&&(e.msgTime=new a.LongBits(t.msgTime.low>>>0,t.msgTime.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(a.Long){var o=new a.Long(0,0,!1);n.sign=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sign=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.msgId=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.msgId=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.msgTime=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.msgTime=e.longs===String?"0":0}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"===typeof t.sign?n.sign=e.longs===String?String(t.sign):t.sign:n.sign=e.longs===String?a.Long.prototype.toString.call(t.sign):e.longs===Number?new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.msgId&&t.hasOwnProperty("msgId")&&("number"===typeof t.msgId?n.msgId=e.longs===String?String(t.msgId):t.msgId:n.msgId=e.longs===String?a.Long.prototype.toString.call(t.msgId):e.longs===Number?new a.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber():t.msgId),null!=t.msgTime&&t.hasOwnProperty("msgTime")&&("number"===typeof t.msgTime?n.msgTime=e.longs===String?String(t.msgTime):t.msgTime:n.msgTime=e.longs===String?a.Long.prototype.toString.call(t.msgTime):e.longs===Number?new a.LongBits(t.msgTime.low>>>0,t.msgTime.high>>>0).toNumber():t.msgTime),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),g.ChatR=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sign=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.fromUid=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.toUid=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.msgId=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.msgTime=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.sput=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.newMsg=!1,t.prototype.type=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.title="",t.prototype.body="",t.prototype.thumb="",t.prototype.width=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.height=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.duration=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.lat=0,t.prototype.lng=0,t.prototype.zoom=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.pushTitle="",t.prototype.pushBody="",t.prototype.pushSound="",t.encode=function(t,e){return e||(e=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.fromUid&&Object.hasOwnProperty.call(t,"fromUid")&&e.uint32(16).int64(t.fromUid),null!=t.toUid&&Object.hasOwnProperty.call(t,"toUid")&&e.uint32(24).int64(t.toUid),null!=t.msgId&&Object.hasOwnProperty.call(t,"msgId")&&e.uint32(32).int64(t.msgId),null!=t.msgTime&&Object.hasOwnProperty.call(t,"msgTime")&&e.uint32(40).int64(t.msgTime),null!=t.sput&&Object.hasOwnProperty.call(t,"sput")&&e.uint32(48).int64(t.sput),null!=t.newMsg&&Object.hasOwnProperty.call(t,"newMsg")&&e.uint32(56).bool(t.newMsg),null!=t.type&&Object.hasOwnProperty.call(t,"type")&&e.uint32(64).int64(t.type),null!=t.title&&Object.hasOwnProperty.call(t,"title")&&e.uint32(74).string(t.title),null!=t.body&&Object.hasOwnProperty.call(t,"body")&&e.uint32(82).string(t.body),null!=t.thumb&&Object.hasOwnProperty.call(t,"thumb")&&e.uint32(90).string(t.thumb),null!=t.width&&Object.hasOwnProperty.call(t,"width")&&e.uint32(96).int64(t.width),null!=t.height&&Object.hasOwnProperty.call(t,"height")&&e.uint32(104).int64(t.height),null!=t.duration&&Object.hasOwnProperty.call(t,"duration")&&e.uint32(112).int64(t.duration),null!=t.lat&&Object.hasOwnProperty.call(t,"lat")&&e.uint32(121).double(t.lat),null!=t.lng&&Object.hasOwnProperty.call(t,"lng")&&e.uint32(129).double(t.lng),null!=t.zoom&&Object.hasOwnProperty.call(t,"zoom")&&e.uint32(136).int64(t.zoom),null!=t.pushTitle&&Object.hasOwnProperty.call(t,"pushTitle")&&e.uint32(146).string(t.pushTitle),null!=t.pushBody&&Object.hasOwnProperty.call(t,"pushBody")&&e.uint32(154).string(t.pushBody),null!=t.pushSound&&Object.hasOwnProperty.call(t,"pushSound")&&e.uint32(162).string(t.pushSound),e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.ChatR;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.fromUid=t.int64();break;case 3:o.toUid=t.int64();break;case 4:o.msgId=t.int64();break;case 5:o.msgTime=t.int64();break;case 6:o.sput=t.int64();break;case 7:o.newMsg=t.bool();break;case 8:o.type=t.int64();break;case 9:o.title=t.string();break;case 10:o.body=t.string();break;case 11:o.thumb=t.string();break;case 12:o.width=t.int64();break;case 13:o.height=t.int64();break;case 14:o.duration=t.int64();break;case 15:o.lat=t.double();break;case 16:o.lng=t.double();break;case 17:o.zoom=t.int64();break;case 18:o.pushTitle=t.string();break;case 19:o.pushBody=t.string();break;case 20:o.pushSound=t.string();break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.ChatR)return t;var e=new g.ChatR;return null!=t.sign&&(a.Long?(e.sign=a.Long.fromValue(t.sign)).unsigned=!1:"string"===typeof t.sign?e.sign=parseInt(t.sign,10):"number"===typeof t.sign?e.sign=t.sign:"object"===o(t.sign)&&(e.sign=new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.fromUid&&(a.Long?(e.fromUid=a.Long.fromValue(t.fromUid)).unsigned=!1:"string"===typeof t.fromUid?e.fromUid=parseInt(t.fromUid,10):"number"===typeof t.fromUid?e.fromUid=t.fromUid:"object"===o(t.fromUid)&&(e.fromUid=new a.LongBits(t.fromUid.low>>>0,t.fromUid.high>>>0).toNumber())),null!=t.toUid&&(a.Long?(e.toUid=a.Long.fromValue(t.toUid)).unsigned=!1:"string"===typeof t.toUid?e.toUid=parseInt(t.toUid,10):"number"===typeof t.toUid?e.toUid=t.toUid:"object"===o(t.toUid)&&(e.toUid=new a.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber())),null!=t.msgId&&(a.Long?(e.msgId=a.Long.fromValue(t.msgId)).unsigned=!1:"string"===typeof t.msgId?e.msgId=parseInt(t.msgId,10):"number"===typeof t.msgId?e.msgId=t.msgId:"object"===o(t.msgId)&&(e.msgId=new a.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber())),null!=t.msgTime&&(a.Long?(e.msgTime=a.Long.fromValue(t.msgTime)).unsigned=!1:"string"===typeof t.msgTime?e.msgTime=parseInt(t.msgTime,10):"number"===typeof t.msgTime?e.msgTime=t.msgTime:"object"===o(t.msgTime)&&(e.msgTime=new a.LongBits(t.msgTime.low>>>0,t.msgTime.high>>>0).toNumber())),null!=t.sput&&(a.Long?(e.sput=a.Long.fromValue(t.sput)).unsigned=!1:"string"===typeof t.sput?e.sput=parseInt(t.sput,10):"number"===typeof t.sput?e.sput=t.sput:"object"===o(t.sput)&&(e.sput=new a.LongBits(t.sput.low>>>0,t.sput.high>>>0).toNumber())),null!=t.newMsg&&(e.newMsg=Boolean(t.newMsg)),null!=t.type&&(a.Long?(e.type=a.Long.fromValue(t.type)).unsigned=!1:"string"===typeof t.type?e.type=parseInt(t.type,10):"number"===typeof t.type?e.type=t.type:"object"===o(t.type)&&(e.type=new a.LongBits(t.type.low>>>0,t.type.high>>>0).toNumber())),null!=t.title&&(e.title=String(t.title)),null!=t.body&&(e.body=String(t.body)),null!=t.thumb&&(e.thumb=String(t.thumb)),null!=t.width&&(a.Long?(e.width=a.Long.fromValue(t.width)).unsigned=!1:"string"===typeof t.width?e.width=parseInt(t.width,10):"number"===typeof t.width?e.width=t.width:"object"===o(t.width)&&(e.width=new a.LongBits(t.width.low>>>0,t.width.high>>>0).toNumber())),null!=t.height&&(a.Long?(e.height=a.Long.fromValue(t.height)).unsigned=!1:"string"===typeof t.height?e.height=parseInt(t.height,10):"number"===typeof t.height?e.height=t.height:"object"===o(t.height)&&(e.height=new a.LongBits(t.height.low>>>0,t.height.high>>>0).toNumber())),null!=t.duration&&(a.Long?(e.duration=a.Long.fromValue(t.duration)).unsigned=!1:"string"===typeof t.duration?e.duration=parseInt(t.duration,10):"number"===typeof t.duration?e.duration=t.duration:"object"===o(t.duration)&&(e.duration=new a.LongBits(t.duration.low>>>0,t.duration.high>>>0).toNumber())),null!=t.lat&&(e.lat=Number(t.lat)),null!=t.lng&&(e.lng=Number(t.lng)),null!=t.zoom&&(a.Long?(e.zoom=a.Long.fromValue(t.zoom)).unsigned=!1:"string"===typeof t.zoom?e.zoom=parseInt(t.zoom,10):"number"===typeof t.zoom?e.zoom=t.zoom:"object"===o(t.zoom)&&(e.zoom=new a.LongBits(t.zoom.low>>>0,t.zoom.high>>>0).toNumber())),null!=t.pushTitle&&(e.pushTitle=String(t.pushTitle)),null!=t.pushBody&&(e.pushBody=String(t.pushBody)),null!=t.pushSound&&(e.pushSound=String(t.pushSound)),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(a.Long){var o=new a.Long(0,0,!1);n.sign=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sign=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.fromUid=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.fromUid=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.toUid=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.toUid=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.msgId=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.msgId=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.msgTime=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.msgTime=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.sput=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sput=e.longs===String?"0":0;if(n.newMsg=!1,a.Long){o=new a.Long(0,0,!1);n.type=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.type=e.longs===String?"0":0;if(n.title="",n.body="",n.thumb="",a.Long){o=new a.Long(0,0,!1);n.width=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.width=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.height=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.height=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.duration=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.duration=e.longs===String?"0":0;if(n.lat=0,n.lng=0,a.Long){o=new a.Long(0,0,!1);n.zoom=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.zoom=e.longs===String?"0":0;n.pushTitle="",n.pushBody="",n.pushSound=""}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"===typeof t.sign?n.sign=e.longs===String?String(t.sign):t.sign:n.sign=e.longs===String?a.Long.prototype.toString.call(t.sign):e.longs===Number?new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.fromUid&&t.hasOwnProperty("fromUid")&&("number"===typeof t.fromUid?n.fromUid=e.longs===String?String(t.fromUid):t.fromUid:n.fromUid=e.longs===String?a.Long.prototype.toString.call(t.fromUid):e.longs===Number?new a.LongBits(t.fromUid.low>>>0,t.fromUid.high>>>0).toNumber():t.fromUid),null!=t.toUid&&t.hasOwnProperty("toUid")&&("number"===typeof t.toUid?n.toUid=e.longs===String?String(t.toUid):t.toUid:n.toUid=e.longs===String?a.Long.prototype.toString.call(t.toUid):e.longs===Number?new a.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber():t.toUid),null!=t.msgId&&t.hasOwnProperty("msgId")&&("number"===typeof t.msgId?n.msgId=e.longs===String?String(t.msgId):t.msgId:n.msgId=e.longs===String?a.Long.prototype.toString.call(t.msgId):e.longs===Number?new a.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber():t.msgId),null!=t.msgTime&&t.hasOwnProperty("msgTime")&&("number"===typeof t.msgTime?n.msgTime=e.longs===String?String(t.msgTime):t.msgTime:n.msgTime=e.longs===String?a.Long.prototype.toString.call(t.msgTime):e.longs===Number?new a.LongBits(t.msgTime.low>>>0,t.msgTime.high>>>0).toNumber():t.msgTime),null!=t.sput&&t.hasOwnProperty("sput")&&("number"===typeof t.sput?n.sput=e.longs===String?String(t.sput):t.sput:n.sput=e.longs===String?a.Long.prototype.toString.call(t.sput):e.longs===Number?new a.LongBits(t.sput.low>>>0,t.sput.high>>>0).toNumber():t.sput),null!=t.newMsg&&t.hasOwnProperty("newMsg")&&(n.newMsg=t.newMsg),null!=t.type&&t.hasOwnProperty("type")&&("number"===typeof t.type?n.type=e.longs===String?String(t.type):t.type:n.type=e.longs===String?a.Long.prototype.toString.call(t.type):e.longs===Number?new a.LongBits(t.type.low>>>0,t.type.high>>>0).toNumber():t.type),null!=t.title&&t.hasOwnProperty("title")&&(n.title=t.title),null!=t.body&&t.hasOwnProperty("body")&&(n.body=t.body),null!=t.thumb&&t.hasOwnProperty("thumb")&&(n.thumb=t.thumb),null!=t.width&&t.hasOwnProperty("width")&&("number"===typeof t.width?n.width=e.longs===String?String(t.width):t.width:n.width=e.longs===String?a.Long.prototype.toString.call(t.width):e.longs===Number?new a.LongBits(t.width.low>>>0,t.width.high>>>0).toNumber():t.width),null!=t.height&&t.hasOwnProperty("height")&&("number"===typeof t.height?n.height=e.longs===String?String(t.height):t.height:n.height=e.longs===String?a.Long.prototype.toString.call(t.height):e.longs===Number?new a.LongBits(t.height.low>>>0,t.height.high>>>0).toNumber():t.height),null!=t.duration&&t.hasOwnProperty("duration")&&("number"===typeof t.duration?n.duration=e.longs===String?String(t.duration):t.duration:n.duration=e.longs===String?a.Long.prototype.toString.call(t.duration):e.longs===Number?new a.LongBits(t.duration.low>>>0,t.duration.high>>>0).toNumber():t.duration),null!=t.lat&&t.hasOwnProperty("lat")&&(n.lat=e.json&&!isFinite(t.lat)?String(t.lat):t.lat),null!=t.lng&&t.hasOwnProperty("lng")&&(n.lng=e.json&&!isFinite(t.lng)?String(t.lng):t.lng),null!=t.zoom&&t.hasOwnProperty("zoom")&&("number"===typeof t.zoom?n.zoom=e.longs===String?String(t.zoom):t.zoom:n.zoom=e.longs===String?a.Long.prototype.toString.call(t.zoom):e.longs===Number?new a.LongBits(t.zoom.low>>>0,t.zoom.high>>>0).toNumber():t.zoom),null!=t.pushTitle&&t.hasOwnProperty("pushTitle")&&(n.pushTitle=t.pushTitle),null!=t.pushBody&&t.hasOwnProperty("pushBody")&&(n.pushBody=t.pushBody),null!=t.pushSound&&t.hasOwnProperty("pushSound")&&(n.pushSound=t.pushSound),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),g.ChatRBatch=function(){function t(t){if(this.msgs=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sign=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.msgs=a.emptyArray,t.encode=function(t,e){if(e||(e=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.msgs&&t.msgs.length)for(var n=0;n<t.msgs.length;++n)g.ChatR.encode(t.msgs[n],e.uint32(18).fork()).ldelim();return e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.ChatRBatch;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.msgs&&o.msgs.length||(o.msgs=[]),o.msgs.push(g.ChatR.decode(t,t.uint32()));break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.ChatRBatch)return t;var e=new g.ChatRBatch;if(null!=t.sign&&(a.Long?(e.sign=a.Long.fromValue(t.sign)).unsigned=!1:"string"===typeof t.sign?e.sign=parseInt(t.sign,10):"number"===typeof t.sign?e.sign=t.sign:"object"===o(t.sign)&&(e.sign=new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),t.msgs){if(!Array.isArray(t.msgs))throw TypeError(".ChatRBatch.msgs: array expected");e.msgs=[];for(var n=0;n<t.msgs.length;++n){if("object"!==o(t.msgs[n]))throw TypeError(".ChatRBatch.msgs: object expected");e.msgs[n]=g.ChatR.fromObject(t.msgs[n])}}return e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.msgs=[]),e.defaults)if(a.Long){var o=new a.Long(0,0,!1);n.sign=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sign=e.longs===String?"0":0;if(null!=t.sign&&t.hasOwnProperty("sign")&&("number"===typeof t.sign?n.sign=e.longs===String?String(t.sign):t.sign:n.sign=e.longs===String?a.Long.prototype.toString.call(t.sign):e.longs===Number?new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),t.msgs&&t.msgs.length){n.msgs=[];for(var i=0;i<t.msgs.length;++i)n.msgs[i]=g.ChatR.toObject(t.msgs[i],e)}return n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),g.GetHistory=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sign=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.toUid=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.msgEnd=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.msgStart=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.offset=a.Long?a.Long.fromBits(0,0,!1):0,t.encode=function(t,e){return e||(e=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.toUid&&Object.hasOwnProperty.call(t,"toUid")&&e.uint32(16).int64(t.toUid),null!=t.msgEnd&&Object.hasOwnProperty.call(t,"msgEnd")&&e.uint32(24).int64(t.msgEnd),null!=t.msgStart&&Object.hasOwnProperty.call(t,"msgStart")&&e.uint32(32).int64(t.msgStart),null!=t.offset&&Object.hasOwnProperty.call(t,"offset")&&e.uint32(40).int64(t.offset),e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.GetHistory;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.toUid=t.int64();break;case 3:o.msgEnd=t.int64();break;case 4:o.msgStart=t.int64();break;case 5:o.offset=t.int64();break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.GetHistory)return t;var e=new g.GetHistory;return null!=t.sign&&(a.Long?(e.sign=a.Long.fromValue(t.sign)).unsigned=!1:"string"===typeof t.sign?e.sign=parseInt(t.sign,10):"number"===typeof t.sign?e.sign=t.sign:"object"===o(t.sign)&&(e.sign=new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.toUid&&(a.Long?(e.toUid=a.Long.fromValue(t.toUid)).unsigned=!1:"string"===typeof t.toUid?e.toUid=parseInt(t.toUid,10):"number"===typeof t.toUid?e.toUid=t.toUid:"object"===o(t.toUid)&&(e.toUid=new a.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber())),null!=t.msgEnd&&(a.Long?(e.msgEnd=a.Long.fromValue(t.msgEnd)).unsigned=!1:"string"===typeof t.msgEnd?e.msgEnd=parseInt(t.msgEnd,10):"number"===typeof t.msgEnd?e.msgEnd=t.msgEnd:"object"===o(t.msgEnd)&&(e.msgEnd=new a.LongBits(t.msgEnd.low>>>0,t.msgEnd.high>>>0).toNumber())),null!=t.msgStart&&(a.Long?(e.msgStart=a.Long.fromValue(t.msgStart)).unsigned=!1:"string"===typeof t.msgStart?e.msgStart=parseInt(t.msgStart,10):"number"===typeof t.msgStart?e.msgStart=t.msgStart:"object"===o(t.msgStart)&&(e.msgStart=new a.LongBits(t.msgStart.low>>>0,t.msgStart.high>>>0).toNumber())),null!=t.offset&&(a.Long?(e.offset=a.Long.fromValue(t.offset)).unsigned=!1:"string"===typeof t.offset?e.offset=parseInt(t.offset,10):"number"===typeof t.offset?e.offset=t.offset:"object"===o(t.offset)&&(e.offset=new a.LongBits(t.offset.low>>>0,t.offset.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(a.Long){var o=new a.Long(0,0,!1);n.sign=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sign=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.toUid=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.toUid=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.msgEnd=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.msgEnd=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.msgStart=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.msgStart=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.offset=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.offset=e.longs===String?"0":0}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"===typeof t.sign?n.sign=e.longs===String?String(t.sign):t.sign:n.sign=e.longs===String?a.Long.prototype.toString.call(t.sign):e.longs===Number?new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.toUid&&t.hasOwnProperty("toUid")&&("number"===typeof t.toUid?n.toUid=e.longs===String?String(t.toUid):t.toUid:n.toUid=e.longs===String?a.Long.prototype.toString.call(t.toUid):e.longs===Number?new a.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber():t.toUid),null!=t.msgEnd&&t.hasOwnProperty("msgEnd")&&("number"===typeof t.msgEnd?n.msgEnd=e.longs===String?String(t.msgEnd):t.msgEnd:n.msgEnd=e.longs===String?a.Long.prototype.toString.call(t.msgEnd):e.longs===Number?new a.LongBits(t.msgEnd.low>>>0,t.msgEnd.high>>>0).toNumber():t.msgEnd),null!=t.msgStart&&t.hasOwnProperty("msgStart")&&("number"===typeof t.msgStart?n.msgStart=e.longs===String?String(t.msgStart):t.msgStart:n.msgStart=e.longs===String?a.Long.prototype.toString.call(t.msgStart):e.longs===Number?new a.LongBits(t.msgStart.low>>>0,t.msgStart.high>>>0).toNumber():t.msgStart),null!=t.offset&&t.hasOwnProperty("offset")&&("number"===typeof t.offset?n.offset=e.longs===String?String(t.offset):t.offset:n.offset=e.longs===String?a.Long.prototype.toString.call(t.offset):e.longs===Number?new a.LongBits(t.offset.low>>>0,t.offset.high>>>0).toNumber():t.offset),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),g.Revoke=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sign=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.toUid=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.msgId=a.Long?a.Long.fromBits(0,0,!1):0,t.encode=function(t,e){return e||(e=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.toUid&&Object.hasOwnProperty.call(t,"toUid")&&e.uint32(16).int64(t.toUid),null!=t.msgId&&Object.hasOwnProperty.call(t,"msgId")&&e.uint32(24).int64(t.msgId),e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.Revoke;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.toUid=t.int64();break;case 3:o.msgId=t.int64();break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.Revoke)return t;var e=new g.Revoke;return null!=t.sign&&(a.Long?(e.sign=a.Long.fromValue(t.sign)).unsigned=!1:"string"===typeof t.sign?e.sign=parseInt(t.sign,10):"number"===typeof t.sign?e.sign=t.sign:"object"===o(t.sign)&&(e.sign=new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.toUid&&(a.Long?(e.toUid=a.Long.fromValue(t.toUid)).unsigned=!1:"string"===typeof t.toUid?e.toUid=parseInt(t.toUid,10):"number"===typeof t.toUid?e.toUid=t.toUid:"object"===o(t.toUid)&&(e.toUid=new a.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber())),null!=t.msgId&&(a.Long?(e.msgId=a.Long.fromValue(t.msgId)).unsigned=!1:"string"===typeof t.msgId?e.msgId=parseInt(t.msgId,10):"number"===typeof t.msgId?e.msgId=t.msgId:"object"===o(t.msgId)&&(e.msgId=new a.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(a.Long){var o=new a.Long(0,0,!1);n.sign=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sign=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.toUid=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.toUid=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.msgId=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.msgId=e.longs===String?"0":0}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"===typeof t.sign?n.sign=e.longs===String?String(t.sign):t.sign:n.sign=e.longs===String?a.Long.prototype.toString.call(t.sign):e.longs===Number?new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.toUid&&t.hasOwnProperty("toUid")&&("number"===typeof t.toUid?n.toUid=e.longs===String?String(t.toUid):t.toUid:n.toUid=e.longs===String?a.Long.prototype.toString.call(t.toUid):e.longs===Number?new a.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber():t.toUid),null!=t.msgId&&t.hasOwnProperty("msgId")&&("number"===typeof t.msgId?n.msgId=e.longs===String?String(t.msgId):t.msgId:n.msgId=e.longs===String?a.Long.prototype.toString.call(t.msgId):e.longs===Number?new a.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber():t.msgId),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),g.MsgRead=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sign=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.toUid=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.msgId=a.Long?a.Long.fromBits(0,0,!1):0,t.encode=function(t,e){return e||(e=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.toUid&&Object.hasOwnProperty.call(t,"toUid")&&e.uint32(16).int64(t.toUid),null!=t.msgId&&Object.hasOwnProperty.call(t,"msgId")&&e.uint32(24).int64(t.msgId),e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.MsgRead;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.toUid=t.int64();break;case 3:o.msgId=t.int64();break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.MsgRead)return t;var e=new g.MsgRead;return null!=t.sign&&(a.Long?(e.sign=a.Long.fromValue(t.sign)).unsigned=!1:"string"===typeof t.sign?e.sign=parseInt(t.sign,10):"number"===typeof t.sign?e.sign=t.sign:"object"===o(t.sign)&&(e.sign=new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.toUid&&(a.Long?(e.toUid=a.Long.fromValue(t.toUid)).unsigned=!1:"string"===typeof t.toUid?e.toUid=parseInt(t.toUid,10):"number"===typeof t.toUid?e.toUid=t.toUid:"object"===o(t.toUid)&&(e.toUid=new a.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber())),null!=t.msgId&&(a.Long?(e.msgId=a.Long.fromValue(t.msgId)).unsigned=!1:"string"===typeof t.msgId?e.msgId=parseInt(t.msgId,10):"number"===typeof t.msgId?e.msgId=t.msgId:"object"===o(t.msgId)&&(e.msgId=new a.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(a.Long){var o=new a.Long(0,0,!1);n.sign=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sign=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.toUid=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.toUid=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.msgId=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.msgId=e.longs===String?"0":0}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"===typeof t.sign?n.sign=e.longs===String?String(t.sign):t.sign:n.sign=e.longs===String?a.Long.prototype.toString.call(t.sign):e.longs===Number?new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.toUid&&t.hasOwnProperty("toUid")&&("number"===typeof t.toUid?n.toUid=e.longs===String?String(t.toUid):t.toUid:n.toUid=e.longs===String?a.Long.prototype.toString.call(t.toUid):e.longs===Number?new a.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber():t.toUid),null!=t.msgId&&t.hasOwnProperty("msgId")&&("number"===typeof t.msgId?n.msgId=e.longs===String?String(t.msgId):t.msgId:n.msgId=e.longs===String?a.Long.prototype.toString.call(t.msgId):e.longs===Number?new a.LongBits(t.msgId.low>>>0,t.msgId.high>>>0).toNumber():t.msgId),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),g.DelChat=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sign=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.toUid=a.Long?a.Long.fromBits(0,0,!1):0,t.encode=function(t,e){return e||(e=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.toUid&&Object.hasOwnProperty.call(t,"toUid")&&e.uint32(16).int64(t.toUid),e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.DelChat;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.toUid=t.int64();break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.DelChat)return t;var e=new g.DelChat;return null!=t.sign&&(a.Long?(e.sign=a.Long.fromValue(t.sign)).unsigned=!1:"string"===typeof t.sign?e.sign=parseInt(t.sign,10):"number"===typeof t.sign?e.sign=t.sign:"object"===o(t.sign)&&(e.sign=new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.toUid&&(a.Long?(e.toUid=a.Long.fromValue(t.toUid)).unsigned=!1:"string"===typeof t.toUid?e.toUid=parseInt(t.toUid,10):"number"===typeof t.toUid?e.toUid=t.toUid:"object"===o(t.toUid)&&(e.toUid=new a.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(a.Long){var o=new a.Long(0,0,!1);n.sign=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sign=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.toUid=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.toUid=e.longs===String?"0":0}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"===typeof t.sign?n.sign=e.longs===String?String(t.sign):t.sign:n.sign=e.longs===String?a.Long.prototype.toString.call(t.sign):e.longs===Number?new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.toUid&&t.hasOwnProperty("toUid")&&("number"===typeof t.toUid?n.toUid=e.longs===String?String(t.toUid):t.toUid:n.toUid=e.longs===String?a.Long.prototype.toString.call(t.toUid):e.longs===Number?new a.LongBits(t.toUid.low>>>0,t.toUid.high>>>0).toNumber():t.toUid),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),g.GetChatList=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sign=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.updateTime=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.uid=a.Long?a.Long.fromBits(0,0,!1):0,t.encode=function(t,e){return e||(e=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.updateTime&&Object.hasOwnProperty.call(t,"updateTime")&&e.uint32(16).int64(t.updateTime),null!=t.uid&&Object.hasOwnProperty.call(t,"uid")&&e.uint32(24).int64(t.uid),e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.GetChatList;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.updateTime=t.int64();break;case 3:o.uid=t.int64();break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.GetChatList)return t;var e=new g.GetChatList;return null!=t.sign&&(a.Long?(e.sign=a.Long.fromValue(t.sign)).unsigned=!1:"string"===typeof t.sign?e.sign=parseInt(t.sign,10):"number"===typeof t.sign?e.sign=t.sign:"object"===o(t.sign)&&(e.sign=new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.updateTime&&(a.Long?(e.updateTime=a.Long.fromValue(t.updateTime)).unsigned=!1:"string"===typeof t.updateTime?e.updateTime=parseInt(t.updateTime,10):"number"===typeof t.updateTime?e.updateTime=t.updateTime:"object"===o(t.updateTime)&&(e.updateTime=new a.LongBits(t.updateTime.low>>>0,t.updateTime.high>>>0).toNumber())),null!=t.uid&&(a.Long?(e.uid=a.Long.fromValue(t.uid)).unsigned=!1:"string"===typeof t.uid?e.uid=parseInt(t.uid,10):"number"===typeof t.uid?e.uid=t.uid:"object"===o(t.uid)&&(e.uid=new a.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(a.Long){var o=new a.Long(0,0,!1);n.sign=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sign=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.updateTime=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.updateTime=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.uid=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.uid=e.longs===String?"0":0}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"===typeof t.sign?n.sign=e.longs===String?String(t.sign):t.sign:n.sign=e.longs===String?a.Long.prototype.toString.call(t.sign):e.longs===Number?new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.updateTime&&t.hasOwnProperty("updateTime")&&("number"===typeof t.updateTime?n.updateTime=e.longs===String?String(t.updateTime):t.updateTime:n.updateTime=e.longs===String?a.Long.prototype.toString.call(t.updateTime):e.longs===Number?new a.LongBits(t.updateTime.low>>>0,t.updateTime.high>>>0).toNumber():t.updateTime),null!=t.uid&&t.hasOwnProperty("uid")&&("number"===typeof t.uid?n.uid=e.longs===String?String(t.uid):t.uid:n.uid=e.longs===String?a.Long.prototype.toString.call(t.uid):e.longs===Number?new a.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber():t.uid),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),g.ChatItem=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sign=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.uid=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.msgEnd=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.msgLastRead=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.showMsgId=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.showMsgType=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.showMsg="",t.prototype.showMsgTime=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.unread=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.matched=!1,t.prototype.newMsg=!1,t.prototype.myMove=!1,t.prototype.iceBreak=!1,t.prototype.tipFree=!1,t.prototype.topAlbum=!1,t.prototype.iBlockU=!1,t.prototype.iChatU=!1,t.prototype.uChatI=!1,t.prototype.deleted=!1,t.encode=function(t,e){return e||(e=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.uid&&Object.hasOwnProperty.call(t,"uid")&&e.uint32(16).int64(t.uid),null!=t.msgEnd&&Object.hasOwnProperty.call(t,"msgEnd")&&e.uint32(24).int64(t.msgEnd),null!=t.msgLastRead&&Object.hasOwnProperty.call(t,"msgLastRead")&&e.uint32(32).int64(t.msgLastRead),null!=t.showMsgId&&Object.hasOwnProperty.call(t,"showMsgId")&&e.uint32(40).int64(t.showMsgId),null!=t.showMsgType&&Object.hasOwnProperty.call(t,"showMsgType")&&e.uint32(48).int64(t.showMsgType),null!=t.showMsg&&Object.hasOwnProperty.call(t,"showMsg")&&e.uint32(58).string(t.showMsg),null!=t.showMsgTime&&Object.hasOwnProperty.call(t,"showMsgTime")&&e.uint32(64).int64(t.showMsgTime),null!=t.unread&&Object.hasOwnProperty.call(t,"unread")&&e.uint32(72).int64(t.unread),null!=t.matched&&Object.hasOwnProperty.call(t,"matched")&&e.uint32(80).bool(t.matched),null!=t.newMsg&&Object.hasOwnProperty.call(t,"newMsg")&&e.uint32(88).bool(t.newMsg),null!=t.myMove&&Object.hasOwnProperty.call(t,"myMove")&&e.uint32(96).bool(t.myMove),null!=t.iceBreak&&Object.hasOwnProperty.call(t,"iceBreak")&&e.uint32(104).bool(t.iceBreak),null!=t.tipFree&&Object.hasOwnProperty.call(t,"tipFree")&&e.uint32(112).bool(t.tipFree),null!=t.topAlbum&&Object.hasOwnProperty.call(t,"topAlbum")&&e.uint32(120).bool(t.topAlbum),null!=t.iBlockU&&Object.hasOwnProperty.call(t,"iBlockU")&&e.uint32(128).bool(t.iBlockU),null!=t.iChatU&&Object.hasOwnProperty.call(t,"iChatU")&&e.uint32(136).bool(t.iChatU),null!=t.uChatI&&Object.hasOwnProperty.call(t,"uChatI")&&e.uint32(144).bool(t.uChatI),null!=t.deleted&&Object.hasOwnProperty.call(t,"deleted")&&e.uint32(152).bool(t.deleted),e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.ChatItem;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.uid=t.int64();break;case 3:o.msgEnd=t.int64();break;case 4:o.msgLastRead=t.int64();break;case 5:o.showMsgId=t.int64();break;case 6:o.showMsgType=t.int64();break;case 7:o.showMsg=t.string();break;case 8:o.showMsgTime=t.int64();break;case 9:o.unread=t.int64();break;case 10:o.matched=t.bool();break;case 11:o.newMsg=t.bool();break;case 12:o.myMove=t.bool();break;case 13:o.iceBreak=t.bool();break;case 14:o.tipFree=t.bool();break;case 15:o.topAlbum=t.bool();break;case 16:o.iBlockU=t.bool();break;case 17:o.iChatU=t.bool();break;case 18:o.uChatI=t.bool();break;case 19:o.deleted=t.bool();break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.ChatItem)return t;var e=new g.ChatItem;return null!=t.sign&&(a.Long?(e.sign=a.Long.fromValue(t.sign)).unsigned=!1:"string"===typeof t.sign?e.sign=parseInt(t.sign,10):"number"===typeof t.sign?e.sign=t.sign:"object"===o(t.sign)&&(e.sign=new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.uid&&(a.Long?(e.uid=a.Long.fromValue(t.uid)).unsigned=!1:"string"===typeof t.uid?e.uid=parseInt(t.uid,10):"number"===typeof t.uid?e.uid=t.uid:"object"===o(t.uid)&&(e.uid=new a.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber())),null!=t.msgEnd&&(a.Long?(e.msgEnd=a.Long.fromValue(t.msgEnd)).unsigned=!1:"string"===typeof t.msgEnd?e.msgEnd=parseInt(t.msgEnd,10):"number"===typeof t.msgEnd?e.msgEnd=t.msgEnd:"object"===o(t.msgEnd)&&(e.msgEnd=new a.LongBits(t.msgEnd.low>>>0,t.msgEnd.high>>>0).toNumber())),null!=t.msgLastRead&&(a.Long?(e.msgLastRead=a.Long.fromValue(t.msgLastRead)).unsigned=!1:"string"===typeof t.msgLastRead?e.msgLastRead=parseInt(t.msgLastRead,10):"number"===typeof t.msgLastRead?e.msgLastRead=t.msgLastRead:"object"===o(t.msgLastRead)&&(e.msgLastRead=new a.LongBits(t.msgLastRead.low>>>0,t.msgLastRead.high>>>0).toNumber())),null!=t.showMsgId&&(a.Long?(e.showMsgId=a.Long.fromValue(t.showMsgId)).unsigned=!1:"string"===typeof t.showMsgId?e.showMsgId=parseInt(t.showMsgId,10):"number"===typeof t.showMsgId?e.showMsgId=t.showMsgId:"object"===o(t.showMsgId)&&(e.showMsgId=new a.LongBits(t.showMsgId.low>>>0,t.showMsgId.high>>>0).toNumber())),null!=t.showMsgType&&(a.Long?(e.showMsgType=a.Long.fromValue(t.showMsgType)).unsigned=!1:"string"===typeof t.showMsgType?e.showMsgType=parseInt(t.showMsgType,10):"number"===typeof t.showMsgType?e.showMsgType=t.showMsgType:"object"===o(t.showMsgType)&&(e.showMsgType=new a.LongBits(t.showMsgType.low>>>0,t.showMsgType.high>>>0).toNumber())),null!=t.showMsg&&(e.showMsg=String(t.showMsg)),null!=t.showMsgTime&&(a.Long?(e.showMsgTime=a.Long.fromValue(t.showMsgTime)).unsigned=!1:"string"===typeof t.showMsgTime?e.showMsgTime=parseInt(t.showMsgTime,10):"number"===typeof t.showMsgTime?e.showMsgTime=t.showMsgTime:"object"===o(t.showMsgTime)&&(e.showMsgTime=new a.LongBits(t.showMsgTime.low>>>0,t.showMsgTime.high>>>0).toNumber())),null!=t.unread&&(a.Long?(e.unread=a.Long.fromValue(t.unread)).unsigned=!1:"string"===typeof t.unread?e.unread=parseInt(t.unread,10):"number"===typeof t.unread?e.unread=t.unread:"object"===o(t.unread)&&(e.unread=new a.LongBits(t.unread.low>>>0,t.unread.high>>>0).toNumber())),null!=t.matched&&(e.matched=Boolean(t.matched)),null!=t.newMsg&&(e.newMsg=Boolean(t.newMsg)),null!=t.myMove&&(e.myMove=Boolean(t.myMove)),null!=t.iceBreak&&(e.iceBreak=Boolean(t.iceBreak)),null!=t.tipFree&&(e.tipFree=Boolean(t.tipFree)),null!=t.topAlbum&&(e.topAlbum=Boolean(t.topAlbum)),null!=t.iBlockU&&(e.iBlockU=Boolean(t.iBlockU)),null!=t.iChatU&&(e.iChatU=Boolean(t.iChatU)),null!=t.uChatI&&(e.uChatI=Boolean(t.uChatI)),null!=t.deleted&&(e.deleted=Boolean(t.deleted)),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(a.Long){var o=new a.Long(0,0,!1);n.sign=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sign=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.uid=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.uid=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.msgEnd=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.msgEnd=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.msgLastRead=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.msgLastRead=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.showMsgId=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.showMsgId=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.showMsgType=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.showMsgType=e.longs===String?"0":0;if(n.showMsg="",a.Long){o=new a.Long(0,0,!1);n.showMsgTime=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.showMsgTime=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.unread=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.unread=e.longs===String?"0":0;n.matched=!1,n.newMsg=!1,n.myMove=!1,n.iceBreak=!1,n.tipFree=!1,n.topAlbum=!1,n.iBlockU=!1,n.iChatU=!1,n.uChatI=!1,n.deleted=!1}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"===typeof t.sign?n.sign=e.longs===String?String(t.sign):t.sign:n.sign=e.longs===String?a.Long.prototype.toString.call(t.sign):e.longs===Number?new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.uid&&t.hasOwnProperty("uid")&&("number"===typeof t.uid?n.uid=e.longs===String?String(t.uid):t.uid:n.uid=e.longs===String?a.Long.prototype.toString.call(t.uid):e.longs===Number?new a.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber():t.uid),null!=t.msgEnd&&t.hasOwnProperty("msgEnd")&&("number"===typeof t.msgEnd?n.msgEnd=e.longs===String?String(t.msgEnd):t.msgEnd:n.msgEnd=e.longs===String?a.Long.prototype.toString.call(t.msgEnd):e.longs===Number?new a.LongBits(t.msgEnd.low>>>0,t.msgEnd.high>>>0).toNumber():t.msgEnd),null!=t.msgLastRead&&t.hasOwnProperty("msgLastRead")&&("number"===typeof t.msgLastRead?n.msgLastRead=e.longs===String?String(t.msgLastRead):t.msgLastRead:n.msgLastRead=e.longs===String?a.Long.prototype.toString.call(t.msgLastRead):e.longs===Number?new a.LongBits(t.msgLastRead.low>>>0,t.msgLastRead.high>>>0).toNumber():t.msgLastRead),null!=t.showMsgId&&t.hasOwnProperty("showMsgId")&&("number"===typeof t.showMsgId?n.showMsgId=e.longs===String?String(t.showMsgId):t.showMsgId:n.showMsgId=e.longs===String?a.Long.prototype.toString.call(t.showMsgId):e.longs===Number?new a.LongBits(t.showMsgId.low>>>0,t.showMsgId.high>>>0).toNumber():t.showMsgId),null!=t.showMsgType&&t.hasOwnProperty("showMsgType")&&("number"===typeof t.showMsgType?n.showMsgType=e.longs===String?String(t.showMsgType):t.showMsgType:n.showMsgType=e.longs===String?a.Long.prototype.toString.call(t.showMsgType):e.longs===Number?new a.LongBits(t.showMsgType.low>>>0,t.showMsgType.high>>>0).toNumber():t.showMsgType),null!=t.showMsg&&t.hasOwnProperty("showMsg")&&(n.showMsg=t.showMsg),null!=t.showMsgTime&&t.hasOwnProperty("showMsgTime")&&("number"===typeof t.showMsgTime?n.showMsgTime=e.longs===String?String(t.showMsgTime):t.showMsgTime:n.showMsgTime=e.longs===String?a.Long.prototype.toString.call(t.showMsgTime):e.longs===Number?new a.LongBits(t.showMsgTime.low>>>0,t.showMsgTime.high>>>0).toNumber():t.showMsgTime),null!=t.unread&&t.hasOwnProperty("unread")&&("number"===typeof t.unread?n.unread=e.longs===String?String(t.unread):t.unread:n.unread=e.longs===String?a.Long.prototype.toString.call(t.unread):e.longs===Number?new a.LongBits(t.unread.low>>>0,t.unread.high>>>0).toNumber():t.unread),null!=t.matched&&t.hasOwnProperty("matched")&&(n.matched=t.matched),null!=t.newMsg&&t.hasOwnProperty("newMsg")&&(n.newMsg=t.newMsg),null!=t.myMove&&t.hasOwnProperty("myMove")&&(n.myMove=t.myMove),null!=t.iceBreak&&t.hasOwnProperty("iceBreak")&&(n.iceBreak=t.iceBreak),null!=t.tipFree&&t.hasOwnProperty("tipFree")&&(n.tipFree=t.tipFree),null!=t.topAlbum&&t.hasOwnProperty("topAlbum")&&(n.topAlbum=t.topAlbum),null!=t.iBlockU&&t.hasOwnProperty("iBlockU")&&(n.iBlockU=t.iBlockU),null!=t.iChatU&&t.hasOwnProperty("iChatU")&&(n.iChatU=t.iChatU),null!=t.uChatI&&t.hasOwnProperty("uChatI")&&(n.uChatI=t.uChatI),null!=t.deleted&&t.hasOwnProperty("deleted")&&(n.deleted=t.deleted),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),g.ChatItemUpdate=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sign=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.uid=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.event=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.updateTime=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.msgLastRead=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.unread=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.iBlockU=!1,t.prototype.deleted=!1,t.encode=function(t,e){return e||(e=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.uid&&Object.hasOwnProperty.call(t,"uid")&&e.uint32(16).int64(t.uid),null!=t.event&&Object.hasOwnProperty.call(t,"event")&&e.uint32(24).int64(t.event),null!=t.updateTime&&Object.hasOwnProperty.call(t,"updateTime")&&e.uint32(32).int64(t.updateTime),null!=t.msgLastRead&&Object.hasOwnProperty.call(t,"msgLastRead")&&e.uint32(40).int64(t.msgLastRead),null!=t.unread&&Object.hasOwnProperty.call(t,"unread")&&e.uint32(48).int64(t.unread),null!=t.iBlockU&&Object.hasOwnProperty.call(t,"iBlockU")&&e.uint32(56).bool(t.iBlockU),null!=t.deleted&&Object.hasOwnProperty.call(t,"deleted")&&e.uint32(64).bool(t.deleted),e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.ChatItemUpdate;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.uid=t.int64();break;case 3:o.event=t.int64();break;case 4:o.updateTime=t.int64();break;case 5:o.msgLastRead=t.int64();break;case 6:o.unread=t.int64();break;case 7:o.iBlockU=t.bool();break;case 8:o.deleted=t.bool();break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.ChatItemUpdate)return t;var e=new g.ChatItemUpdate;return null!=t.sign&&(a.Long?(e.sign=a.Long.fromValue(t.sign)).unsigned=!1:"string"===typeof t.sign?e.sign=parseInt(t.sign,10):"number"===typeof t.sign?e.sign=t.sign:"object"===o(t.sign)&&(e.sign=new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.uid&&(a.Long?(e.uid=a.Long.fromValue(t.uid)).unsigned=!1:"string"===typeof t.uid?e.uid=parseInt(t.uid,10):"number"===typeof t.uid?e.uid=t.uid:"object"===o(t.uid)&&(e.uid=new a.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber())),null!=t.event&&(a.Long?(e.event=a.Long.fromValue(t.event)).unsigned=!1:"string"===typeof t.event?e.event=parseInt(t.event,10):"number"===typeof t.event?e.event=t.event:"object"===o(t.event)&&(e.event=new a.LongBits(t.event.low>>>0,t.event.high>>>0).toNumber())),null!=t.updateTime&&(a.Long?(e.updateTime=a.Long.fromValue(t.updateTime)).unsigned=!1:"string"===typeof t.updateTime?e.updateTime=parseInt(t.updateTime,10):"number"===typeof t.updateTime?e.updateTime=t.updateTime:"object"===o(t.updateTime)&&(e.updateTime=new a.LongBits(t.updateTime.low>>>0,t.updateTime.high>>>0).toNumber())),null!=t.msgLastRead&&(a.Long?(e.msgLastRead=a.Long.fromValue(t.msgLastRead)).unsigned=!1:"string"===typeof t.msgLastRead?e.msgLastRead=parseInt(t.msgLastRead,10):"number"===typeof t.msgLastRead?e.msgLastRead=t.msgLastRead:"object"===o(t.msgLastRead)&&(e.msgLastRead=new a.LongBits(t.msgLastRead.low>>>0,t.msgLastRead.high>>>0).toNumber())),null!=t.unread&&(a.Long?(e.unread=a.Long.fromValue(t.unread)).unsigned=!1:"string"===typeof t.unread?e.unread=parseInt(t.unread,10):"number"===typeof t.unread?e.unread=t.unread:"object"===o(t.unread)&&(e.unread=new a.LongBits(t.unread.low>>>0,t.unread.high>>>0).toNumber())),null!=t.iBlockU&&(e.iBlockU=Boolean(t.iBlockU)),null!=t.deleted&&(e.deleted=Boolean(t.deleted)),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(a.Long){var o=new a.Long(0,0,!1);n.sign=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sign=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.uid=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.uid=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.event=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.event=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.updateTime=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.updateTime=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.msgLastRead=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.msgLastRead=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.unread=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.unread=e.longs===String?"0":0;n.iBlockU=!1,n.deleted=!1}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"===typeof t.sign?n.sign=e.longs===String?String(t.sign):t.sign:n.sign=e.longs===String?a.Long.prototype.toString.call(t.sign):e.longs===Number?new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.uid&&t.hasOwnProperty("uid")&&("number"===typeof t.uid?n.uid=e.longs===String?String(t.uid):t.uid:n.uid=e.longs===String?a.Long.prototype.toString.call(t.uid):e.longs===Number?new a.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber():t.uid),null!=t.event&&t.hasOwnProperty("event")&&("number"===typeof t.event?n.event=e.longs===String?String(t.event):t.event:n.event=e.longs===String?a.Long.prototype.toString.call(t.event):e.longs===Number?new a.LongBits(t.event.low>>>0,t.event.high>>>0).toNumber():t.event),null!=t.updateTime&&t.hasOwnProperty("updateTime")&&("number"===typeof t.updateTime?n.updateTime=e.longs===String?String(t.updateTime):t.updateTime:n.updateTime=e.longs===String?a.Long.prototype.toString.call(t.updateTime):e.longs===Number?new a.LongBits(t.updateTime.low>>>0,t.updateTime.high>>>0).toNumber():t.updateTime),null!=t.msgLastRead&&t.hasOwnProperty("msgLastRead")&&("number"===typeof t.msgLastRead?n.msgLastRead=e.longs===String?String(t.msgLastRead):t.msgLastRead:n.msgLastRead=e.longs===String?a.Long.prototype.toString.call(t.msgLastRead):e.longs===Number?new a.LongBits(t.msgLastRead.low>>>0,t.msgLastRead.high>>>0).toNumber():t.msgLastRead),null!=t.unread&&t.hasOwnProperty("unread")&&("number"===typeof t.unread?n.unread=e.longs===String?String(t.unread):t.unread:n.unread=e.longs===String?a.Long.prototype.toString.call(t.unread):e.longs===Number?new a.LongBits(t.unread.low>>>0,t.unread.high>>>0).toNumber():t.unread),null!=t.iBlockU&&t.hasOwnProperty("iBlockU")&&(n.iBlockU=t.iBlockU),null!=t.deleted&&t.hasOwnProperty("deleted")&&(n.deleted=t.deleted),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),g.ChatList=function(){function t(t){if(this.chatItems=[],t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sign=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.chatItems=a.emptyArray,t.prototype.updateTime=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.hasMore=!1,t.encode=function(t,e){if(e||(e=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.chatItems&&t.chatItems.length)for(var n=0;n<t.chatItems.length;++n)g.ChatItem.encode(t.chatItems[n],e.uint32(18).fork()).ldelim();return null!=t.updateTime&&Object.hasOwnProperty.call(t,"updateTime")&&e.uint32(24).int64(t.updateTime),null!=t.hasMore&&Object.hasOwnProperty.call(t,"hasMore")&&e.uint32(32).bool(t.hasMore),e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.ChatList;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.chatItems&&o.chatItems.length||(o.chatItems=[]),o.chatItems.push(g.ChatItem.decode(t,t.uint32()));break;case 3:o.updateTime=t.int64();break;case 4:o.hasMore=t.bool();break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.ChatList)return t;var e=new g.ChatList;if(null!=t.sign&&(a.Long?(e.sign=a.Long.fromValue(t.sign)).unsigned=!1:"string"===typeof t.sign?e.sign=parseInt(t.sign,10):"number"===typeof t.sign?e.sign=t.sign:"object"===o(t.sign)&&(e.sign=new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),t.chatItems){if(!Array.isArray(t.chatItems))throw TypeError(".ChatList.chatItems: array expected");e.chatItems=[];for(var n=0;n<t.chatItems.length;++n){if("object"!==o(t.chatItems[n]))throw TypeError(".ChatList.chatItems: object expected");e.chatItems[n]=g.ChatItem.fromObject(t.chatItems[n])}}return null!=t.updateTime&&(a.Long?(e.updateTime=a.Long.fromValue(t.updateTime)).unsigned=!1:"string"===typeof t.updateTime?e.updateTime=parseInt(t.updateTime,10):"number"===typeof t.updateTime?e.updateTime=t.updateTime:"object"===o(t.updateTime)&&(e.updateTime=new a.LongBits(t.updateTime.low>>>0,t.updateTime.high>>>0).toNumber())),null!=t.hasMore&&(e.hasMore=Boolean(t.hasMore)),e},t.toObject=function(t,e){e||(e={});var n={};if((e.arrays||e.defaults)&&(n.chatItems=[]),e.defaults){if(a.Long){var o=new a.Long(0,0,!1);n.sign=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sign=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.updateTime=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.updateTime=e.longs===String?"0":0;n.hasMore=!1}if(null!=t.sign&&t.hasOwnProperty("sign")&&("number"===typeof t.sign?n.sign=e.longs===String?String(t.sign):t.sign:n.sign=e.longs===String?a.Long.prototype.toString.call(t.sign):e.longs===Number?new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),t.chatItems&&t.chatItems.length){n.chatItems=[];for(var i=0;i<t.chatItems.length;++i)n.chatItems[i]=g.ChatItem.toObject(t.chatItems[i],e)}return null!=t.updateTime&&t.hasOwnProperty("updateTime")&&("number"===typeof t.updateTime?n.updateTime=e.longs===String?String(t.updateTime):t.updateTime:n.updateTime=e.longs===String?a.Long.prototype.toString.call(t.updateTime):e.longs===Number?new a.LongBits(t.updateTime.low>>>0,t.updateTime.high>>>0).toNumber():t.updateTime),null!=t.hasMore&&t.hasOwnProperty("hasMore")&&(n.hasMore=t.hasMore),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),g.GetChat=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sign=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.uid=a.Long?a.Long.fromBits(0,0,!1):0,t.encode=function(t,e){return e||(e=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.uid&&Object.hasOwnProperty.call(t,"uid")&&e.uint32(16).int64(t.uid),e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.GetChat;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.uid=t.int64();break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.GetChat)return t;var e=new g.GetChat;return null!=t.sign&&(a.Long?(e.sign=a.Long.fromValue(t.sign)).unsigned=!1:"string"===typeof t.sign?e.sign=parseInt(t.sign,10):"number"===typeof t.sign?e.sign=t.sign:"object"===o(t.sign)&&(e.sign=new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.uid&&(a.Long?(e.uid=a.Long.fromValue(t.uid)).unsigned=!1:"string"===typeof t.uid?e.uid=parseInt(t.uid,10):"number"===typeof t.uid?e.uid=t.uid:"object"===o(t.uid)&&(e.uid=new a.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(a.Long){var o=new a.Long(0,0,!1);n.sign=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sign=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.uid=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.uid=e.longs===String?"0":0}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"===typeof t.sign?n.sign=e.longs===String?String(t.sign):t.sign:n.sign=e.longs===String?a.Long.prototype.toString.call(t.sign):e.longs===Number?new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.uid&&t.hasOwnProperty("uid")&&("number"===typeof t.uid?n.uid=e.longs===String?String(t.uid):t.uid:n.uid=e.longs===String?a.Long.prototype.toString.call(t.uid):e.longs===Number?new a.LongBits(t.uid.low>>>0,t.uid.high>>>0).toNumber():t.uid),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),g.GetCosKey=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sign=a.Long?a.Long.fromBits(0,0,!1):0,t.encode=function(t,e){return e||(e=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.GetCosKey;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.GetCosKey)return t;var e=new g.GetCosKey;return null!=t.sign&&(a.Long?(e.sign=a.Long.fromValue(t.sign)).unsigned=!1:"string"===typeof t.sign?e.sign=parseInt(t.sign,10):"number"===typeof t.sign?e.sign=t.sign:"object"===o(t.sign)&&(e.sign=new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults)if(a.Long){var o=new a.Long(0,0,!1);n.sign=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sign=e.longs===String?"0":0;return null!=t.sign&&t.hasOwnProperty("sign")&&("number"===typeof t.sign?n.sign=e.longs===String?String(t.sign):t.sign:n.sign=e.longs===String?a.Long.prototype.toString.call(t.sign):e.longs===Number?new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),g.CosKey=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sign=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.token="",t.prototype.id="",t.prototype.key="",t.prototype.bucket="",t.prototype.region="",t.prototype.startTime=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.expTime=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.path="",t.prototype.pathDemo="",t.encode=function(t,e){return e||(e=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.token&&Object.hasOwnProperty.call(t,"token")&&e.uint32(18).string(t.token),null!=t.id&&Object.hasOwnProperty.call(t,"id")&&e.uint32(26).string(t.id),null!=t.key&&Object.hasOwnProperty.call(t,"key")&&e.uint32(34).string(t.key),null!=t.bucket&&Object.hasOwnProperty.call(t,"bucket")&&e.uint32(42).string(t.bucket),null!=t.region&&Object.hasOwnProperty.call(t,"region")&&e.uint32(50).string(t.region),null!=t.startTime&&Object.hasOwnProperty.call(t,"startTime")&&e.uint32(56).int64(t.startTime),null!=t.expTime&&Object.hasOwnProperty.call(t,"expTime")&&e.uint32(64).int64(t.expTime),null!=t.path&&Object.hasOwnProperty.call(t,"path")&&e.uint32(74).string(t.path),null!=t.pathDemo&&Object.hasOwnProperty.call(t,"pathDemo")&&e.uint32(82).string(t.pathDemo),e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.CosKey;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.token=t.string();break;case 3:o.id=t.string();break;case 4:o.key=t.string();break;case 5:o.bucket=t.string();break;case 6:o.region=t.string();break;case 7:o.startTime=t.int64();break;case 8:o.expTime=t.int64();break;case 9:o.path=t.string();break;case 10:o.pathDemo=t.string();break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.CosKey)return t;var e=new g.CosKey;return null!=t.sign&&(a.Long?(e.sign=a.Long.fromValue(t.sign)).unsigned=!1:"string"===typeof t.sign?e.sign=parseInt(t.sign,10):"number"===typeof t.sign?e.sign=t.sign:"object"===o(t.sign)&&(e.sign=new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.token&&(e.token=String(t.token)),null!=t.id&&(e.id=String(t.id)),null!=t.key&&(e.key=String(t.key)),null!=t.bucket&&(e.bucket=String(t.bucket)),null!=t.region&&(e.region=String(t.region)),null!=t.startTime&&(a.Long?(e.startTime=a.Long.fromValue(t.startTime)).unsigned=!1:"string"===typeof t.startTime?e.startTime=parseInt(t.startTime,10):"number"===typeof t.startTime?e.startTime=t.startTime:"object"===o(t.startTime)&&(e.startTime=new a.LongBits(t.startTime.low>>>0,t.startTime.high>>>0).toNumber())),null!=t.expTime&&(a.Long?(e.expTime=a.Long.fromValue(t.expTime)).unsigned=!1:"string"===typeof t.expTime?e.expTime=parseInt(t.expTime,10):"number"===typeof t.expTime?e.expTime=t.expTime:"object"===o(t.expTime)&&(e.expTime=new a.LongBits(t.expTime.low>>>0,t.expTime.high>>>0).toNumber())),null!=t.path&&(e.path=String(t.path)),null!=t.pathDemo&&(e.pathDemo=String(t.pathDemo)),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(a.Long){var o=new a.Long(0,0,!1);n.sign=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sign=e.longs===String?"0":0;if(n.token="",n.id="",n.key="",n.bucket="",n.region="",a.Long){o=new a.Long(0,0,!1);n.startTime=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.startTime=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.expTime=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.expTime=e.longs===String?"0":0;n.path="",n.pathDemo=""}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"===typeof t.sign?n.sign=e.longs===String?String(t.sign):t.sign:n.sign=e.longs===String?a.Long.prototype.toString.call(t.sign):e.longs===Number?new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.token&&t.hasOwnProperty("token")&&(n.token=t.token),null!=t.id&&t.hasOwnProperty("id")&&(n.id=t.id),null!=t.key&&t.hasOwnProperty("key")&&(n.key=t.key),null!=t.bucket&&t.hasOwnProperty("bucket")&&(n.bucket=t.bucket),null!=t.region&&t.hasOwnProperty("region")&&(n.region=t.region),null!=t.startTime&&t.hasOwnProperty("startTime")&&("number"===typeof t.startTime?n.startTime=e.longs===String?String(t.startTime):t.startTime:n.startTime=e.longs===String?a.Long.prototype.toString.call(t.startTime):e.longs===Number?new a.LongBits(t.startTime.low>>>0,t.startTime.high>>>0).toNumber():t.startTime),null!=t.expTime&&t.hasOwnProperty("expTime")&&("number"===typeof t.expTime?n.expTime=e.longs===String?String(t.expTime):t.expTime:n.expTime=e.longs===String?a.Long.prototype.toString.call(t.expTime):e.longs===Number?new a.LongBits(t.expTime.low>>>0,t.expTime.high>>>0).toNumber():t.expTime),null!=t.path&&t.hasOwnProperty("path")&&(n.path=t.path),null!=t.pathDemo&&t.hasOwnProperty("pathDemo")&&(n.pathDemo=t.pathDemo),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),g.UpdatePushToken=function(){function t(t){if(t)for(var e=Object.keys(t),n=0;n<e.length;++n)null!=t[e[n]]&&(this[e[n]]=t[e[n]])}return t.prototype.sign=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.pushChannel=a.Long?a.Long.fromBits(0,0,!1):0,t.prototype.pushToken="",t.encode=function(t,e){return e||(e=r.create()),null!=t.sign&&Object.hasOwnProperty.call(t,"sign")&&e.uint32(8).int64(t.sign),null!=t.pushChannel&&Object.hasOwnProperty.call(t,"pushChannel")&&e.uint32(16).int64(t.pushChannel),null!=t.pushToken&&Object.hasOwnProperty.call(t,"pushToken")&&e.uint32(26).string(t.pushToken),e},t.decode=function(t,e){t instanceof s||(t=s.create(t));var n=void 0===e?t.len:t.pos+e,o=new g.UpdatePushToken;while(t.pos<n){var i=t.uint32();switch(i>>>3){case 1:o.sign=t.int64();break;case 2:o.pushChannel=t.int64();break;case 3:o.pushToken=t.string();break;default:t.skipType(7&i);break}}return o},t.fromObject=function(t){if(t instanceof g.UpdatePushToken)return t;var e=new g.UpdatePushToken;return null!=t.sign&&(a.Long?(e.sign=a.Long.fromValue(t.sign)).unsigned=!1:"string"===typeof t.sign?e.sign=parseInt(t.sign,10):"number"===typeof t.sign?e.sign=t.sign:"object"===o(t.sign)&&(e.sign=new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber())),null!=t.pushChannel&&(a.Long?(e.pushChannel=a.Long.fromValue(t.pushChannel)).unsigned=!1:"string"===typeof t.pushChannel?e.pushChannel=parseInt(t.pushChannel,10):"number"===typeof t.pushChannel?e.pushChannel=t.pushChannel:"object"===o(t.pushChannel)&&(e.pushChannel=new a.LongBits(t.pushChannel.low>>>0,t.pushChannel.high>>>0).toNumber())),null!=t.pushToken&&(e.pushToken=String(t.pushToken)),e},t.toObject=function(t,e){e||(e={});var n={};if(e.defaults){if(a.Long){var o=new a.Long(0,0,!1);n.sign=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.sign=e.longs===String?"0":0;if(a.Long){o=new a.Long(0,0,!1);n.pushChannel=e.longs===String?o.toString():e.longs===Number?o.toNumber():o}else n.pushChannel=e.longs===String?"0":0;n.pushToken=""}return null!=t.sign&&t.hasOwnProperty("sign")&&("number"===typeof t.sign?n.sign=e.longs===String?String(t.sign):t.sign:n.sign=e.longs===String?a.Long.prototype.toString.call(t.sign):e.longs===Number?new a.LongBits(t.sign.low>>>0,t.sign.high>>>0).toNumber():t.sign),null!=t.pushChannel&&t.hasOwnProperty("pushChannel")&&("number"===typeof t.pushChannel?n.pushChannel=e.longs===String?String(t.pushChannel):t.pushChannel:n.pushChannel=e.longs===String?a.Long.prototype.toString.call(t.pushChannel):e.longs===Number?new a.LongBits(t.pushChannel.low>>>0,t.pushChannel.high>>>0).toNumber():t.pushChannel),null!=t.pushToken&&t.hasOwnProperty("pushToken")&&(n.pushToken=t.pushToken),n},t.prototype.toJSON=function(){return this.constructor.toObject(this,i.util.toJSONOptions)},t}(),t.exports=g}});